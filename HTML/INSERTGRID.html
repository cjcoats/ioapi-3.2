
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<!-- "$Id: INSERTGRID.html 271 2015-11-28 16:53:44Z coats $" -->
<META NAME="MSSmartTagsPreventParsing" CONTENT="TRUE"> 
<TITLE> Program M3XTRACT </TITLE>
</HEAD>

<BODY BGCOLOR     ="#FFFFFF" 
      TOPMARGIN   ="15" 
      MARGINHEIGHT="15" 
      LEFTMARGIN  ="15" 
      MARGINWIDTH ="15">

<H1>    Program M3XTRACT </H1>

<H2> Usage </H2>
<PRE>
    setenv  FILE1           &lt;path name&gt;
    setenv  FILE2           &lt;path name&gt;
    setenv GRID_REFINEMENT  &lt;re-sampling factor along coordinate axes&gt;
    setenv GRID_SCALE       &lt;re-gridding scale factor&gt;
    
    insertgrid
        &lt;and respond to the prompts&gt;
</PRE>
    where <VAR>FILE1</VAR> and <VAR>FILE2</VAR> are the 
    <A HREF = "LOGICALS.html"> logical names </A> of the input 
    and output files.  The assumption is that <VAR>FILE1</VAR> 
    has the coarser resolution and larger coverage; <VAR>FILE2</VAR> 
    has finer resolution and smaller coverage that is contained 
    within the coverage of <VAR>FILE1</VAR> (though it should 
    work in any case, and that the files have a common set of
    variables.
    <P> 

<H2> Summary </H2>

    The <CODE>INSERTGRID</CODE> program takes two GRIDDED files, 
    <VAR>FILE1</VAR> and <VAR>FILE2</VAR> and for a specified time step
    sequence, for each REAL variable in <VAR>FILE1</VAR>, and for each
    <VAR>FILE1</VAR> grid-cell completely contained within the coverage
    of <VAR>FILE2</VAR>, the program replaces the original value with a
    value averaged and rescaled from the values in <VAR>FILE2</VAR>,
    using a sub-sampling algorithm using sampling ratio governed by
    environment variable <CODE>GRID_REFINEMENT</CODE> (default 3). The
    default re-scaling is for emissions variables, which use a
    non-standard implicitly per-grid-cell units specification (SMOKE
    will claim units like &quot;tons per second&quot; when actually the
    units are grid-dependent &quot;tons per second per grid cell&quot;).
    For &quot;proper&quot; MKS-standard units (e.g., energy fluxes in
    Watts per square meter), the user needs to set the
    <CODE>GRID_SCALE<CODE> environment variable to <CODE>1.0</CODE>.
    <P>

    The program supports grid-to-grid/map-projection transformations
    for <A HREF="GRIDS.html#coords">all the standard I/O&nbsp;API
    map projections.</A>
    <P>

    If you want to run this program in <STRONG>batch mode</STRONG> 
    (from a script), the recommended way to develop the script is to 
    run the program once interactively noting the pattern of responses 
    to prompts which generate the particular analysis you want.  The 
    pattern of responses then becomes either a command-input file which 
    is redirected into the program in the script, or becomes a 
    &quot;here-document&quot; fed into the execution.  
    <P> 

    Source code for program <CODE>iinsertgrid</CODE> is available
    <A HREF = "gpl.txt">under the GNU GPL License, Version 2</A>,
    and can be downloaded <A HREF = "AVAIL.html">here</A>.
    <P>


<HR>

<A HREF = "GRIDPROBE.html" >
Previous:  <STRONG>GRIDPROBE</STRONG>
</A><P> 

<A HREF = "M3COMBO.html" >
Next:  <STRONG>M3COMBO</STRONG>
</A><P> 

<A HREF = "AA.html#tools"> 
Up: <STRONG>Related Programs</STRONG> 
</A><P>

<A HREF = "AA.html"> 
To: <STRONG>Models-3/EDSS I/O API:   The Help Pages</STRONG> 
</A><P>

    
</BODY>
</HTML>

