
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<!-- "$Id: NEWSTUFF.html 72 2017-12-12 17:54:20Z coats $" -->
<META NAME="MSSmartTagsPreventParsing" CONTENT="TRUE">
<TITLE>
    What's New with the I/O&nbsp;API
</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF"
      TOPMARGIN="15"
      MARGINHEIGHT="15"
      LEFTMARGIN="15"
      MARGINWIDTH="15">

    <EM>
    $Id: NEWSTUFF.html 72 2017-12-12 17:54:20Z coats $
    </EM>
    <HR>


<H1>
    What's New with the I/O&nbsp;API
</H1>

<H2> <A NAME = "contents">
    Contents
</A></H2>

    <UL>
         <LI>  <A HREF = "#ncf">Notes on <VAR>netCDF-4</VAR></A>,
               <P>

         <LI>  <A HREF = "#dec112017">
               Fixed bug reported by Ehsan Mosadegh</A> in programs
               <A HREF = "M3TSHIFT.html"><VAR>M3TSHIFT</VAR></A>.
               <A HREF = "M3WNDW.html"><VAR>M3WNDW</VAR></A>.

         <LI>  <A HREF = "#nov272017">
               Bug-fix by Jeff Vukovich</A> in 
               <A HREF = "UNGRIDB.html"><CODE>UNGRIDB()</CODE></A>.

         <LI>  <A HREF = "#nov112017">
               <CODE>INTEGER</CODE>-variable support</A> for <VAR>m3tools</VAR>
               program <VAR>mpastom3</VAR><BR>
               <CODE>INTEGER</CODE>-variable support for <CODE>MODMPASFIO</CODE>
               generic routine <CODE>MPINTERP()</CODE>, new
               &quot;incidence-matrix&quot; generic routine
               <CODE>MPCELLMATX()</CODE>.

         <LI>  <A HREF = "#nov082017">
               <VAR>m3tools</VAR> programs <VAR>mpasdiff, mpasstat,
               mpastom3</VAR><BR>
               <CODE>MODMPASFIO</CODE> generic routines
               <CODE>MPINTERP()</CODE>, <CODE>MPBARYMATX()</CODE>,
               <CODE>MPBARYMULT()</CODE>
               </A>
         <LI>  <A HREF = "#sep092017">
               Add extra attributes to new MPAS-files, for
               <VAR>VERDI</VAR>
               </A>
         <LI>  <A HREF = "#sep022017">
               Bug-fixes in programs <CODE>VERTOT,
               VERTINTEGRAL</CODE>, other enhancements
               </A>
         <LI>  <A HREF = "#aug112017">
               Bug-fixes in <CODE>MODULE MODMPASFIO</CODE>
               l</A>
         <LI>  <A HREF = "#jul192017">
               Bug-fixes in <CODE>EQMERC, SETEQM, SETTRM</CODE>
               </A>
         <LI>  <A HREF = "#jul052017">
               Bug-fixes for time stepped versions of read and write
               operations in <CODE>MODULE MODMPASFIO</CODE> and
               <CODE>MODULE MODNCFIO</CODE>
               </A>
         <LI>  <A HREF = "#jun302017">
               Bug-fixes in <CODE>MODULE MODMPASFIO</CODE> and
               log-message reductions for <CODE>MODULE MODNCFIO</CODE>
               </A>
         <LI>  <A HREF = "#may172017">
               Bug-fixes in <CODE>MODULE MODNCFIO</CODE> and
               <VAR>m3tools</VAR> program <VAR>m3interp</VAR>
               </A>
         <LI>  <A HREF = "#may142017">
               <CODE>MODULE MODNCFIO</CODE>:  add
               <CODE>CREATENC()</CODE>,
               <CODE>WRITENCVAR()</CODE>; bug-fixes
               </A>
         <LI>  <A HREF = "#may032017">
               <CODE>MODULE MODMPASFIO</CODE>
               </A>
         <LI>  <A HREF = "#apr032017">
               Timestep-read ooperations and bug-fixes in <CODE>MODULE MODNCFIO</CODE>
               </A>
          <LI>  <A HREF = "#nov282016">
               Bug fix in <CODE>MODPDATA/SETUP_DECOMP()</CODE>,
               top-level <CODE>Makefile.template</CODE>
               </A>
        <LI>  <A HREF = "#sep212016">
               I/O&nbsp;API Snoop Mode
               </A>
         <LI>  <A HREF = "#aug172016">
               Support for <CODE>INTEGER*1</CODE> and
               <CODE>INTEGER*2</CODE> to <CODE>REAQDNCVAR()</CODE>
               </A>
         <LI>  <A HREF = "#jul262016">
               New <VAR>m3tools</VAR> program</A>
               <A HREF = "M3MASK.html"><CODE>M3MASK</CODE> </A>
         <LI>  <A HREF = "#jul142016">
               0-D, 4-D <CODE>READNCVAR()</CODE> routines in
               <CODE>MODULE&nbsp;MODNCFIO</CODE>
               </A>
         <LI>  <A HREF = "#jun242016">
               Bug-fixes in <CODE>[DBL|INT|REAL|STR]LIST()</CODE> routines</A>
          <LI>  <A HREF = "#jun142016">
               Copy CMAQ metadata from input to output, for
               relevant <VAR>m3tools</VAR> programs</A>
        <LI>  <A HREF = "#jun032016">
               Don't compile <VAR>single_thread.F</VAR> if coupling mode
               not enabled</A>
         <LI>  <A HREF = "#jun012016">
               Bug-fix for I/O&nbsp;API 3.2 <VAR>m3tools</VAR> program <VAR>m3tproc</VAR></A>
         <LI>  <A HREF = "#apr292016">
               More CMAQ metadata in <CODE>MODULE MODATTS3</CODE></A>
         <LI>  <A HREF = "#apr222016">
               Bug-fixes for MPI/PnetCDF mode in <CODE>MODULE MODATTS3</CODE></A>
         <LI>  <A HREF = "#apr192016">
               Fixes for <CODE>IO_365</CODE> Climatology-Year Version.</A>
         <LI>  <A HREF = "#mar232016">
               &quot;unstructured text-file&quot; metadata in
               <CODE>MODULE MODATTS3</CODE></A>
         <LI>  <A HREF = "#mar222016">
               <CODE>Makeinclude</CODE> changes for  <VAR>gfortran</VAR></A>
         <LI>  <A HREF = "#mar112016">
               New <VAR>m3tools</VAR> program <VAR>findwndw</VAR></A>
         <LI>  <A HREF = "#mar082016">
               Compatibility fixes for I/O&nbsp;API 3.2</A>
         <LI>  <A HREF = "#mar042016">
               Bug fixes for I/O&nbsp;API 3.2</A> from Edward Anderson,
               Lockheed Martin (supporting EPA).
         <LI>  <A HREF = "#feb102016">
               CMAQ metadata routines now implemented in
               <CODE>MODULE&nbsp;MODATTS3</CODE> </A>,
         <LI>  <A HREF = "#jan292016">
               New  &quot;raw netCDF&quot; routines in
               <CODE>MODULE&nbsp;MODNCFIO</CODE> </A>
         <LI>  <A HREF = "#nov202015">
               I/O&nbsp;API v3.2 <VAR>m3tools</VAR> programs
               <VAR>wrfgriddesc</VAR> and <VAR>wrftom3</VAR> </A>
         <LI>  <A HREF = "#nov112015">
               I/O&nbsp;API v3.2 support for 365-day (no leap-year)
               climate modeling year</A>
         <LI>  <A HREF = "#nov062015">
               I/O&nbsp;API v3.2 <CODE>Makefile</CODE>s</A>
         <LI>  <A HREF = "#oct302015">
               I/O&nbsp;API v3.2 Major Update</A>
         <LI>  <A HREF = "#jul082015">
               Fix for bug in <VAR>ckfile3.f</VAR></A>, reported by Mogesh
               Naidoo.
         <LI>  <A HREF = "#jun182015">
               Fix in <CODE>GCTP()</CODE>for Intel <VAR>ifort</VAR> v-11 and later.</A>
         <LI>  <A HREF = "#may052015">
               More <VAR>gfortran</VAR> hacks; new <CODE>SINUGRD3</CODE>
               map projection</A>
         <LI>  <A HREF = "#mar0232015">
               New routine RUNSPEC()</A>
         <LI>  <A HREF = "#feb232015">
               Standards-violation fixes in <VAR>getyn(), getstr(),
               getreal(), getnum(), getmenu(), getdble(), promptmfile(),
               promptffile(), year4(), skipl()</VAR> </A>
         <LI>  <A HREF = "#ver32">
               <STRONG>I/O&nbsp;API Version 3.2-<VAR>beta</VAR></STRONG></A>
         <LI>  <A HREF = "#jan222015">
               Bugfixes in <VAR>m3tools/projtool</VAR> </A>
         <LI>  <A HREF = "#aug2814">
               Enhanced <VAR>m3tools/m3diff</VAR></A>
         <LI>  <A HREF = "#aug1414">
               Bug-fix in <VAR>m3tools/projtool</VAR>:  defining
               projections by angles.</A>
         <LI>  <A HREF = "#aug0614">
               <CODE>INTEGER(8)</CODE>-key search and sort routines.</A>
         <LI>  <A HREF = "#jul0914">
               Bug-fix in <VAR>m3tools</VAR> program  <VAR>m3diff</VAR></A>
         <LI>  <A HREF = "#mar1914">
               Generic <CODE>INTERFACE</CODE>s in <CODE>MODULE
               M3UTILIO</CODE></A>
         <LI>  <A HREF = "#jan1714">
               Bugfix in <VAR>m3tools</VAR> program  <VAR>m3merge</VAR></A>
         <LI>  <A HREF = "#dec1813">
               Changes to deal with  <VAR>gfortran-4.7</VAR> and later
               standards-incompatibilities.</A>
         <LI>  <A HREF = "#nov2113">
               OpenMP parallel for programs <CODE>M3AGMASK, M3AGMAX,
               M3COMBO, M3TPROC</CODE></A>
         <LI>  <A HREF = "#nov0513">
               New <CODE>SUBROUTINE LASTTIME</CODE> and use of it
               in <VAR>m3tools</VAR>; larger environment-buffer size</A>
         <LI>  <A HREF = "#dec1312">
               Bug-fix for <CODE>m3tools/m3combo</CODE> from
               Bonyoung Koo, Environ.</A>
         <LI>  <A HREF = "#nov1512">
               Bug-fix for <CODE>m3tools/m3xtract</CODE> and
               <CODE>m3tools/vertintegral</CODE>.</A>
         <LI>  <A HREF = "#oct3012">
               Bug-fix for <CODE>m3tools/projtool</CODE>.</A>
         <LI>  <A HREF = "#oct0212">
               Bug-fix for <CODE>INQATT3()</CODE>.</A>
         <LI>  <A HREF = "#sep1812">
               Bug-fix from Sarika Kulkarni, CA ARB, in
               <VAR>m3xtract</VAR>; new address info
               for <CODE>m3tools</CODE> programs.</A>
         <LI>  <A HREF = "#oct2611">
               <VAR>relocation error</VAR> link issues
                for <VAR>x86_64</VAR>, and new
                <STRONG><CODE>BIN=Linux2_x86_64ifort_medium</CODE></STRONG></A>
         <LI>  <A HREF = "#oct2111">
               Version&nbsp;3.1 <VAR>m3tools/Makefile.*</VAR> now assume netCDF Version&gt;4.1
               Library Changes</A>
         <LI>  <A HREF = "#aug3111">
               Bug-fixes in <VAR>m3tools</VAR> progrNew <CODE>DBLLIST()</CODE>; am <CODE>VERTINTEGRAL</CODE>
               </A>
         <LI>  <A HREF = "#aug2911">
               Bug-fixes in <CODE>SUBROUTINE CURREC</CODE>
               </A>
          <LI>  <A HREF = "#jun0811">
               Bug-fixes from Christian Hogrefe in <VAR>m3tools</VAR> programs
               <CODE>JULDATE</CODE> and <CODE>M3XTRACT</CODE>
               </A>
               top-level <CODE>Makefile.template</CODE>
               top-level <CODE>Makefile.template</CODE>
        <LI>  <A HREF = "#may2611">
               Bug-fix for file type <CODE>CUSTOM3</CODE> in  <VAR>m3tools</VAR> program
               <CODE>M3STAT</CODE>
               </A>
         <LI>  <A HREF = "#may0511">
               Bug-fixes and format improvements in <VAR>m3tools</VAR> program
               <CODE>PROJTOOL</CODE>
               </A>Makefile.nocpl.sed
         <LI>  <A HREF = "#apr2511">
               Add interface-block for <CODE>CRLF()</CODE> to
               <CODE>MODULE M3UTILIO</CODE>
               </A>
         <LI>  <A HREF = "#apr1911">
               Code re-organization to support full strength <VAR>DESC3()</VAR>
               for <CODE>BUFFERED</CODE> files, for next-version CMAQ, coming
               from David Wong, US EPA
               </A>
         <LI>  <A HREF = "#apr1511">
               Bug-fix in error-formats from Matthew Turner,
               University of Colorado at Boulder.
               </A>
         <LI>  <A HREF = "#aug1010">
               I/O&nbsp;API Version&nbsp;3.1:  large record support;
               <VAR>gfortran</VAR> support.
               </A>
         <LI>  <A HREF = "#ver31">
               I/O&nbsp;API Version&nbsp;3.1  <EM>Beta</EM>&nbsp;1
               </A>
         <LI>  <A HREF = "#feb1910">
               Bug fix:  Transverse and Equatorial Mercator output
               projections in <VAR>mtxcalc</VAR>
               </A>
         <LI>  <A HREF = "#feb0910">
               Bug fix:  declaration of  <VAR>IOPARMS3</VAR></A> in
               <VAR>m3tools</VAR> program <CODE>PROJTOOL</CODE>
         <LI>  <A HREF = "#oct2809">
               NetCDF flag-changes from Martin Otte, US EPA, for netCDF4
               compatibility; bug fix in <VAR>m3tools</VAR> program
               <CODE>PROJTOOL</CODE>.
               </A>
         <LI>  <A HREF = "#oct2609">
               New <VAR>m3tools</VAR> program <CODE>VERTINTEGRAL</CODE>
               for computing CONC-file species vertical column totals; various fixes.
               </A>
         <LI>  <A HREF = "#jul0109">
               Bug-fixes in <VAR>MATXATTS()</VAR> and <VAR>M3CPLE</VAR>
               </A>
         <LI>  <A HREF = "#may1509">
               Bug-fix in <VAR>STR2DBLE()</VAR>
               </A>
         <LI>  <A HREF = "#apr3009">
               Bug-fix in <VAR>INQATT3()</VAR>
               </A>
         <LI>  <A HREF = "#mar0909">

               Bug-fix in <VAR>M3COMBO</VAR>
               </A>
         <LI>  <A HREF = "#feb2409">
               <VAR>pgf90/gcc</VAR> issues
               </A>
         <LI>  <A HREF = "#dec2908">
               <VAR>Makefile</VAR> issues
               </A>
         <LI>  <A HREF = "#dec2308">
               New <VAR>MODULE MTXATTS</VAR>; <CODE>Makefile</CODE>s now default
               to compiling with a <VAR>f90</VAR> compiler.
               </A>
         <LI>  <A HREF = "#nov2808">
               Fix for WMO-screwup Longitude conventions in programs
               <VAR>M3CPLE</VAR> and <VAR>MTXCALC</VAR>
               </A>
         <LI>  <A HREF = "#jul2908">
               Add support for more map projections in <VAR>ckdesc3()</VAR>
               </A>
         <LI>  <A HREF = "#jul2108">
               Bug-fix in <VAR>m3tools/Makefile.nocpl</VAR>
               </A>
         <LI>  <A HREF = "#jul1008">
               Bug-fixes in <VAR>ALBERS()</VAR> and <VAR>LL2ALB()</VAR> in the
               experimental Albers Equal-Area Conic map projection
               support.
               </A>
         <LI>  <A HREF = "#jun1608">
               top-level <CODE>Makefile.template</CODE>
               Experimental Albers Equal-Area Conic map projection
               support; MM5 and WRF spheres added to <CODE>GCTP()</CODE>
               and  <CODE>SETSPHERE()</CODE> by Steve Howard, NOAA/ASMD;
               bug-fix to <CODE>dayagg</CODE>, for problem
               reported by Alexandros Syrakos.
               </A>
         <LI>  <A HREF = "#may0908">
               Bug-fix to <CODE>m3combo</CODE>, from Bonyoung Koo,
               ENVIRON International Corporation.
               </A>
         <LI>  <A HREF = "#feb1508">
               Multi-decade support; some Mac OS10 support; netCDF 3.6.2
               warning.
               </A>
          <LI>  <A HREF = "#dec1907">
               Bug-fix in <VAR>ISDSTIME()</VAR>
               </A>
        <LI>  <A HREF = "#nov2907">
               Bug-fix in worker routine <VAR>chkfil3()</VAR>
               </A>
         <LI>  <A HREF = "#nov1507">
               <VAR>Makeinclude</VAR> debug-support improvements
               for Intel, Sun, PathScale compilers.
               </A>
         <LI>  <A HREF = "#may3007">
               Linux x86_64 <VAR>Makeinclude</VAR> support for PGI
               compilers from  Prakash Doraiswamy and Winston Hao,
               NYDEC.
               </A>
         <LI>  <A HREF = "#may1607">
               Bug-fix/enhancement from Bonyoung Koo, Environ, to
               <VAR>m3tools</VAR> program <VAR>M3COMBO</VAR>; fix to
               <VAR>CKDESC3()</VAR> for boundary files;
               </A>
         <LI>  <A HREF = "#feb2107">
               Fixes to <VAR>m3tools</VAR> programs <VAR>M3COMBO</VAR>
               and <VAR>M3TPROC</VAR>
               </A>
         <LI>  <A HREF = "#feb1207">
               <CODE>#include &lt;stdlib.h&gt;</CODE> for strict
               interface checking of <VAR>exit()</VAR> call in
               <VAR>getdttime()</VAR></A>
         <LI>  <A HREF = "#feb0507">
               Sun compilers; bug-fix in <VAR>m3tools</VAR> program <VAR>M3COMBO</VAR></A>
         <LI>  <A HREF = "#jan2907">
               bug-fix in <VAR>JSTEP3()</VAR>
               </A>
         <LI>  <A HREF = "#jan2507">2007 daylight savings time support;
               bug-fix in <VAR>m3tools</VAR> program <VAR>M3STAT</VAR>;
               changes to support negative <CODE>JDATE</CODE>s
               </A>
         <LI>  <A HREF = "#dec1206">Corrected bug
               in <VAR>m3tools</VAR> program <VAR>MTXCALC</VAR>
               </A>
         <LI>  <A HREF = "#oct0506">Corrected splash-screen bug
               in <VAR>INIT3()</VAR>
               </A>
         <LI>  <A HREF = "#sep1306">Corrected
               <CODE>Makeinclude.Linux2_x86pg_gcc_mp</CODE> and
               <CODE>Makeinclude.Linux2_x86pg_gcc_nomp</CODE>
               </A>
         <LI>  <A HREF = "#sep0706">Enhancement to <VAR>m3tools</VAR> program
               <VAR>M3CPLE</VAR>
               </A>
         <LI>  <A HREF = "#sep0106">C/Fortran interface utilities;
               <VAR>MMDDYY()</VAR> bug-fix
               </A>
         <LI>  <A HREF = "#jun1106">FoMakefile.nocpl.sedrmat-fix
               in <VAR>CKDESC3()</VAR></A>
         <LI>  <A HREF = "#jun0706">Added WRF vertical coordinate
               support to worker routine <VAR>CKFILE3()</VAR>
               </A>
         <LI>  <A HREF = "#may1606">Added <CODE>INTERFACE</CODE>
               block for <VAR>GTPZ0()</VAR> in <CODE>m3utilio.f</CODE>;
               corrected legend in <VAR>m3tools</VAR> program <VAR>utmtool</VAR>
               </A>
         <LI>  <A HREF = "#may0806">Support for
               <CODE>VGTYP=VGWRFEM</CODE> in <VAR>CKDESC3()</VAR>
               </A>
         <LI>  <A HREF = "#apr2606">New multi-file version of <VAR>m3tools</VAR>
               program <VAR>M3COMBO</VAR>; bug-fix in <VAR>M3DIFF</VAR>
               </A>
         <LI>  <A HREF = "#mar3106">Fix <VAR>state3.h</VAR> storage-order
               error  for <CODE>IOAPI_CSTATE3</CODE> </A>
         <LI>  <A HREF = "#mar0806">PGI &quot;save&quot; flag fix</A>
         <LI>  <A HREF = "#feb1706">another M3DIFF bug fix</A>
         <LI>  <A HREF = "#jan2706">M3DIFF bug fix</A>
         <LI>  <A HREF = "#jan1106">MTXCALC bug fix</A>
         <LI>  <A HREF = "#jan0306">LAMBERT() fixes; M3UTILIO additions</A>
        <LI>  <A HREF = "#nov2905">Support for Absoft Pro Fortran</A>
         <LI>  <A HREF = "#nov1105">Mac <VAR>ioapi</VAR>
               package from Alex&nbsp;Zubrow at the University of
               Chicago;  assorted unused variables removed;</A>
         <LI>  <A HREF = "#oct3105">Python <VAR>ioapiTools</VAR>
               package from Alex&nbsp;Zubrow at the University of
               Chicago;  <VAR>UNGRIDI</VAR>
               <CODE>fixed_src/STATE3.EXT</CODE>
               </A>
         <LI>  <A HREF = "#oct2105">Bad <VAR>M3TOOL</VAR> starting
                                    time constraints</A>
         <LI>  <A HREF = "#sep3005"><CODE>XTRACT3()</CODE>; web-pages</A>
         <LI>  <A HREF = "#aug0405"><VAR>F77</VAR> issue in
               <CODE>GRDCHK3()</CODE></A>
         <LI>  <A HREF = "#july272005">Mods to <CODE>PARMS3.EXT</CODE>
               for WRF-Chem</A>
         <LI>  <A HREF = "#july052005">Bug-Fix in top-level
               <VAR>make configure</VAR></A>
         <LI>  <A HREF = "#jun222005">Enhancements to
                <VAR>m3tools</VAR> programs.</A>
         <LI>  <A HREF = "#jun172005">AIX Build changes</A>
         <LI>  <A HREF = "#jun102005">Build Enhancements</A>
         <LI>  <A HREF = "#jun022005">Bugfix in programs
               <CODE>M3CPLE</CODE>, <CODE>M3INTERP</CODE>,I/O&nbsp;API v3.2 <VAR>m3tools</VAR> programs
               <VAR>wrfgriddesc</VAR> and <VAR>wrftom3</VAR>
               <CODE>MTXBLEND</CODE>, and <CODE>MTXCPLE</CODE></A>
         <LI>  <A HREF = "#may252005">Bugfixes in
                <CODE>NEXTIME()</CODE> and <CODE>CURREC()</CODE></A>
         <LI>  <A HREF = "#may192005">Bugfix in
                <CODE>NEXTIME()</CODE></A>
         <LI>  <A HREF = "#apr1105">Bugfix from David WoBonyoung Koo, Environng, in
                <CODE>ENVYN()</CODE></A>
          <LI>  <A HREF = "#apr0605"><CODE>Makefile.nocpl</CODE>
               issue:  <CODE>ddtvar3v.F</CODE> and <CODE>interp3v.F</CODE></A>
        <LI>  <A HREF = "#apr0405">Bugfix for file-header checking
               routine
               </A>
         <LI>  <A HREF = "#mar2305">Build system enhancements,
               Bugfix for CBARNES gridding routines
               </A>
         <LI>  <A HREF = "#feb2205">Bugfix</A>  in
               <A HREF="READ4D.html"><CODE>READ4D()</CODE></A> and
               <A HREF="WRITE4D.html"><CODE>WRITE4D()</CODE></A>;
               new <VAR>m3utilio.f</VAR>containing
               <CODE>MODULE&nbsp;M3UTILIO</CODE> with explicit
               interfaces, as an alternative for the<CODE>INCLUDE</CODE>
               files.
       <LI>  <A HREF = "#feb0805">New &quot;Edit FDESC3D&quot;
              capability for <VAR>m3tools</VAR> program
              <CODE>M3EDHDR</CODE></A>
        <LI>  <A HREF = "#feb0105">Bug fix for worker routine
              <CODE>m3abortc()</CODE></A>
        <LI>  <A HREF = "#jan1805">Bug fix for <CODE>GCTP</CODE>;
                 Format fix for <CODE>envrealc()</CODE>
                                   and <CODE>envdblec()</CODE></A>
        <LI>  <A HREF = "#dec2904">Bug fix for <CODE>WRATT3</CODE></A>
        <LI>  <A HREF = "#dec0904">Range checks for

                                   <CODE>NVARS</CODE> in
                                   <CODE>OPEN3</CODE></A>
        <LI>  <A HREF = "#dec0104">Bug fix in
                                   <CODE>M3TPROC</CODE></A>
        <LI>  <A HREF = "#nov3004">Duplicate declaration removed from
                                   <CODE>STATE3.EXT</CODE>; new
                                   experimental Fortran-90
                                   <CODE>MODULE M3UTILIO</CODE></A>
        <LI>  <A HREF = "#nov2204">Enhancement for
                                   <CODE>CHECK3</CODE></A>
        <LI>  <A HREF = "#nov1904">Bug fix in program
                                   <CODE>VERTOT</CODE></A>
        <LI>  <A HREF = "#nov0104">Bug fixes; extended/modified
                                   program <CODE>M3TPROC</CODE></A>
        <LI>  <A HREF = "#oct1504">Bug fix; version in  <CODE>CRTFIL3</CODE></A>
        <LI>  <A HREF = "#sep072004">Bug fixes; virtual-mode <CODE>INTERP3</CODE></A>
        <LI>  <A HREF = "#sep032004">Bug fixes; program
               <CODE>m3interp</CODE>; I/O&nbsp;API v3.2
               <VAR>m3tools</VAR> programs <VAR>wrfgriddesc</VAR> and
               <VAR>wrftom3</VAR></A>
        <LI>  <A HREF = "#check3">Bug-fix in <CODE>&nbsp;CHECK3()</CODE>,
              <VAR>Makefile</VAR></A>
        <LI>  <A HREF = "#mercs"> More I/O&nbsp;API map projection
                                  support</A>
        <LI>  <A HREF = "#aug042004">Bug fix in <CODE>currstepc()</CODE></A>
        <LI>  <A HREF = "#jul302004">Bug fix in <CODE>M3COMBO</CODE></A>
        <LI>  <A HREF = "#jul262004">Bug fixes in <CODE>M3MSG2</CODE>
                                 and <CODE>UNGRIDB</CODE></A>
        <LI>  <A HREF = "#may252004">Message fix in <CODE>MTXCALC</CODE></A>
        <LI>  <A HREF = "#may172004">I/O&nbsp;API Version&nbsp;3.0
              Pre-Release&nbsp;2</A>: bugfix in <CODE>BINFIL3
              XTRACT3()</CODE>
        <LI>  <A HREF = "#ver30">I/O&nbsp;API Version&nbsp;3.0
              Pre-Release&nbsp;1</A>
        <LI>  <A HREF = "#may042004">New <CODE>Makefile</CODE>s</A> for
              I/O&nbsp;API version&nbsp;2.2 ; beta availability
              for I/O&nbsp;API version&nbsp;3.
        <LI>  <A HREF = "#may01">New subroutines
              <CODE>M3PARAG(), M3FLUSH()</CODE>
              </A>
       <LI>  <A HREF = "#apr162004">New subroutine
             <CODE>IOPARMS3()</CODE>, returns I/O&nbsp;API dimensioning
             parameters from INCLUDE-file <CODE>PARMS3.EXT</CODE>
             </A>.
        <LI>  <A HREF = "#mar302004">Bug-fix to subroutine
              <CODE>LAMBERT()</CODE>; enhancements to <CODE>CKFILE3()</CODE>
              and <CODE>CKDESC3()</CODE>, </A> by  Dazhong&nbsp;Yin,
              National Research Council of Canada.
        <LI>  <A HREF = "#dec022004">Bug-fixes to <VAR>m3tools</VAR> program
              <CODE>M3STAT</CODE>
              </A>.
        <LI>  <A HREF = "#oct172003">Type-portability changes;
              <CODE>STEGRD3</CODE> support; I/O&nbsp;API Version&nbsp;3
              development underway
              </A>.
        <LI>  <A HREF = "#aug202003"><CODE>Makeinclude.OSF1</CODE>
              improvements from Jinyou Liang, California Air Resources
              Board.
               </A>
        <LI>  <A HREF = "#jul092003">Critical sections; Compiler-Bug Report:
              IRIX&nbsp;F90 Version&nbsp;7.4</A>
        <LI>  <A HREF = "#jun052003">Enhancements</A>:  for IRIX&nbsp;F90
        <LI>  <A HREF = "#may192003">Minor BugFixes/Enhancements</A>: there
              were errors in treatment of buffered files; fixes from
              David Wong, US EPA.
        <LI>  <A HREF = "#may152003">Minor BugFixes/Enhancements</A>: the
              wrong directory path was used to construct the tar-file;
              function <CODE>CRLF()</CODE> (originating in, and used
              by SMOKE) was modified to generate correct results on
              &quot;normal&quot; UNIX systems; <CODE>XTRACT3()</CODE>
              time step handling modified to match <CODE>READ3()</CODE>.
        <LI>  <A HREF = "#may082003">Enhancement</A> to allow for parallel
              <CODE>INTERP3()</CODE> and/or <CODE>KFOPEN()</CODE> on
              files not yet opened; new <VAR>make</VAR>-target
              <CODE>nametest</CODE> checks linker-compatibility for
              <CODE>libioapi.a</CODE> and <CODE>libnetcdf.a</CODE>; new
              script <CODE>nm_test.csh</CODE> for testing linker-name
              compatibility.
        <LI>  <A HREF = "#apr142003">Bugfix</A> for  <CODE>SETTRM()</CODE>;
              and new spheroid-selection routines <CODE>SETSPHERE()</CODE>,
              <CODE>INITSPHERES()</CODE>, and <CODE>SPHEREDAT()</CODE>.
         <LI> <A HREF = "#feb03b">Bugfixes</A> for I/O&nbsp;API Version&nbsp;2.2
              Cray versions of routines <CODE>rdatt3c()</CODE>
              and <CODE>wratt3c()</CODE>, and for &quot;worker
              routines&quot; <CODE>BUFINTX</CODE> and <CODE>BUFINTXD</CODE>.
       <LI>  <A HREF = "#tprocb">Bugfix</A> for I/O&nbsp;API Version&nbsp;2.2
              program <CODE>M3TPROC</CODE> for output variable sets
              including type <CODE>M3DBLE</CODE>.
        <LI>  <A HREF = "#tproc">Bugfix</A> for I/O&nbsp;API Version&nbsp;2.2
              program <CODE>M3TPROC</CODE>.
        <LI>  <A HREF = "#restart">Bugfix</A> for corrected handling of
              circular-buffer/RESTART files in <CODE>READ3(), WRITE3(),
              INTERP3()</CODE>, and <CODE>DDTVAR3()</CODE>.
        <LI>  <A HREF = "#dstbug">Bugfix</A> in
              <CODE>LOGICAL&nbsp;FUNCTION&nbsp;ISDSTIME()</CODE>, also
              affecting <VAR>m3tools</VAR> programs
              <CODE>GREGDATE</CODE> and <CODE>JULDATE</CODE>: <EM>July
              9,&nbsp;2002</EM>
        <LI>  <A HREF = "#lambug">Bugfix in <CODE>SETLAM()</CODE></A>:
              <EM>June 7,&nbsp;2002</EM>
        <LI>  <A HREF = "#setbug">Bugfix in <CODE>SETENVVAR()</CODE></A>:
              <EM>May 10,&nbsp;2002</EM>
        <LI>  Library name changes associated with the new SMOKE
              release:  the current downloads now produce
              <EM>libioapi_v&lt;version&gt;.a</EM> (e.g.,
              <EM>libioapi_v2.1.a</EM>) which you can symbolically
              link, if you desire, to either of the names
              <EM>libioapi_new.a</EM> or <EM>libioapi.a</EM>:
              <EM>May&nbsp;7,&nbsp;2002</EM>
        <LI>  <A HREF = "#ver22">Version&nbsp;2.2</A>:
              <EM>Under Development:  due February 2002</EM>
                  enhancements for CMAQ, SMOKE, WRF
        <LI>  <A HREF = "#nextime">bugfix in NEXTIME()</A>:
              <EM>Jan. 15,&nbsp;2002</EM>
        <LI>  <A HREF = "#ver21">I/O&nbsp;API Version 2.1</A>:
              bugfixes; Intel Linux support; <CODE>INTLIST()</CODE>,
              <CODE>REALLIST()</CODE>, and <CODE>STRLIST()</CODE>,
              more tools-programs:  <EM>December 5, 2001</EM>
        <LI>  <A HREF = "gefile.html"><EM>Under Development:</EM>
               Geo-Element File Type</A> that supports both geospatial
               and finite-element data in a way upwardly compatible with
               the existing API and its library.
        <LI>  <A HREF = "#check3">Bug-fix in <CODE>&nbsp;CHECK3()</CODE>,
              <VAR>Makefile</VAR></A>
        <LI>  <A HREF = "#mercs"> More I/O&nbsp;API map projection
                                  support</A>
        <LI>  <A HREF = "#filchk"> New I/O&nbsp;API routine
              <CODE>FILCHK3</CODE></A>
        <LI>  <A HREF = "#tools"> &quot;Tools&quot; Programs</A><BR>
              <EM>More new stuff 10/16/2000:  MTXBUILD and MTXCPLE</EM>
        <LI>  <A HREF = "#newvv"> New Release Version </A>
        <LI>  <A HREF = "#taskp"> OpenMP Task-Parallel Extensions </A>
        <LI>  <A HREF = "#datap"> Data-Parallel Extensions </A>
        <LI>  <A HREF = "#coupl"> Parallel Extensions for
                                  Coupled Models </A>
        <LI>  <A HREF = "#times"> Time Series READ/WRITE </A>
        <LI>  <A HREF = "#addl" > Additional supported platforms </A>
        <LI>  <A HREF = "#mcpl" > MCPL:  an I/O&nbsp;API output
                                  module for MM5 </A>
        <P>
        <LI>  <A HREF = "CHANGES.html">Changes from I/O&nbsp;API Version&nbsp;1</A>
    </UL>
    <P>
    Go to the <STRONG><EM><A HREF = "AVAIL.html">I/O&nbsp;API
    Availability/Download/Installation page</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "ncf">
    Notes on <VAR>netCDF-4</VAR>
</A></H2>

    <BLOCKQUOTE>
    <STRONG>
    Starting with I/O&nbsp;API Version&nbsp;3.1, the
    <VAR>Makefile</VAR>s are configured to use netCDF Version 4, which
    separates the Fortran library <VAR>libnetcdff.a</VAR> from the
    C&nbsp;library <VAR>libnetcdf.a</VAR>.  To match this, the
    <CODE>LIBS</CODE> in the <VAR>m3tools/Makefile</VAR> uses
    <CODE>-lnetcdff&nbsp;-lnetcdf</CODE>.  If you use these versions of
    netCDF, you must also modify build-systems for  CMAQ, MCIP, SMOKE,
    and all your models that use netCDF similarly. If using a previous
    version of netCDF, you must modify <VAR>m3tools/Makefile</VAR>s to
    use just <CODE>-lnetcdf</CODE>.
    </STRONG>
    <P>

    Evidently, starting with netCDF-Fortran&nbsp;4.4.2, UCAR in their
    wisdom decided to silently eliminate the
    <BLOCKQUOTE><CODE>
        CALL NC*()
    </CODE></BLOCKQUOTE>
    Fortran interfaces, e.g.,
    <CODE>CALL&nbsp;NCCLOS(CDFID,&nbsp;IERR)</CODE>,
    in terms of which the I/O&nbsp;API was originally
    implemented, in favor of the
    <BLOCKQUOTE><CODE>
        IERR = NF_*()
    </CODE></BLOCKQUOTE>
    forms introduced with netCDF-3.  [If you can find any documentation
    on the web indicating that they were making this change I would
    enjoy seeing it; I can't find any.]<P>
    I/O&nbsp;API Version 3.2 was tediously re-coded to replace all 943
    of these calls by the newer  <CODE>IERR=NF_*()</CODE>  Fortran calls
    that are still supported.  Prior editions of the I/O&nbsp;API will
    have link errors with netCDF-Fortran 4.4.2 or later, because
    routines such as  <CODE>NCCLOS()</CODE>  are no longer in that
    library.  An easy check to see if you are affected by this is to
    use the <VAR>nm</VAR> system-utility to see if <CODE>NCCLOS</CODE>
    is present.  If the library works with 3.1 or earlier versions of
    the I/O&nbsp;API, you should see if you see a line with a
    &quot;<CODE>T</CODE>&quot; like the following (ignore the leading
    number-field); if it is missing, you will need I/O&nbsp;API-3.2
    or later, or an older version of netCDF.
    <BLOCKQUOTE><VAR>
        % nm libnetcdff.a | grep ncclos<BR>
        0000000000001440 T ncclos_
    </VAR></BLOCKQUOTE>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec112017">
    Fixed bug reported by Ehsan Mosadegh</A> in programs
    <A HREF = "M3TSHIFT.html"><VAR><STRONG>m3tshift</STRONG></VAR></A>
    and <A HREF = "M3WNDW.html"><VAR><STRONG>m3wndw</STRONG></VAR></A>.
</A></H2>

    <BLOCKQUOTE>
    Ehsan Mosadegh (dri.edu) reports a problem related to a missing
    <CODE>EFLAG</CODE> initialization in <VAR><STRONG>m3tools</STRONG></VAR>
    program <VAR><STRONG>m3tshift</STRONG></VAR>.  This bug is also present
    in program <VAR><STRONG>m3wndw</STRONG></VAR>.
    <P>
    Now fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov272017">
     Bug-fix in <CODE>UNGRIDB()</CODE>.
</A></H2>

    <BLOCKQUOTE>
    Jeff Vukovich (US EPA) reports a missing line
    <BLOCKQUOTE><CODE>
    CU( 4,S ) =  X * Y
    </CODE></BLOCKQUOTE>
    in the I/O&nbsp;API-3.2 version of 
    <A HREF = "UNGRIDB.html"><CODE>UNGRIDB()</CODE></A>.
    <P>
    Now fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov112017">
     MPAS <CODE>INTEGER</CODE>-variable support
</A></H2>

    <BLOCKQUOTE>
    <CODE>INTEGER</CODE>-variable support for <VAR>m3tools</VAR>
     program <A HREF="MPASTOM3.html"><VAR>mpastom3</VAR></A>:
     uses MPAS-cell values (as for <CODE>MPCELLMATX()</CODE>, below)
    instead of barycentric-linear interpolation.
    <P>
     
     <CODE>INTEGER</CODE>-variable support for <CODE>MODMPASFIO</CODE>
     generic routine
     <A HREF="MODMPASFIO.html#interp.html"><CODE>MPINTERP()</CODE></A>:
     uses MPAS-cell values (as for <CODE>MPCELLMATX()</CODE>, below)
    instead of barycentric-linear interpolation.
     <P>
     
     New &quot;incidence-matrix&quot; generic routine
     <A HREF="MODMPASFIO.html#cmatx.html"><CODE>MPCELLMATX()</CODE></A>
     returns the MPAS-cell subscripts for a set of points or 2-D grid of
     points.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov082017">
       <VAR>m3tools</VAR> programs <VAR>mpasdiff, mpasstat,
       mpastom3</VAR><BR>
       <CODE>MODMPASFIO</CODE> generic routine <CODE>MPINTERP()</CODE>,
       <CODE>MPBARYMATX()</CODE>, <CODE>MPBARYMAULT()</CODE>
</A></H2>

    <BLOCKQUOTE>
    New <VAR>m3tools</VAR> programs:
    <DL>
        <DT><A HREF="MPASDIFF.html"><VAR>mpasdiff</VAR></A>
        <DD>Compare two variables or layer-ranges of variables
            from one or two MPAS-format-netCDF files, using the
            <A HREF="GRIDOPS.html">standard list of differencing
            operations</A>
        <DT><A HREF="MPASSTAT.html"><VAR>mpasstat</VAR></A>
        <DD>Compute statistics (MEAN, SIGMA, MAX, MIN, and their
            locations), for a variable or layer-ranges of a variable
            from an MPAS-format-netCDF file.
        <DT><A HREF="MPASTOM3.html"><VAR>mpastom3</VAR></A>
        <DD>Interpolate a set of variables from an MPAS-format-netCDF
            file for a specified time step sequence to a grid specified
            by an I/O&nbsp;API gridded Lat-Lon file, and write the
            result to a gridded I/O&nbsp;API file.
    </DL>
    <P>
    New <CODE>MODMPASFIO</CODE> generic routines
    <DL>
        <DT> <A HREF="MODMPASFIO.html#interp.html"><CODE>MPINTERP()</CODE></A>
        <DD> Interpolate MPAS-grid data to a Lat-Lon specified point, set
             of points, or 2-D grid of points, using barycentric-linear
             interpolation.
        <DT> <A HREF="MODMPASFIO.html#bmatx.html"><CODE>MPBARYMATX()</CODE></A>
        <DD> Return a 3-band matrix for doing barycentric-linear
             interpolation from MPAS-grid data to a set of points or 2-D
             grid of points
        <DT> <A HREF="MODMPASFIO.html#bmutl.html"><CODE>MPBARYMULT()</CODE></A>
        <DD> Multiply a 3-band matrix from <CODE>MPBARYMATX()</CODE> by
             a (layered or non-layered) MPAS-grid variable.
    </DL>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep092017">
   Bug-fixes in programs <CODE>VERTOT, VERTINTEGRAL</CODE>
</A></H2>

    <BLOCKQUOTE>
    Bug reported by Kathy Brehme, Edward Anderson: incorrect default
    <CODE>RUNLEN</CODE> in <VAR>m3tools</VAR> program
    <VAR>vertot</VAR>. Same bug existed in <VAR>vertintegral</VAR>; bug
    fixed in both.
    <P>
    Enhanced default for <CODE>RUNLEN</CODE> in <VAR>m3tools</VAR>
    programs <VAR>m3stat, m3tshift, m3wndw, m3xtract</VAR>.
    <P>
    Enhanced <CODE>Makeinclude.*</CODE>: <VAR>make</VAR>-variables
    <CODE>MODI, E132</CODE> for module-include path, 132-column-fixed
    source format.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep022017">
   Add extra attributes to new MPAS-files, for <VAR>VERDI</VAR>
</A></H2>

    <BLOCKQUOTE>
    <VAR>VERDI</VAR> uses NCAR's Java <CODE>MPASConvention.java</CODE>
    for MPAS-file recognition.  This code requires global
    file-attributes <CODE>model_name</CODE> and  <CODE>Conventions</CODE>
    for file recognition.  <U>These attributes are nowhere mentioned
    in the MPAS file specification document.</U>
    <P>

    <CODE><A HREF="MODMPASFIO.html">MODULE&nbsp;MODMPASFIO</A></CODE>
    routine <CODE>CREATEMPAS()</CODE> now puts these attributes into the
    file headers.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug112017">
   Bug-fixes for <CODE>MODULE MODMPASFIO</CODE> 
</A></H2>

    <BLOCKQUOTE>
    Bug-fixes for incorrect read  of variables <VAR>lonCell</VAR> and
    write of <VAR>kiteAreasOnVertex</VAR> to/from file headers, in
    <CODE>MODULE&nbsp;MODMPASFIO</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul192017">
   Bug-fixes in <CODE>EQMERC, SETEQM, SETTRM</CODE> 
</A></H2>

    <BLOCKQUOTE>
    <CODE>EQMER()</CODE> had an incorrect test for <CODE>P_ALP</CODE>
    <P>

    <CODE>SETEQM, SETTRM</CODE> had incorrectly-worded error messages.
    <P>

    Bug-fix in <CODE>MODMPASFIO/ARC2MPAS()</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul052017">
     Bug-fixes for time stepped versions of read and write
     operations in <CODE>MODULE MODMPASFIO</CODE> and
     <CODE>MODULE MODNCFIO</CODE>
</A></H2>

    <BLOCKQUOTE>
    Subject says it:  in both of these, there was a consistent error
    in values for the <CODE>DELS()</CODE> argument for the time step
    dimension.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun302017">
    Bug-fixes in <CODE>MODULE MODMPASFIO</CODE> and
    log-message reductions for <CODE>MODULE MODNCFIO</CODE>
</A></H2>

    <BLOCKQUOTE>
    Bug in <CODE>MODMPASFIO/MPSTR2DT()</CODE>  which then causes bad
    results from <CODE>MODMPASFIO/READMPSTEPS()</CODE>.
    <P>
    Eliminate (annoyingly-numerous) &quot;Processing coordinate
    transform&quot; messages in <CODE>MODULE MODNCFIO</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may172017">
    Bug-fixes in <CODE>MODULE MODNCFIO</CODE>, <CODE>MODULE
    MODMPASFIO</CODE> , and <VAR>m3tools</VAR>
    program <VAR>m3interp</VAR>
</A></H2>

    <BLOCKQUOTE>
    Subject says it:  bugs in time step versions of read/write
    routines; with time interpolation of <CODE>BNDARY3</CODE> 
    boundary condition data structures.
    <P>
    Thanks to Joey Huang for reporting the <VAR>m3tools</VAR> bug.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may142017">
    <CODE>MODULE MODNCFIO</CODE>:  add <CODE>CREATENC()</CODE>,
    <CODE>WRITENCVAR()</CODE>; bug-fixes
</A></H2>

    <BLOCKQUOTE>

    <UL>
        <LI> See <A HREF="MODNCFIO.html#create"><CODE>CREATENC()</CODE></A>
             documentation:  create a new &quot;raw&quot; netCDF output
             file.
        <LI> See <A HREF="MODNCFIO.html#write"><CODE>WRITENCVAR()</CODE></A>
             documentation:  generic routine for writing whole-variable
             or timestep-of-variable to &quot;raw&quot; netCDF output
             file.
        <LI> <A HREF="MODNCFIO.html#read"><CODE>READNCVAR()</CODE></A>
             is now generic-only (with no public type-specific routines).
    </UL>
    <P>

    Bug-fixes for argument-mismatch in error-condition calls to
    <CODE>NF_STRERROR()</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may032017">
    <CODE>MODULE MODMPASFIO</CODE>
</A></H2>

    <BLOCKQUOTE>
    MPAS is a (potentially-)global unstructured-grid weather model that
    can be adapted for atmospheric chemistry, land-surface modeling, and
    other tasks.  It uses its own format built on top of netCDF to store
    and retrieve its model-data; the file structure is <EM>quite</EM>
    complicated.
    <P>
    New <A HREF="MODMPASFIO.html"><CODE>MODULE&nbsp;MODMPASFIO</CODE></A>
    addresses some of the difficulties in dealing with this complexity.
    It provides parameters and state-variables for MPAS grid description,
    routines for creating, opening, describing, reading, and writing
    MPAS-netCDF files, as well as a number of grid related utility
    routines.
    <P>
    Since this netCDF-format is quite complex, this can save you
    from having to write several thousands of lines of code on your
    own.  Additionally, it provides the data integrity facilities
    and error checking that are necessary to construct models of
    regulatory quality, for which the &quot;chain of custody&quot; for
    the model data must be kept in a form adequate for use in court.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr032017">
    Timestep-read operations and bug-fixes in <CODE>MODULE MODNCFIO</CODE>
</A></H2>

    <BLOCKQUOTE>
    Added routines <CODE>READNVSTEP*(FNAME,TSTEP,VNAME,...)</CODE>
    for reading one time step (<CODE>TSTEP=1,2,3,...</CODE>) of the
    indicated variable from time-stepped &quot;raw netCDF&quot; file
    <CODE>FNAME</CODE>.
    <P>
    Bug-fixes in some of the <CODE>READNCVAR4D*()</CODE> routines
    (<CODE>REAL</CODE> case was OK; others had a typo).
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov282016">
    Bug fix in <CODE>MODPDATA/SETUP_DECOMP()</CODE>
    top-level <CODE>Makefile.template</CODE>
</A></H2>

    <BLOCKQUOTE>
    Transcription error in <CODE>MODPDATA/SETUP_DECOMP()</CODE> reported
    by David Wong,  US EPA, now fixed.
    <P>
    Master <CODE>Makefile.template</CODE> had an inadvertent and
    backwards netCDF libraries definition; now corrected to
    <CODE><BLOCKQUOTE>
    -lnetcdff -lnetcdf
    </BLOCKQUOTE></CODE>
    reported by Xiangshang Li, Unkiversity of Houston.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep212016">
    I/O API Snoop Mode
</A></H2>

    <BLOCKQUOTE>
    <EM>For I/O&nbsp;API 3.2 or later:</EM>  If
    <A HREF="BUFFERED.html#snoop"><VAR>snoop mode</VAR></A> is configured
    in the <VAR>Makefile</VAR> when you build <VAR>libioapi.a</VAR>,
    then environment variables <CODE>SNOOPTRY3, SNOOPSECS3</CODE> control the
    number of re-tries and the delay between re-tries (secs) for
    reading data under end-of-file conditions.
    <P>

    This is useful, for example, when trying to &quot;pipeline&quot;
    processing for the models in a forecasting system.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug172016">
    Support for <CODE>INTEGER*1</CODE> and <CODE>INTEGER*2</CODE>
    for <CODE>REAQDNCVAR()</CODE>
</A></H2>

    <BLOCKQUOTE>
    <A HREF = "MODNCFIO.html"><CODE>MODULE&nbsp;MODNCFIO</CODE></A> had
    generic <CODE>INTERFACE&nbsp;READNCVAR()</CODE> augmented to
    support <CODE>NF_BYTE==INTEGER*1</CODE> and <CODE>NF_SHORT==INTEGER*2</CODE>
    variables.
    <P>

    Bug in library-order for <VAR>m3tools/Makefile</VAR>s, reported
    by Luís Carvalheiro, CESAM, Universidade de Aveiro.  Fixed.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul262016">
    New <VAR>m3tools</VAR> program <CODE>M3MASK</CODE>
</A></H2>

    <BLOCKQUOTE>
    <VAR>m3tools</VAR> program <A
    HREF="M3MASK.html"><CODE>M3MASK</CODE></A>
    reads ASCII mask-data, specified by a file having one line per
    column and row of the masked grid cells, and creates a GRIDDED
    output file with one <CODE>INTEGER</CODE> variable <CODE>MASK</CODE>
    for which
    <UL>
        <LI> <CODE>MASK(C,R)&nbsp;=&nbsp;1</CODE> for cells listed in
        input file; and
        <LI> <CODE>MASK(C,R)&nbsp;=&nbsp;0</CODE> otherwise
    </UL>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul142016">
    4-D <CODE>READNCVAR()</CODE> routines in
    <CODE>MODULE&nbsp;MODNCFIO</CODE>
</A></H2>

    <BLOCKQUOTE>
    New routines <CODE>READNCVAR4DD(), READNCVAR4DI(), READNCVAR4DR(),
    READNCVEC4DD(), READNCVEC4DI(), READNCVEC4DR()</CODE>
    in the generic routine <CODE>READNCVAR()</CODE>
    <P>
    Bug-fixes (fixed bad dimension-check) for
    <CODE>READNCVAR3DD(), READNCVAR3DI(), READNCVAR3DR(),
    READNCVEC3DD(), READNCVEC3DI(), READNCVEC3DR()</CODE>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul052016">
     Bug-fixes in <CODE>LASTTIME(), RUNSPEC(), CKFILE3()</CODE> routines
</A></H2>

    <BLOCKQUOTE>
    Missing <CODE>IMPLICIT NONE</CODE> and <CODE>EXTERNAL</CODE> declarations
    in <CODE>LASTTIME()</CODE>.
    <P>
    Error in calculation of <CODE>NRECS</CODE> argumnent for
    <CODE>RUNSPEC()</CODE>
    <P>
    Bug-fixes by Edward Anderson, Lockheed Martin, for
    <CODE>CKFILE3()</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->


<H2> <A NAME = "jun242016">
     Bug-fixes in <CODE>DBLLIST(), INTLIST(), REALIST(), STRLIST()</CODE> routines
</A></H2>

    <BLOCKQUOTE>
    Corrected mis-handling of delimiters in COMMA-or-BLANK delimited lists.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->


<H2> <A NAME = "jun142016">
     Copy CMAQ metadata from input to output, for relevant <VAR>m3tools</VAR>
     programs.
</A></H2>

    <BLOCKQUOTE>
    Add new routines <CODE>ISCMAQ()</CODE> and  <CODE>ISSMOKE()</CODE>
    to <A HREF="MODATTS3.html"><CODE>MODULE&nbsp;MODATTS3</CODE></A>.
    <P>
    Copy CMAQ metadata from input to output, for <VAR>m3tools</VAR>
    programs, under control of environment variable <CODE>COPY_META</CODE>
    (default <CODE>ISCMAQ(&lt;input file&gt;)</CODE>)
    <BLOCKQUOTE>
    <DL>
        <DT><VAR>m3combo</VAR>
        <DT><VAR>m3cple</VAR>
        <DT><VAR>m3interp</VAR>
        <DT><VAR>m3tproc</VAR>
        <DT><VAR>m3tshift</VAR>
        <DT><VAR>m3wndw</VAR>
        <DT><VAR>m3xtract</VAR>
    </DL>
    </BLOCKQUOTE>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun032016">
    Don't compile <VAR>single_thread.F</VAR> if coupling mode not enabled
</A></H2>

    <BLOCKQUOTE>
    Edward Anderson (Lockheed Martin, supporting the U.S. EPA) points out
    that <VAR>single_thread.o</VAR> has unsatisfied references that are
    troublesome for the creation of shared libraries.
    <P>
    <VAR>single_thread.F</VAR> now compiles conditionally, with nonempty
    body only if <CODE>IOAPICPL</CODE> is defined.  This source file is
    also commented out of the <VAR>Makefile.nocpl*</VAR>.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun012016">
    Bug-fix for I/O&nbsp;API 3.2 <VAR>m3tools</VAR> program <VAR>m3tproc</VAR>
</A></H2>

    <BLOCKQUOTE>
    Chris Nolte, US EPA ORD, points out a bug in the I/O&nbsp;API 3.2
    version of <VAR>m3tools</VAR> program <VAR>m3tproc</VAR>, together
    with a documentation problem and a <VAR>m3tools/Makefile</VAR> problem.<BR>
    FIXED.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr292016">
    More CMAQ metadata in <CODE>MODULE MODATTS3</CODE>
</A></H2>

    <BLOCKQUOTE>
    Metadata now contains values for all environment based control
    parameters, and path-names for input files.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr222016">
    Bug-fixes for MPI/PnetCDF mode in <CODE>MODULE MODATTS3</CODE>
</A></H2>

    <BLOCKQUOTE>
    Subject says it.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr192016">
    Fixes for Climatology-Year
    <CODE>IO_365</CODE> Version
</A></H2>

    <BLOCKQUOTE>
    Bug-fix from Chris Nolte, US EPA, in <A
    HREF="SECSDIFF.html"><CODE>SECSDIFF()</CODE></A> for the
    Climatology-Year <CODE>IO_365</CODE> Version.  He also noted that
    the following C routines needed
    <CODE>IO_365</CODE> support:
    <BLOCKQUOTE>
        <CODE>daymonc()</CODE><BR>
        <CODE>julianc()</CODE><BR>
        <CODE>mmddyyc()</CODE><BR>
        <CODE>secsdiffc</CODE><BR>
        <CODE>wkdayc()</CODE><BR>
    </BLOCKQUOTE>
    Now complete.
    <P>

    The following <VAR>Makeinclude</VAR>-files were added, for building
    360-day and 365-day Climatology Year versions of the I/O&nbsp;API,
    so that it will be easier to keep the Climatology-Year builds
    distinct from the (not-compatible) &quot;normal&quot; builds:
    <BLOCKQUOTE>
        <VAR>Makeinclude.Linux2_x86_64_360</VAR><BR>
        <VAR>Makeinclude.Linux2_x86_64_365</VAR><BR>
        <VAR>Makeinclude.Linux2_x86_64gfort_360</VAR><BR>
        <VAR>Makeinclude.Linux2_x86_64gfort_365</VAR><BR>
        <VAR>Makeinclude.Linux2_x86_64ifort_360</VAR><BR>
        <VAR>Makeinclude.Linux2_x86_64ifort_365</VAR><BR>
        <VAR>Makeinclude.Linux2_x86_64pg_360</VAR><BR>
        <VAR>Makeinclude.Linux2_x86_64pg_365</VAR><BR>
    </BLOCKQUOTE>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar232016">
    &quot;unstructured text-file&quot; metadata in
    <CODE>MODULE&nbsp;MODATTS3</CODE>
</A></H2>

    <BLOCKQUOTE>
    <CODE><A HREF="MODATTS3.html">MODULE&nbsp;MODATTS3</A></CODE> now
    has support for automated inclusion of &quot;unstructured
    text-file&quot; metadata into [P]netCDF file headers of all files
    newly-created by programs. Such files should be structured with
    80-column lines; to have their contents copied into file-headers,
    you need to do the following command in the program-script
    <PRE>
    setenv  IOAPI_TEXTMETA   &lt;path-nanme&gt;
    </PRE>
    <P>

    If active, the text metadata can be found in
    the following <CODE>MODULE</CODE>-variables in
    <CODE>MODULE&nbsp;MODATTS3</CODE>
    <PRE>
    LOGICAL,                   PUBLIC, PROTECTED, SAVE :: TEXTMETA          !!  text-file metadata active?
    INTEGER,                   PUBLIC, PROTECTED, SAVE :: TEXT_MLINES       !!  number of lines in TEXT_MDATA( :,: )
    CHARACTER*80, ALLOCATABLE, PUBLIC, PROTECTED, SAVE :: TEXT_MDATA( : )   !!  (TEXT_MLINES)
    </PRE>
    <P>

    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar222016">
    <CODE>Makeinclude</CODE> changes for <VAR>gfortran</VAR>
</A></H2>

    <BLOCKQUOTE>
    <VAR>gfortran</VAR> documentation is less than clear; it turns
    out that <CODE>-I</CODE> should be used for F90 module search-path,
    whereas  <CODE>-J</CODE> is used for F90 modulefile placement
    directory.
    <P>

    Note that PGI Fortran has strange and difficult rules for
    module search and module placement:  <CODE>-module</CODE>
    works for both, but only the first such directive governs
    module placement.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar112016">
    New <VAR>m3tools</VAR> program <STRONG><VAR>findwndw</VAR></STRONG>
</A></H2>

    <BLOCKQUOTE>
    New <VAR>m3tools</VAR> program
    <A HREF="FINDWNDW.html"><VAR>findwndw</VAR></A> to read headers from
    two GRIDDED files <CODE>FILE1</CODE> and <CODE>FILE2</CODE>, and
    compute the smallest window into the <CODE>FILE2</CODE> grid that
    completely encloses the grid for <CODE>FILE1</CODE>, if any.
    Program reports failure if the <CODE>FILE2</CODE>-grid does not
    completely cover the <CODE>FILE1</CODE>-grid.
    <P>

    Useful for tasks like finding the smallest window into a global
    Lat-Lon file (e.g. EDGAR emissions) that covers a Lambert based
    modeling grid, for subsequent use by <VAR>m3tools</VAR> program
    <VAR>m3wndw</VAR>.
    <P>

    <EM>Added Apr. 6, 2016:</EM> Mac OSX/gfortran/gcc support using
    <CODE>${BIN}=OSX_x86_gfortran</CODE>; see file
    <VAR>ioapi/Makeinclude.OSX_x86_gfortran</VAR>.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar082016">
    Compatibility fixes for I/O&nbsp;API 3.2; <CODE>DOWNCASE()</CODE>
</A></H2>

    <BLOCKQUOTE>
    B. H. Baek (UNC IE) discovered bacvkwards-compatibility problems
    in <CODE>BILIN(), BMATVEC(),  UNGRIDB(), and UNGRIDI() </CODE>. for
    codes that do not <CODE>USE&nbsp;M3UTILIO</CODE>.  Now fixed.
    <P>
    Added routine <CODE>DOWNCASE( ASTRING )</CODE> to convert argument
    <CODE>ASTRING</CODE> to lower-case
    <P>.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar042016">
    Bug fixes for I/O&nbsp;API 3.2 from Edward Anderson,
    Lockheed Martin.
</A></H2>

    <BLOCKQUOTE>
    <DL>
        <DT> Top-level <VAR>Makefile.template</VAR>
        <DD> Fixes to treatment of <VAR>make</VAR>-variable
        <CODE>BIN</CODE>
        <P>
        <DT> <VAR>ioapi/Makefile.*</VAR>
        <DD> Revised treatment of <VAR>make fixed_src</VAR> to fix
             initial creation of fixed-132 <CODE>INCLUDE</CODE>-files
             for CMAQ.
        <P>
        <DT> Multiple coupling-mode fixes.
        <DD> in <VAR>ddtvar3v.F, interp3v.F, intpqv.F</VAR>
        <P>
        <DT> Multiple-definition issues
        <DD> Stand-alone versions of <CODE>LL2UTM()</CODE> and
             <CODE>UTM2LL()</CODE>
        <P>
    </DL>
    <P>
    <EM>Added March&nbsp;9, 2016:</EM><BR>
    Need to add <VAR>utm2ll.f</VAR> to the <CODE>fSRC</CODE> list
    in the <VAR>Makefile</VAR>s; need to remove  <CODE>USE M3UTILIO</CODE>
    from it to keep <VAR>gfortran</VAR> from claiming (falsely) a
    circular dependency.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb102016">
    CMAQ metadata routines now implemented in <CODE>MODULE&nbsp;MODATTS3</CODE> </A></H2>

    <BLOCKQUOTE>
    The following routines are now implemented and &quot;active&quot;
    in <A HREF = "MODATTS3.html"><CODE>MODATTS3&nbsp;MODATTS3</CODE></A>:
    <DL>
        <DT> <VAR>INITCMAQ()</VAR>
        <DD> Initializes internal state variables holding CMAQ-standard metadata
             from either the standard-format text file with logical name
             <CODE>IOAPI_CMAQMETA</CODE>, from the program-environment
             if <CODE>IOAPI_CMAQMETA=="ENV"</CODE> or from the argument
             <CODE>MDATA</CODE>.
        <P>
        <DT> <VAR>GETCMAQ()</VAR>
        <DD> Reads CMAQ-standard metadata from the header of file
             <CODE>FNAME</CODE> and puts it either into CMAQ-metadata
             object <CODE>MDATA</CODE> (if present) or into
             CMAQ-metadata module variable <CODE>CMAQ_MDATA</CODE>.
        <P>
        <DT> <VAR>LOGCMAQ()</VAR>
        <DD> Writes CMAQ-standard metadata either from metadata-object
             <CODE>MDATA</CODE> (if present) or CMAQ-metadata module
             variable <CODE>CMAQ_MDATA</CODE> (otherwise) either to a
             structured-ASCII output file <CODE>FNAME</CODE> (if
             present) or to the program log
        <P>
        <DT> <VAR>SETCMAQ()</VAR>
        <DD> Writes CMAQ-standard metadata either from metadata-object
             <CODE>MDATA</CODE> (if present) or CMAQ-metadata module
             variable <CODE>CMAQ_MDATA</CODE> (otherwise) to the header
             of the specified I/O&nbsp;API file
        <P>
        <DT> <VAR>ENDCMAQ()</VAR>
        <DD> Turns off CMAQ-standard metadata
        <P>
    </DL>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan292016">
    New  &quot;raw netCDF&quot; routines in <CODE>MODULE&nbsp;MODNCFIO</CODE>
</A></H2>

    <BLOCKQUOTE>
    Add new routines <CODE>DESCNCVAR()</CODE> and <CODE>READNCVAR()</CODE>
    to <A HREF = "MODNCFIO.html"><CODE>MODULE MODNCFIO</CODE></A>:
    <DL>
        <DT> <VAR>DESCNCVAR(&nbsp;FNAME,&nbsp;MXVAR,&nbsp;NVARS,&nbsp;VNAMES,&nbsp;VTYPES,&nbsp;VNDIMS,&nbsp;VDIMS&nbsp;)</VAR>
        <DD> Returns lists giving the names, data-types, numbers of
             dimensions, and dimensions for the variables in the netCDF
             file with logical name <CODE>FNAME</CODE>
        <P>
        <DT> <VAR>READNCVAR(&nbsp;FNAME,&nbsp;VNAME,&nbsp;NCOLS,&nbsp;[NROWS,&nbsp;[NLAYS,]]&nbsp;GRID&nbsp;)</VAR>
        <DD> Reads the specified 1-D, 2-D, or 3-D netCDF variable named
             <CODE>VNAME</CODE>from the netCDF file with logical name
             <CODE>FNAME</CODE> (with dimension-checking).<BR>
             <EM>Generic, for 1-D, 2-D, and 3-D variables of type
             <CODE>{M3INT,M3REAL,M3DBLE}</CODE>, and both fully-dimensioned
             and single-indexed output array <CODE>GRID</CODE>.</EM>
        <P>
    </DL>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec032015">
    New <CODE>DBLLIST()</CODE>;</A>
    bug-fixes and support for blank-delimited lists
    in <A HREF="LISTS.html"><CODE>*LIST()</CODE></A> routines
</H2>

    <BLOCKQUOTE>
    Add new routine <CODE>DBLLIST()</CODE> for <CODE>REAL*8</CODE>
    valued lists, with support as part of the <CODE>ENVLIST()</CODE>
    generic.
    <P>

    Support for lists requiring more than 512 columns had a bug.
    Now fixed.  These routines also now support blank-delimited
    lists.
    <P>

    New <VAR>m3tools</VAR> program
    <A HREF = "GRIDPROBE.html"><VAR>gridprobe</VAR></A> interpolates
    time series for a specified layer of a REAL variable to a specified
    set of Lat-Lon points from a GRIDDED input file, and write the
    resulting time series as columns to a human-readable ASCII REPORT-file.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov202015">
    I/O&nbsp;API v3.2 <VAR>m3tools</VAR> programs
    <VAR>wrfgriddesc</VAR> and <VAR>wrftom3</VAR>
</A></H2>

    <BLOCKQUOTE>
    <VAR>m3tools</VAR> program
    <A HREF = "WRFGRIDDESC.html"><VAR>wrfgriddesc</VAR></A> creates a
    <VAR>GRIDDESC</VAR> file from the header-data in a WRF-format netCDF
    file.
    <P>

    <VAR>m3tools</VAR> program
    <A HREF = "WRFTOM3.html"><VAR>wrftom3</VAR></A>
    converts/extracts/windows variables from WRF-format netCDF files to
    GRIDDED I/O&nbsp;API files.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov112015">
    I/O&nbsp;API v3.2 support for 360/365-day (no leap-year)
               climate modeling years
</A></H2>

    <BLOCKQUOTE>
    I/O&nbsp;API 3.2 has optional support for climate modeling with a
    365-day/no-leap-year calendar with &quot;normal&quot; months, and
    weeks aligned so that Jan.&nbsp;1, 1900 is a Monday.  To build this
    version of the library, customize your <VAR>ioapi/Makefile</VAR> by
    adding <CODE>-DIO_365=1</CODE> to the <CODE>DEFINEFLAGS</CODE>
    <VAR>make</VAR>-variable in it.
    <P>

    Note that since I/O&nbsp;API 3.0 in 2002, the I/O&nbsp;API has had
    optional support for climate modeling with a 360-day/30-day-month
    calendar, with weeks also aligned so that Jan.&nbsp;1, 1900 is
    a Monday.  To build this version of the library, customize your
    <VAR>ioapi/Makefile</VAR> by adding <CODE>-DIO_360=1</CODE> to its
    <CODE>DEFINEFLAGS</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov062015">
    I/O&nbsp;API v3.2 <CODE>Makefile</CODE>s
</A></H2>

    <BLOCKQUOTE>
    Note that  <VAR>Makefile</VAR>s always need to be customized
    for your system (installation-directory <CODE>BASEDIR</CODE>,
    etc.).<P>
    Starting with this release, these <VAR>Makefile</VAR>s
    will not be included in the release <VAR>ioapi-3.2.tar.gz</VAR>;
    for both of the directories <VAR>ioapi</VAR> and <VAR>m3tools</VAR>
    you will need to copy one of the <VAR>Makefile.*</VAR> templates
    to  <VAR>Makefile</VAR> and customize it.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct302015">
    I/O&nbsp;API v3.2-<EM>beta</EM>: Major Update.
</A></H2>

    Many thanks to George Delic, Ph.D., HiPERiSM Consulting LLC
    &lt;<A HREF="http://www.hiperism.com/">http://www.hiperism.com/</A>&gt;
    for help getting a cleanly-working release out.
    <P>
    There are major changes for this release, some of which are
    <A HREF = "#ver32">documented elsewhere below</A>.
    There are a number of additional changes, especially
    for CMAQ-5.1, netCDF-4, and for MS-Windows:
    <DL>
        <DT><STRONG><VAR>PnetCDF</VAR> for CMAQ-5.1</STRONG></DT>
        <DD>CMAQ-5.1 can use
        <A HREF="https://trac.mcs.anl.gov/projects/parallel-netcdf"><VAR>PnetCDF</VAR></A>
        for distributed-parallel I/O.  Note that this is for gridded
        files only, with the fixed data-distribution specified for CMAQ.
        To activate <VAR>pnetCDF</VAR> distributed I/O for a particular
        file, you need the following kind of <CODE>setenv</CODE> statement in
        your run-script.
        <BLOCKQUOTE><CODE>
        setenv &lt;logical name&gt; MPI:&lt;path (physical) name&gt;
        </CODE></BLOCKQUOTE>
        The <VAR>ioapi/Makefile.pncf</VAR> and
        <VAR>m3tools/Makefile.pncf</VAR> may be used to create
        I/O&nbsp;API libraries with PnetCDF activated, or this feature
        may be turned on by un-commenting the compile-flag
        <CODE>-DIOAPI_PNCF=1</CODE> in the <VAR>Makefile</VAR>s.
        <P>
        Related data- and processor-distribution state and
        routines are found in new <CODE>MODULE&nbsp;MODPDATA</CODE>.
        See <A HREF="BUFFERED.html#pncf">this section on environment
        variables needed for using distributed-parallel I/O</A>.
        <P>
        The original concept and the prototype code are due to
        Dr.&nbsp;David Wong, US&nbsp;EPA.  This code has been
        extensively extended and revised, to meet the needs of proper
        I/O&nbsp;API integration and software engineering standards.
        </DD>
        <P>

        <DT><STRONG>Changes for <VAR>netCDF-4</VAR></STRONG></DT>
        <DD>The I/O&nbsp;API was originally implemented in the early
        1990's, using the netCDF-2 <CODE>NC*()</CODE> Fortran
        interfaces.  As noted elsewhere, netCDF-4 split apart the
        C interfaces, the Fortran interfaces, and the C++ interfaces
        into separate libraries (which each have their own versioning).
        Recent (post-4.4) versions of netCDF-Fortran have dropped the
        <CODE>NC*()</CODE> interfaces used; a major and tedious re-write
        was necessary to re-cast all 800+ <CODE>NC*()</CODE> calls in
        terms of netCDF-3-style <CODE>NF_*()</CODE> interfaces.
        <P>
        At the same time, support was added for 64-bit-integer variables
        (type <CODE>M3INT8&nbsp;=&nbsp;10</CODE>, provided that you are
        using netCDF-4 libraries.  This feature may be turned on by
        un-commenting <CODE>-DIOAPI_NCF4=1</CODE> in the
        <VAR>Makefile</VAR>s.
        </DD>
        <P>

        <DT><STRONG><VAR>Cygwin</VAR> under MS-Windows</STRONG></DT>
        <DD>The following <VAR>Makeinclude</VAR> files are now
        available, to build the I/O&nbsp;API using <VAR>gcc</VAR>
        and <VAR>gfortran</VAR> for MS-Windows under
        <A HREF="https://cygwin.com/index.html">Cygwin</A>:
        <DL>
            <DT><VAR>Makeinclude.WIN_x86gfort</VAR>
            <DD>32-bit library/executables using Cygwin <VAR>gcc</VAR>
                and <VAR>gfortran</VAR></DD>
            <DT><VAR>Makeinclude.WIN_x86_64mingw64</VAR>
            <DD>64-bit library/executables using MingW-64  <VAR>gcc</VAR>
                and <VAR>gfortran</VAR></DD>
        </DL>
        </DD>
        <P>
    </DL>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul222015">
    I/O&nbsp;API v3.2-<EM>beta</EM>:  dependency-fixes; new <VAR>m3tools</VAR>
               program <VAR>insertgrid</VAR>
</A></H2>

    July&nbsp;22, 2015:
    <P>
    For various C-language call reasons, there need to be standalone
    versions of <A HREF="LAMBERT.html"><CODE>LAMBERT()</CODE></A>
    and <A HREF="LASTTIME.html"><CODE>LASTTIME()</CODE></A>
    <P>
    New <VAR>m3tools</VAR> program
    <A HREF="INSERTGRID.html"><VAR>insertgrid</VAR></A> replaces the
    REAL variable-values from GRIDDED file <VAR>FILE1</VAR> by
    values from GRIDDED file <VAR>FILE2</VAR> for those
    <VAR>FILE1</VAR>-cells completely covered by <VAR>FILE2</VAR>, with
    re-scaling option. Default scaling assumes (non-MKS SMOKE:  e.g.,
    G/S/grid-cell) emissions units rather than (properly-mathematical
    MKS) flux units (e.g., <VAR>W/m^2</VAR>).
    <P>
    For I/O&nbsp;API version3.2-<EM>beta</EM>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul082015">
    Bug fix in <VAR>ckfile3()</VAR>
</A></H2>

    July&nbsp;8, 2015:
    <P>
    Mogesh Naidoo reports failure of  <VAR>ckfile3()</VAR> to support
    Equatorial Mercator projection (<CODE>GDTYP3=EQMGRD3</CODE>).  This
    bug is also present for <CODE>GDTYP3=TRMGRD3, ALBGRD3, LEQGRD3,
    SINUGRD3</CODE>
    <P>
    Now corrected in all I/O&nbsp;API versions (3.0, 3.1, 3.2-<EM>beta</EM>).
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun182015">
    Fix in <CODE>GCTP()</CODE>for Intel <VAR>ifort</VAR> v-11 and later.
</A></H2>

    June&nbsp;18, 2015:
    <P>

    Introduce new scratch variables in <A HREF="GCTP.html">gctp.f</A>
    so that <CODE>INTENT</CODE> works correctly for Intel
    <VAR>ifort</VAR> version 11 and later.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may052015">
    More <VAR>gfortran</VAR> hacks; <CODE>SINUGRD3</CODE>
               map projection
</A></H2>

    May&nbsp;5, 2015:
    <P>
    Recent <VAR>gfortran</VAR> wasn't allowing certain
    <CODE>USE&nbsp;M3UTILIO</CODE> statements internally.  Hacked the
    source to get it to where it will still work.
    <P>

    <STRONG>Added new parameter  <CODE>SINUGRD3</CODE></STRONG> for
    Sinusoidal Equal Area map projection to  <VAR>PARMS3.EXT</VAR>
    for I/O&nbsp;API versions 3.1 and 3.2.,
    together with support for it in I/O&nbsp;API-3.2  <CODE>MODULE&nbsp;MODGCTP</CODE>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar022015">
    New routine RUNSPEC()
</A></H2>

    March&nbsp;2, 2015:<BR>
    March&nbsp;4, 2015:
    <P>
    <A HREF="RUNSPEC.html"><CODE>SUBROUTINE&nbsp;RUNSPEC(
    FNAME,&nbsp;USEENV,&nbsp;SDATE,&nbsp;STIME,&nbsp;TSTEP,&nbsp;NRECS&nbsp;)</CODE></A>
    returns a time step sequence compatible with use of <CODE>FNAME</CODE>
    as an input file:
    <BLOCKQUOTE>
    If <CODE>FNAME</CODE> is blank, default <CODE>SDATE:STIME</CODE> are
    from the wall-clock, and default <CODE>TSTEP</CODE> is 1 hour.
    <P>
    If <CODE>FNAME</CODE> is time independent, return <CODE>SDATE=STIME=TSTEP=0,
    NRECS=1</CODE>.
    <P>
    Else if  <CODE>USEENV</CODE>, get <CODE>SDATE, STIME, TSTEP, EDATE,
    ETIME</CODE> from the environment and use them to calculate NRECS.
    <P>
    Else prompt the user for <CODE>SDATE, STIME, TSTEP,
    EDATE, ETIME</CODE> and use them to calculate NRECS.
    </BLOCKQUOTE>
    <P>

    <STRONG>Added March&nbsp;4, 2015:</STRONG>  Abhishek Bhat, PhD, EPI,
    of Trinity Consultants, points out a <VAR>Makefile</VAR>-bug:  there
    needs to be a dependency line <VAR>runspec.o:&nbsp;m3utilio.mod</VAR>
    in the  <VAR>Makefile</VAR>, similar to the already-present
    <VAR>matxatts.o:&nbsp;m3utilio.mod</VAR> dependency line.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb232015">
    Standards-violation fixes in <VAR>getyn(), getstr(), getreal(),
    getnum(), getmenu(), getdble(), promptmfile(), promptffile(),
    year4(), skipl()</VAR>
</A></H2>

    Feb&nbsp;23, 2015:
    <P>
    The Models-3 coding standards state:
    <OL>
        <LI> You <STRONG>will check status of systems-calls</STRONG>
             and other calls that may fail (e.g., netCDF and MPI calls)
             and return success/failure status; and
        <LI> You <STRONG>will write meaningful log messages</STRONG>
             adequate to locate and diagnose the error for the above,
             in cases of failures.
    </OL>
    In <STRONG>all</STRONG> of the above I/O&nbsp;API routines,
    Marc&nbsp;Houyoux had written code which was in violation of those
    coding standards.
    <P>
    Now corrected.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "ver32">
    I/O&nbsp;API Version 3.2-<VAR>beta</VAR>
</A></H2>

    January 9, 2015 <EM>et seq</EM>:
    <P>
    Version&nbsp;3.2 of the I/O&nbsp;API library code is
    <A HREF = "https://www.cmascenter.org/ioapi/download/ioapi-3.2.tar.gz">available
    here for download</A> in <VAR>gzip</VAR>ped-<VAR>tar</VAR> source
    code form from the CMAS Center web-site, or is available on GitHub
    from
    <A HREF="https://github.com/cjcoats/ioapi-3.2"><VAR>&lt;https://github.com/cjcoats/ioapi-3.2&gt;</VAR></A>.
    To install a distribution-copy from GitHub, go to the directory under
    which do the installation, and then do the command
    <PRE>
    git clone https://github.com/cjcoats/ioapi-3.2
    </PRE>

    Note that some minor changes in calling code are required (mostly in
    <CODE>USE</CODE> statements, generally because of new
    <CODE>INTERFACE</CODE>s, or interfaces that moved from
    <CODE>MODULE&nbsp;M3UTILIO</CODE> to new
    <CODE>MODULE&nbsp;MODGCTP</CODE> or from version 3.1 and earlier
    <CODE>MODULE&nbsp;MATXATTS</CODE> to  Version 3.2
    <CODE>MODULE&nbsp;MODATTS3</CODE>.
    <P>
    <UL>
        <LI>  New &quot;bounded&quot; <A HREF="ENVGETS.html">environment-value
              routines</A> <CODE>BENVINT(), BENVDBLE(), BENVREAL()</CODE>,
              with three <CODE>MINVAL, MAXVAL, DEFAULT</CODE> arguments
              corresponding to the simple <CODE>DEFAULT</CODE> argument
              of <CODE>ENVINT(), ENVDBLE(), ENVREAL()</CODE>
        <LI>  New generic <CODE>INTERFACE</CODE>s in
              <A HREF="M3UTILIO.html"><CODE>MODULE&nbsp;M3UTILIO</CODE></A>:
              <UL>
                  <LI>  <A HREF="BMATVEC.html"><CODE>BILIN()</CODE></A>:
                        bilinear interpolation using matrix from
                        <CODE>UNGRIDB()</CODE>, forms for 1-D/2D/3D
                        input and output data arrays.
                  <LI>  <A HREF="BMATVEC.html"><CODE>BMATVEC()</CODE></A>:
                        vertical-transpose and bilinear interpolation
                        using matrix from <CODE>UNGRIDB()</CODE>, forms
                        for 1-D/2D-horizontal input and output data
                        arrays.
                  <LI>  <A HREF="ENVGETS.html"><CODE>ENVGET()</CODE></A>
                        generic get-environment-variable routine
                        encapsulating <CODE>BENVINT(), BENVDBLE(),
                        BENVREAL(),ENVINT(), ENVDBLE(), ENVREAL(), ENVYN() </CODE>
                  <LI>  <A HREF="UNGRIDB.html"><CODE>UNGRIDB()</CODE></A>
                  <LI>  <A HREF="PMATVEC.html"><CODE>PMATVEC()</CODE></A>
                        Apply incidence matrices from <CODE>UNGRIDB()</CODE>,
                        forms for 1-D and 2-D input and output data arrays.
                  <LI>  <A HREF="UNGRIDB.html"><CODE>UNGRIDB()</CODE></A>
                        Compute &quot;ungridding&quot;
                        bilinear-interpolation matrices, for 1-D and 2-D
                        arrays of interpolation-points. matrices for
                        <CODE>BILIN()</CODE> and <CODE>BMATVEC()</CODE>
                  <LI>  <A HREF="UNGRIDB.html"><CODE>UNGRIDI()</CODE></A>
                        Compute &quot;ungridding&quot; incidence
                        matrices, for 1-D and 2-D arrays of
                        interpolation-points. matrices for
                        <CODE>PMATVEC()</CODE>
              </UL>
              <P>
        <LI>  Many <VAR>ioapi</VAR> routines and <VAR>m3tools</VAR> programs
              are now OpenMP parallel.
              <P>
        <LI>  <A HREF="http://cfconventions.org/">CF-compliant
              geosapatial metadata</A> <VAR>ioapi</VAR> file-creation
              option, turned on by environment variable
              <CODE>IOAPI_CFMETA</CODE>:<BR>
              <BLOCKQUOTE>
              <VAR>setenv IOAPI_CFMETA Y</VAR>
              </BLOCKQUOTE>
              <P>
        <LI>  New <A HREF="MODGCTP.html"><CODE>MODULE&nbsp;MODGCTP</CODE></A>
              with all the coordinate-transform related routines and
              <CODE>INTERFACE</CODE>s:<BR>
              <EM>Old but modified:</EM> (moved from <CODE>MODULE&nbsp;M3UTILIO</CODE>)
              <UL>
                  <LI>  <CODE>INTERFACE</CODE> for
                        <A HREF="GCTP.html"><CODE>GTPZ0()</CODE></A>
                  <LI>  <CODE>INTERFACE</CODE>s and new implementations for
                        <CODE>GTPZ0()</CODE>-spheroid initialization procedures
                        <A HREF="SETSPHERE.html"><CODE>SETSPHERE(), INITSPHERES(),
                        SPHEREDAT()</CODE></A>
                  <LI>  <CODE>INTERFACE</CODE>s and new implementations for
                        single-precision/single-point/specific-projection
                        coordinate-transform functions
                        <A HREF="LAMBERT.html"><CODE>INITPROJ(), ...,
                        LAMBERT(), ..., ALB2EQM()</CODE></A>
                        <P>
              </UL>
              <EM>New:</EM>
              <UL>
                  <LI>  <CODE>PARAMETER</CODE>s <CODE>STDSPHERES(0:21)</CODE>
                        and <CODE>SPHERENAMES(0:21)</CODE> for GCTP spheroid
                        names and indices;
                  <LI>  <CODE>GTPZ0()</CODE>-argument initialization procedure
                        <A HREF="M3TOGTPZ.html"><CODE>M3TOGTPZ()</CODE></A>
                  <LI>  Scattered-point-array generic coordinate-transform
                        procedure <A HREF="XY2XY.html"><CODE>XY2XY()</CODE></A>
                  <LI>  Grid-node-array generic coordinate-transform
                        procedure <A HREF="GRID2XY.html"><CODE>GRID2XY()</CODE></A>
                  <LI>  High-performance OpenMP-Parallel generic bilinear
                        interpolation package
                        <A HREF="GRID2INDX.html"><CODE>GRID2INDX(), PNTS2INDX(),
                        INDXMULT()</CODE></A>
              </UL>
              <P>
        <LI>  New <A HREF="MODATTS3.html"><CODE>MODULE&nbsp;MODATTS3</CODE></A>
              replaces <CODE>MODULE&nbsp;MATXATTS</CODE> (so that all
              <CODE>USE&nbsp;MATXATTS</CODE> statements need to become
              <CODE>USE&nbsp;MODATTS3</CODE> in your codes):
              <UL>
                  <LI> Matrix-attribute routines (add extra <VAR>netCDF</VAR>
                       file attributes to describe input and output grids
                       for matrix-files):
                       <UL>
                           <LI>  <CODE>INITMTXATT()</CODE>
                           <LI>  <CODE>GETMTXATT()</CODE>
                           <LI>  <CODE>SETMTXATT()</CODE>
                           <LI>  <CODE>CHKMTXATT()</CODE>
                           <LI>  <CODE>ENDMTXATT()</CODE>
                       </UL>
                  <LI> <A HREF="http://cfconventions.org/">CF-convention</A>
                       geospatial-metadata routines make newly-created
                       files CF compliant (hopefully, subject to further
                       testing...):
                       <UL>
                           <LI>  <CODE>INITCF()</CODE>
                           <LI>  <CODE>SETCF()</CODE>
                           <LI>  <CODE>ENDCF()</CODE>
                       </UL>
                  <LI> Place-holders for &quot;standard&quot; CMAQ and
                       SMOKE metadata routines (what this metadata
                       contains needs to be determined...), turned on
                       by environment variables <CODE>IOAPI_CMAQMETA,
                       IOAPI_SMOKEMETA</CODE>:<BR>
                       <BLOCKQUOTE>
                        <VAR>setenv IOAPI_CMAQMETA &lt;path&gt; or
                        <CODE>NONE</CODE></VAR><BR>
                        <VAR>setenv IOAPI_SMOKEMETA &lt;path&gt; or
                        <CODE>NONE</CODE></VAR>
                       </BLOCKQUOTE>
                       <UL>
                           <LI>  <CODE>INITCMAQ()</CODE>
                           <LI>  <CODE>GETCMAQ()</CODE>
                           <LI>  <CODE>LOGCMAQ()</CODE>
                           <LI>  <CODE>SETCMAQ()</CODE>
                           <LI>  <CODE>ENDCMAQ()</CODE>
                           <LI>  <CODE>INITSMOKE()</CODE>
                           <LI>  <CODE>GETSMOKE()</CODE>
                           <LI>  <CODE>LOGSMOKE()</CODE>
                           <LI>  <CODE>SETSMOKE()</CODE>
                           <LI>  <CODE>ENDSMOKE()</CODE>
                       </UL>
              </UL>
              <P>
        <LI>  Updates to <VAR>m3tools</VAR> programs:
              <UL>
                  <LI> New programs:
                       <UL>
                           <LI>  <A HREF="DAYAGG.html"><VAR>dayagg</VAR></A>,
                           <LI>  <A HREF="M3PROBE.html"><VAR>m3probe</VAR></A>,
                           <LI>  <A HREF="M3TOTXT.html"><VAR>m3totxt</VAR></A>, and
                           <LI>  <A HREF="VERTINTEGRAL.html"><VAR>vertintegral</VAR></A>.
                       </UL>
                  <LI> These programs now <CODE>USE&nbsp;MODATTS3</CODE> for matrix-file attributes:
                       <UL>
                           <LI>  <VAR>mtxbuild</VAR>
                           <LI>  <VAR>mtxcalc</VAR>
                           <LI>  <VAR>mtxcple</VAR>
                       </UL>
                  <LI> These programs <CODE>USE&nbsp;MODGCTP</CODE> for geospatial transforms
                        and interpolation:
                       <UL>
                           <LI>  <VAR>latlon</VAR>
                           <LI>  <VAR>m3cple</VAR>
                           <LI>  <VAR>m3interp</VAR>
                           <LI>  <VAR>mtxcalc</VAR>
                           <LI>  <VAR>projtool</VAR>
                       </UL>
                  <LI> These programs are now OpenMP parallel:
                       <UL>
                           <LI>  <VAR>bcwndw</VAR>
                           <LI>  <VAR>dayagg</VAR>
                           <LI>  <VAR>m3agmask</VAR>
                           <LI>  <VAR>m3agmax</VAR>
                           <LI>  <VAR>m3combo</VAR>
                           <LI>  <VAR>m3cple</VAR>
                           <LI>  <VAR>m3interp</VAR>
                           <LI>  <VAR>m3tproc</VAR>
                           <LI>  <VAR>mtxcalc</VAR>
                           <LI>  <VAR>mtxcple</VAR>
                           <LI>  <VAR>presz</VAR>
                           <LI>  <VAR>vertimeproc</VAR>
                           <LI>  <VAR>vertintegral</VAR>
                           <LI>  <VAR>vertot</VAR>
                       </UL>
                  <LI>  Many source files have been converted to Fortran-90
                        &quot;free&quot; source format.
                  <LI>  Rather than using a fail-immediately error
                        management strategy, make a best-effort
                        attempt at fulfilling the run-specifications, while
                        logging errors as they occur and keeping track of final
                        error-status.
                  <LI>  Program <VAR>mtxcalc</VAR> adds option for
                        output-scaling/units-conversion (e.g.,
                        Kg-to-Ton) via new environment variable
                        <CODE>SCALEFAC</CODE>.
                  <LI>  Program <VAR>presz</VAR> adds environment-variable
                        configuration option for its MM5-reference
                        atmosphere, and now also outputs reference
                        temperature <CODE>TA</CODE> (<VAR>K</VAR>)
              </UL>
              <P>
        <LI>  Updated and error-checked documentation (including docs
              for all the &quot;new stuff&quot; above).
              <P>
        <LI>  All codes and HTML pages have Subversion IDs in their header
              comments.<BR>
              Use <VAR>ident</VAR> to see these IDs in object
              (<VAR>.o</VAR>), library (<VAR>.a</VAR>) and executable
              files.
              <P>
        <LI>  Default <VAR>Makefile</VAR> now builds for  <VAR>nocpl</VAR>.
              <P>
    </UL>
    <P>

<H3><U>To-Do List:</U></H3>

    <UL>
        <LI> Define standard <VAR>CMAQ</VAR> and <VAR>SMOKE</VAR>
             metadata and finish the relevant routines in
             <A HREF="MODATTS3.html"><CODE>MODULE&nbsp;MODATTS3</CODE></A>
             accordingly.
             <P>
        <LI> Do overloaded <CODE>LL2LAM()</CODE> routines, to support
             both single-precision and double-precision operation?
             <P>
        <LI> Python and Java APIs?
             <P>
        <LI> <A HREF="oct302015">Parallel I/O for CMAQ-5.1</A> (now in
             place)
             <P>
        <LI> Tension-spline interpolation module and tools-programs?
             <P>
        <LI> <VAR>m3tools</VAR> development&mdash;standardized,
             overflow-proof interfaces, free-format F90,
             OpenMP-parallel where reasonable?
             <P>
        <LI> <VAR>Tutorial</VAR> development?&nbsp;&mdash;new stuff, best
             practices...
             <P>
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan222015">
    Bug-Fixes in <VAR>m3tools/projtool</VAR>
</A></H2>

    Jan&nbsp;15, 2015:<BR>
    Jan&nbsp;22, 2015:
    <P>
    Bug-fixes in <A HREF="PROJTOOL.html"><VAR>m3tools</VAR> program
    <VAR>projtool</VAR></A>:
    <UL>
        <LI> error in spheroid-management found by John N. McHenry, BAMS.
        <LI> Errors found by Bhupesh Adhikary, International Centre for
             Integrated Mountain Development, Kathmandu, Khumaltar, Lalitpur, Nepal
    </UL>
    <P>
    Now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec192014">
    Bug-Fix in <VAR>m3tools/projtool</VAR>
</A></H2>

    Dec&nbsp;19, 2014:
    <P>
    Bug-fix in <A HREF="PROJTOOL.html"><VAR>m3tools</VAR> program
    <VAR>projtool</VAR></A>:  for grid-corner calculations, the
    NW and SE corners were labelled backwards.  Now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug2814">
    Enhanced <VAR>m3tools/m3diff</VAR>
</A></H2>

    August&nbsp;28, 2014:
    <P>
    New version of <A HREF="M3DIFF.html"><VAR>m3tools</VAR> program
    <VAR>m3diff</VAR></A> now supports dimensions having up to 9 digits,
    with variable-format spacing as needed.  This will be useful for
    comparing SMOKE vector-files (which use degenerate grids with
    <CODE>NCOLS=NLAYS=1</CODE> and <CODE>NROWS=&lt;number of
    sources&gt;</CODE>) that have large (&gt;99,999) numbers of sources.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug1414">
    Bug-fix in <VAR>m3tools/projtool</VAR>:  defining projections by angles.
</A></H2>

    August&nbsp;14, 2014:
    <P>
    John McHenry, BAMS, found a bug in the algorithm that
    <A HREF="PROJTOOL.html"><VAR>m3tools</VAR> program
    <VAR>projtool</VAR></A> uses to define input and output map
    projections by angles.  Now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug0614">
    <CODE>INTEGER(8)</CODE>-key search and sort routines.
</A></H2>

    August&nbsp;6, 2014:
    <P>
    New <CODE>INTEGER*8</CODE>-keytuple search and sort routines
    <A HREF="FINDS.html"><CODE>FINDL1(), FINDL2(), FINDL3(), FINDL4()</CODE></A>,
    <A HREF="LOCATS.html"><CODE>LOCATL1(), LOCATL2(), LOCATL3(), LOCATL4()</CODE></A>,
    and
    <A HREF="SORTI.html"><CODE>SORTL1(), SORTL2(), SORTL3(), SORTL4()</CODE>
    and their C counterparts <CODE>qsortl1(), qsortl2(), qsortl3(), and
    qsortl4()</CODE></A> were added, together with the inclusion of
    these routines into generic <CODE>INTERFACE</CODE>s <CODE>FINDKEY(),
    LOCATE(), and SORTI()</CODE> in <A HREF="M3UTILIO.html"><CODE>MODULE
    M3UTILIO</CODE></A>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul0914">
    Bugfix in <VAR>m3tools</VAR> program  <VAR>m3diff</VAR>
</A></H2>

    July&nbsp;9, 2014:
    <P>
    Mohammad Omary, UNC IE, turned up a bug in using <VAR>m3tools</VAR> program
    <VAR>m3diff</VAR> on files with distinct time step sequences (e.g.
    comparing file A for July 2009 with File B for August 2014.  This is
    fixed in the new version.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->


<H2> <A NAME = "jun1214">
    Additional <CODE>SORTI*C*</CODE> routines
</A></H2>

    June&nbsp;12, 2014:
    <P>
    There are now the following additional sort-by-string-table
    routines, covered by the <CODE>MODULE M3UTILIO SORTI()</CODE>
    generic interface:
    <DL>
        <DT><CODE>SORTINC4( N, M, INDX(N), CTABLE(N) )</CODE>
        <DD>arguments <CODE>INTEGER N, M, INDX(N); CHARACTER(*) CTABLE(N)</CODE><BR>
        Indirect-sort by <CODE>CTABLE</CODE>, assuming that only the
        first <CODE>M</CODE> characters in each table-entry
        are significant.
        <P>
        <DT><CODE>SORTINC8( N8, M8, INDX8(N8), CTABLE(N8) )</CODE>
        <DD>arguments <CODE>INTEGER(8) N8, M8, INDX8(N8); CHARACTER(*)
        CTABLE(N8)</CODE><BR>
        Indirect-sort by CTABLE, assuming that only the
        first <CODE>M8</CODE> characters in each table-entry
        are significant.
        <P>
    </DL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar1914">
    Generic <CODE>INTERFACE</CODE>s in <CODE>MODULE M3UTILIO</CODE>
</A></H2>

    March&nbsp;19, 2014:
    <P>
    Environment-buffer maximum size expanded to 64K-1 (=65535) for
    environment-variable routines <CODE>ENVLIST,ENVDBLE, ENVINT,
    ENVREAL, ENVSTR, ENVYN, INTLIST,  REALIST, STRLIST</CODE>
    <P>
    <CODE>MODULE M3UTILIO</CODE> now has generic interfaces
    for the following:
    <DL>
        <DT><CODE>ENVLIST</CODE>
        <DD><CODE>INTLIST, REALIST, STRLIST</CODE>
        <P>
        <DT><CODE>FINDKEY</CODE>
        <DD><CODE>FINDC, FIND1, FIND2, FIND3, FIND4,
                  FINDR1, FINDR2, FINDR3, FINDR4</CODE>
        <P>
        <DT><CODE>LOCATE</CODE>
        <DD><CODE>LOCAT1, LOCAT2, LOCAT3, LOCAT4, LOCATC, LOCATR1,
                  LOCATR2, LOCATR3, LOCATR4</CODE>
        <P>
        <DT><CODE>SORTI</CODE>
        <DD><CODE>SORTIC4, SORTIC8,
                  SORTI1, SORTI2, SORTI3, SORTI4,
                  SORTR1,SORTR2, SORTR3, SORTR4</CODE>
        <P>
    </DL>
    <P>
    New <VAR>m3tools</VAR> programs designed to aid scripting,
    driven by command-line date and time arguments:
    <UL>
        <LI> <A HREF = "GREG2JUL.html" ><VAR>greg2jul</VAR></A>:
        convert Gregorian dates to Julian <CODE>YYYYDDD</CODE> form
        <LI> <A HREF = "JUL2GREG.html" ><VAR>jul2greg</VAR></A>:
       convert Julian dates to Gregorian <CODE>YYYYMMDD</CODE> form
        <LI> <A HREF = "JULDIFF.html"  ><VAR>juldiff</VAR></A>:
        Number of days between two Julian dates
        <LI> <A HREF = "JULSHIFT.html" ><VAR>julshift</VAR></A>:
        Add/subtract number of days from a Julian date
        <LI> <A HREF = "TIMESHIFT.html"><VAR>timeshift</VAR></A>:
        Add/subtract time <CODE>HHMMSS</CODE> to a Julian
        date-and-time <CODE>YYYYDDD.HHMMSS</CODE>.
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan1714">
    Bugfix in <VAR>m3tools</VAR> program  <VAR>m3merge</VAR>
</A></H2>

    January&nbsp;17, 2014:
    <P>
    John N. McHenry, BAMS, turned up a bug in using <VAR>m3tools</VAR> program
    <VAR>m3merge</VAR> on time independent files.  This is fixed in
    the new version.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec1813">
    Changes to deal with  <VAR>gfortran</VAR>  standards-incompatibilities.
</A></H2>

    December&nbsp;18, 2013:
    <P>
    Recent versions of  <VAR>gfortran</VAR> insist on breaking compatibility
    with all other compilers we use, not accepting command-line-argument
    routines <CODE>IARGC()</CODE> and <CODE>GETARG()</CODE> (which are an
    industry standard Fortran extension), and accepting only Fortran-2003
    routines <CODE>GET_COMMAND_ARGUMENT()</CODE> and <CODE>GETARG()</CODE>.
    <P>
    This version conditionally implements <CODE>IARGC()</CODE> and
    <CODE>GETARG()</CODE>  in <VAR>init3.F</VAR>, depending upon
    preprocessor-definition  <CODE>-DNEED_ARGS=1</CODE> which is now set
    in
    <VAR>Makeinclude.Linux2_x86</VAR>,
    <VAR>Makeinclude.Linux2_x86gfort</VAR>,
    <VAR>Makeinclude.Linux2_x86_64</VAR>, and
    <VAR>Makeinclude.Linux2_x86_64gfort</VAR>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov2113">
    OpenMP parallel for programs <CODE>M3AGMASK, M3AGMAX, M3COMBO, M3TPROC</CODE>
</A></H2>

    November&nbsp;21, 2013:
    <P>
    In addition to the previously OpenMP parallel program
    <CODE>VERINTEGRAL</CODE>, programs <CODE>M3AGMASK, M3AGMAX, M3COMBO,
    M3TPROC</CODE> are now OpenMP parallel.
    <P>
    Environment variable <STRONG>OMP_NUM_THREADS</STRONG> controls how
    many parallel threads/processors are used for program execution.
    Note that for the most part, these programs do a <EM>lot</EM> of
    I/O, so that running with two threads may help performance,
    especially for large grids, but <STRONG>OMP_NUM_THREADS&nbsp;&gt;&nbsp;2</STRONG>
    has severely diminishing returns for these particular programs.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov0513">
    New <CODE>SUBROUTINE LASTTIME()</CODE> and its use for applications
    in <VAR>m3tools</VAR>; larger environment-buffer size
</A></H2>

    November&nbsp;5, 2013:
    <P>
    New routine <A HREF="LASTTIME.html"><CODE>LASTTIME(SDATE,STIME,TSTEP,NSTEPS,EDATE,ETIME)</CODE></A>
    returns the ending date&amp;time for time step sequence
    <CODE>SDATE:STIME:TSTEP:NSTEPS</CODE>.  Safe for very long
    time step sequences (even multi-century!).  Now used in new
    versions of <VAR>m3tools</VAR> programs <VAR>m3combo</VAR>,
    <VAR>m3cple</VAR>, <VAR>m3interp</VAR>, <VAR>m3tproc</VAR>,
    <VAR>mtxblend</VAR>, and  <VAR>mtxcple</VAR>.
    <P>
    Internal environment buffer in subroutines <CODE>SETENVVAR()</CODE>,
    <CODE>ENVYN()</CODE>, <CODE>ENVINT()</CODE>, <CODE>ENVREAL()</CODE>,
    <CODE>ENVDBLE()</CODE>, <CODE>INTLIST()</CODE>, <CODE>STRLIST()</CODE>,
    and <CODE>REALIST()</CODE>,  expanded from 512 bytes to 64K bytes, to
    support larger environments as necessary.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec1312">
   Bug-fix for <VAR>m3tools/m3combo</VAR> from Bonyoung Koo, Environ.
</A></H2>

    December&nbsp;13, 2012:
    <P>
    Bonyoung Koo, Environ, found a set of bugs in
    <VAR>m3tools/m3combo</VAR>  associated with the use of this tool
    for <CODE>CUSTOM</CODE> and  <CODE>BOUNDARY</CODE> files.  This bug
    is now fixed in both I/O&nbsp;API versions 3.0 and 3.1.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov1512">
   Bug-fix for <VAR>m3tools/m3xtract</VAR> and <VAR>m3tools/vertintegral</VAR>.
</A></H2>

    November&nbsp;15, 2012:
    <P>
    Sarika Kulkarni, California ARB, found bugs in programs
    <VAR>m3tools/m3xtract</VAR> and <VAR>m3tools/vertintegral</VAR>
    and provided fixes for them.  The <VAR>m3tools/vertintegral</VAR>
    bug is present only in Version&nbsp;3.1 of the I/O&nbsp;API.
    These fixes are now in the distribution.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct3012">
   Enhancement and bug-fix for <CODE>m3tools/projtool</CODE>.
</A></H2>

    October&nbsp;30, 2012:
    <P>
    For operation-cases 10, 11 (display input-grid corners or centers relative to
    output coordinate system, there was a bug:  the NW corner was calculated
    but not reported to the user.
    <P>
    Additional operation 12:  report output-grid column and row for
    input-projection location <VAR>&lt;X,y&gt;</VAR>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct0212">
   Bug-fix for <CODE>INQATT3()</CODE>.
</A></H2>

    October&nbsp;2, 2012:
    <P>
    Title says it... This was a long standing bug, which (I guess)
    shows how no one is using extra M3IO attributes ;-(
    <P>


    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep1812">
   Bug-fix from Sarika Kulkarni, CA ARB, in
               <VAR>m3xtract</VAR>; new address info
               for <CODE>m3tools</CODE> programs.
</A></H2>

    September&nbsp;18, 2012:
    <P>
    Sarika Kulkarni, CA ARB, provided a bug-fix to the I/O&nbsp;API
    Version&nbsp;3.1 <VAR>m3xtract</VAR>; this is now incorporated
    into the release.
    <P>
    The primary I/O&nbsp;API author, Carlie Coats, has performed
    &quot;musical offices&quot; again, and is now at
        <BLOCKQUOTE>
        Carlie J. Coats, Jr. , Ph.D.    carlie@jyarborough.com<BR>
        UNC Institute for the Environment<BR>
        137 E. Franklin St. Suite 602 Room 613-C / Campus Box 1105<BR>
        Chapel Hill, NC 27599-1105<BR>
        </BLOCKQUOTE>
    This new address is now incorporated into <CODE>m3tools</CODE>
    splash screens, replacing the older one(s).
    <P>


    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct2611">
   <VAR>relocation error</VAR> link issues for <VAR>x86_64</VAR>, and
   new <STRONG><CODE>BIN=Linux2_x86_64ifort_medium</CODE></STRONG>
</A></H2>

    October&nbsp;26, 2011:
    <P>
    There are issues with huge arrays and COMMON blocks on
    <VAR>x86_64</VAR> Linux (and other) platforms; these show up at link
    time with error messages talking about <CODE>relocation&nbsp;error</CODE>s.
    New <CODE>BIN=Linux2_x86_64ifort_medium</CODE> is designed to deal
    with these situations; see <A HREF="ERRORS.html#reloc">this note</A>
    for details.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct2111">
   Version&nbsp;3.1 <VAR>m3tools/Makefile</VAR>s now assume netCDF Version&gt;4.1
   Library Changes
</A></H2>

    October&nbsp;21, 2011:
    <P>
    <BLOCKQUOTE>
    Starting with netCDF Version&nbsp;4.1, linking with netCDF now requires
    additional libraries.  As of today's downloads, I/O&nbsp;API Version&nbsp;3.1
    <VAR>m3tools/Makefile</VAR>s now assume at least the minimal set.
    See <A HREF="AVAIL.html#ncf4">this note about netCDF.</A>
    <P>
    <STRONG>Note that this incompatibility from netCDF will also
    <EM>affect all other model-builds</EM> using netCDF Version&nbsp;4.1
    or later.</STRONG>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug3111">
   Bug-fix in <VAR>m3tools</VAR> program <CODE>VERTINTEGRAL</CODE>
</A></H2>

    August&nbsp;31, 2011:
    <P>
    <BLOCKQUOTE>
    Rajesh J  points out a problem with OpenMP directives in
    <VAR>m3tools</VAR> program <CODE><A
    HREF="VERTINTEGRAL.html">VERTINTEGRAL</A></CODE>.  Now fixed in both
    the Version&nbsp;3.0 and 3.1 tarballs.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug2911">
   Bug-fixes in <CODE>SUBROUTINE CURREC()</CODE>
</A></H2>

    August&nbsp;29, 2011:
    <P>
    <BLOCKQUOTE>
    Rajesh J  points out a problem with the Version&nbsp;3.0 <VAR>currec.F</VAR>
    (extraneous lines beginning with <CODE>#</CODE>, possibly inserted by the
    version control system).  On comparison with the Version&nbsp;3.1
    code, it turns out that a bug-fix suggested by Christian Hogrefe
    was dropped from this version.  Both are now fixed.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun0811">
   Fixes from Christian Hogrefe</A> in programs <CODE>JULDATE</CODE> and
   <CODE>M3XTRACT</CODE>
</H2>

    June&nbsp;8, 2011:
    <P>
    <BLOCKQUOTE>
    Christian Hogrefe points out that <VAR>gfortran</VAR> regards
    <CODE>IARGC()</CODE> as a Fortran <CODE>INTRINSIC</CODE>
    rather than as an <CODE>EXTERNAL</CODE>, and
    <CODE><A HREF="JULDATE.html">PROGRAM JULDATE</A></CODE>
    needs to be modified accordingly
    <P>

    He also found a bug in <CODE><A HREF="M3XTRACT.html">PROGRAM M3XTRACT</A></CODE>
    and provided a fix.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2>
    <A NAME = "may2611">Bug-fix for file type <CODE>CUSTOM3</CODE></A>
    in <CODE><A HREF="M3STAT.html">PROGRAM M3STAT</A></CODE>
</H2>

    May&nbsp;26, 2011:
    <P>
    <BLOCKQUOTE>
    There was a problem for single-variable analysis of multi-layer
    files of type  <CODE>CUSTOM3</CODE>, now fixed.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>




<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may0511">
Bug-fixes and format improvements in <VAR>m3tools</VAR> program <CODE>PROJTOOL</CODE>
</A></H2>

    May&nbsp;5, 2011:
    <P>
    <BLOCKQUOTE>
    There were menu-problems and format-readability problems, now fixed.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr2511">
Add interface-block for <CODE>CRLF()</CODE> to
<CODE>MODULE M3UTILIO</CODE>
</A></H2>

    April&nbsp;25, 2011:
    <P>
    <BLOCKQUOTE>
    At the request of US&nbsp;EPA, an interface block for routine
    <CODE>CRLF()</CODE> was added to
    <CODE><A HREF="M3UTILIO.html">MODULE M3UTILIO</A></CODE>
    for use in the upcoming version of CMAQ.  This may necessitate
    code changes for codes that already <CODE>USE&nbsp;M3UTILIO</CODE>
    and that use that routine (just delete the declaration and the
    <CODE>EXTERNAL</CODE> statement that accompanies it).
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr1911">
Code re-organization to support full strength <VAR>DESC3()</VAR>
for <CODE>BUFFERED</CODE> files
</A></H2>

    April&nbsp;19, 2011:
    <P>
    <BLOCKQUOTE>
    At the request of US&nbsp;EPA, full strength <VAR>DESC3()</VAR>
    for <CODE>BUFFERED</CODE> files was added, for use in the upcoming
    version of CMAQ.  To see whether the library is built on this
    code-version, <CODE>IF(.NOT.<A HREF="CHKBUF3.html">CHKBUF3()</A>)&nbsp;STOP </CODE>:
    you get a link-failure with previous editions of the library.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr1511">
Bug-fix in error-formats from Matthew Turner,
University of Colorado at Boulder.
</A></H2>

    April&nbsp;15, 2011:
    <P>
    <BLOCKQUOTE>
    Matthew Turner of UC-Boulder points out that error formats in functions
    <CODE>CKDESC3()</CODE> and <CODE>CKFILE3()</CODE> have too narrow a
    field for the variable-count which may occur.  This is now fixed in
    both Versions&nbsp;3.0 and 3.1.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug1010">
I/O&nbsp;API Version&nbsp;3.1:  64-bit record support;
<VAR>gfortran</VAR> support
</A></H2>

    August&nbsp;10, 2010:
    <P>
    <BLOCKQUOTE>
    Support is now optionally available for &quot;large&quot; time-step
    records (total timestep extent, including all variables, exceeds
    2GB). This I/O&nbsp;API requires netCDF version at least 3.6.  The
    option is controlled by a new environment variable:
    <CODE><BLOCKQUOTE>
    setenv IOAPI_OFFSET_64  &lt; YES | NO &gt; [NO]
    </BLOCKQUOTE></CODE>
    &quot;<CODE>YES</CODE>&quot; enables netCDF
    <CODE>NF_64BIT_OFFSET</CODE> mode for newly-created files.  The
    default for this environment variable is &quot;<CODE>NO</CODE>&quot;
    since few applications require more than 2GB of array space for a
    single timestep.  Note that applications compiled with pre-3.6
    versions of netCDF (e.g., downloaded <VAR>PAVE</VAR>) will not be
    able to open and access these large-record files.
    <P>

    For compile-types that use <VAR>gfortran</VAR> (<CODE>BIN=Linux2_x86_64</CODE>
    and <CODE>BIN=Linux2_x86_64</CODE>), there is a change to the
    <VAR>Makeinclude</VAR> files:  <VAR>make</VAR>-variable
    <CODE>OMPLIBS</CODE> is now <CODE>-lgomp</CODE>.  Notes:
    <UL>
        <LI>  If you're running pre-4.3  <VAR>gfortran</VAR>, the
              compiler's OpenMP support is flaky, and you should disable
              it in the I/O&nbsp;API by setting  <CODE>OMPFLAGS</CODE>
              and <CODE>OMPLIBS</CODE> to be empty.
        <LI>  You may well need to install extra packages in order for
              this library to be available.  I consider this fact to be
              defective package management, but on my desktop I had to
              install extra packages for <VAR>libgomp1</VAR> and
              <VAR>libgomp-devel</VAR>; just what you'll have to do is
              distribution/installation specific.
    </UL>
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "ver31">
I/O&nbsp;API Version&nbsp;3.1 <EM>Beta</EM>&nbsp;1
</A></H2>

    March&nbsp;15, 2010:
    <P>
    <BLOCKQUOTE>

    The first beta-release version of I/O&nbsp;API Version&nbsp;3.1 is
    now available.
    <P>
    <STRONG><EM>
    This is a &quot;Jubilee-Day&quot; release:
    </EM></STRONG>
    <DL>
        <DT> <STRONG>This version is source-code compatible with previous
             versions; however, you should not mix <CODE>INCLUDE</CODE>
             nor object files between the two versions.</STRONG>
        <DT> Because of data-structure-dimension changes, new and old
             versions are not link compatible.  You will
             need to re-build programs that use the I/O&nbsp;API.
             <P>
        <DT> Files written with previous versions should still
             be readable by programs built with the new version.
             <P>
        <DT> Files written by the new version may not be readable
             by programs compiled/linked with the old version, if either
             they take advantage of the increased <CODE>MXVARS3</CODE>
             or <A HREF="aug1010">large timestep-record</A> features.
    </DL>
    <P>
    Changes for Version&nbsp;3.1 are:
    <UL>
        <LI> Library and <VAR>m3tools</VAR> codes are now strictly
             Fortran-90 or later.
             <P>
        <LI> Hacks and Fortran-extensions used to manage dynamic arrays
             with Cray pointers have been removed, in favor of language
             standard <CODE>ALLOCATABLE</CODE> and dynamic arrays.
             <P>
        <LI> Dimension <CODE>MXVARS3</CODE> for maximum number of
             variables in an I/O&nbsp;API file is now 2048.
             <EM>Consequently, new files with more than the old limit of
             120 variables may not be readable by pre-3.1 I/O&nbsp;API
             programs.</EM>
             <P>
        <LI> Binary compile types (corresponding to environment variable
             <CODE>BIN</CODE> and compiler-option files
             <VAR>Makeinclude.${BIN}</VAR> have been changed:
             <UL>
                 <LI>  For Sun and SGI, compiler is <VAR>f90</VAR>
                       instead of <VAR>f77</VAR> (and the
                       <VAR>Makeinclude.*f90</VAR> have been
                       re-named/eliminated
                 <LI>  For Linux, <VAR>gfortran</VAR> similarly replaces
                       <VAR>g77</VAR>
                 <LI>  Support for Cray vector machines has been
                       dropped.
             </UL>
             Note that in both cases, the old Fortran-77 compilers never
             have been link-compatible with the newer Fortran-9x
             compilers.
             <P>
        <LI> Use of new <VAR>MODULE M3UTILIO</VAR> is encouraged, and
             use of <CODE>INCLUDE</CODE>-files  <CODE>PARMS3.EXT</CODE>,
             <CODE>FDESC3.EXT</CODE>, and <CODE>IODECL3.EXT</CODE> is
             deprecated.  This <VAR>MODULE</VAR> gives access to all the
             I/O&nbsp;API  <CODE>PARAMETER</CODE>s and declarations,
             including Fortran-90-style explicit interfaces for all the
             relevant routines.
             <P>
        <LI> For programs dealing with spatial transforms (e.g. by
             sparse matrices), new <VAR>MODULE MATXATTS</VAR> provides
             facilities for specifying the grid parameters for both the
             input and output grids for the matrix.
             <P>
        <LI> <CODE>INTENT</CODE> is specified for all subroutine and
             function arguments.
             <P>
        <LI> Function  <VAR>TRIMLEN()</VAR> is deprecated in favor of
             new Fortran-90 intrinsic routines  <VAR>LEN_TRIM()</VAR>,
             which has exactly the same meaning as <VAR>TRIMLEN()</VAR>),
             and <VAR>TRIM()</VAR>, which allows simplification of
             common character-string expressions from
             <CODE>FOO(1:TRIMLEN(FOO))</CODE> to <CODE>TRIM(FOO)</CODE>.
             <P>
        <LI>
             <P>
    </UL>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb1910">
Bug fix:  Transverse and Equatorial Mercator output projections in
<VAR>m3tools</VAR>program <VAR>MTXCALC</VAR>
</A></H2>

    February&nbsp;19, 2010:
    <P>
    <BLOCKQUOTE>

    Dr. Steve Yim, Department of Engineering, University of Cambridge,
    UK, discovered a bug in <A HREF="MTXCALC.html"><VAR>m3tools</VAR>
    program <VAR>mtxcalc</VAR></A> treatment of Transverse Mercator
    outpout projections.  Same bug was present for Equatorial Mercator
    output.
    <P>
    Now fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb0910">
Bug fix:  declaration of  <VAR>IOPARMS3()</VAR> in <CODE>iodecl3.h</CODE>
</A></H2>

    February&nbsp;9, 2010:
    <P>
    <BLOCKQUOTE>

    David Borlund, UNC, discovered a C-language link problem which
    traced down to a bad declaration of <VAR>IOPARMS3()</VAR> in
    C include-file <CODE>iodecl3.h</CODE>.
    <P>
    Now fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct2809">NetCDF flag-changes from Martin Otte, US EPA,
               for netCDF4 compatibility; bug fix in <VAR>m3tools</VAR> program
               <VAR>PROJTOOL</VAR>.
</A></H2>

    October&nbsp;28, 2009:
    <P>
    <BLOCKQUOTE>

    Martin Otte of US EPA reports that netCDF Version 4 expects somewhat
    different flags for file-opening and file-creation than previous
    versions:  in particular, for creating files the "open for write"
    flag which was required for netCDF v2 and optional for v3 must
    <EM>not</EM> be present for v4.  Similarly for the "no-clobber" flag
    for opening pre-existing files.
    <P>
    <VAR>m3tools</VAR> program <A HREF="PROJTOOL.html">PROJTOOL</A> had bad
    argument types to <A HREF="GETDBLE.html">GETDBLE()</A> in the
    UTM-coordinate case.  Now fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct2609">New program <VAR>VERTINTEGRAL</VAR> for computing
               CONC-file species vertical column totals; various fixes.
</A></H2>

    October&nbsp;26, 2009:
    <P>
    <BLOCKQUOTE>

    Frank Binkowski and Zac Adelman of the UNC Institute for the
    Environment, with help from Carlie Coats, BAMS, developed program
    <A HREF="VERTINTEGRAL.html"><VAR>VERTINTEGRAL</VAR></A> for computing
    vertical column totals of gas-phase chemistry and mass-mode aerosol
    species from CMAQ conc-files, writing the result to a one-layer
    gridded M3IO output file.  This program is OpenMP parallel, and is
    structured for efficiency on microprocessor based (shared memory
    parallel) systems.
    <P>
    Also there are a variety of minor enhancements to I/O&nbsp;API
    routines <VAR>STR2DBLE()</VAR>, <VAR>CHECK3()</VAR>, <VAR>INQATT3()</VAR>, and
    <VAR>READ3()</VAR>, a bug-fix to <VAR>CURREC()</VAR> affecting time
    periods longer than five years, and minor enhancements to various
    <VAR>m3tools</VAR> programs.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul0109">Bug-fixes in <VAR>MATXATTS()</VAR> and <VAR>M3CPLE</VAR>
</A></H2>

    July&nbsp;1, 2009:
    <P>
    <BLOCKQUOTE>

    Angel Rodrigues Lopezof <EM>rai.usc.es</EM> found a bug in program <VAR>M3CPLE</VAR>'s
    false-Easting/Northing treatment for UTM coordinates.
    <P>
    Also there was an attribute-type bug in routine  <VAR>MATXATTS()</VAR>
    <P>
    Both are now fixed.
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may1509">Bug-fix in function <VAR>STR2DBLE()</VAR>
</A></H2>

    May&nbsp;15, 2009:
    <P>
    <BLOCKQUOTE>

    B.H. Baek,  Ph.D., of the Institute for the Environment at
    UNC-CH found a bug in the internals of function
    <A HREF="STR2S.html"><VAR>STR2DBLE()</VAR></A>.
    Now fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr3009">Bug-fix in subroutine <VAR>INQATT3()</VAR>
</A></H2>

    April&nbsp;30, 2009:
    <P>
    <BLOCKQUOTE>

    Fixed an argument-list mismatch in a netCDF call inside
    <A HREF="INQATT3.html">subroutine <VAR>INQATT3()</VAR></A>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar0909">Bug-fix in <VAR>M3COMBO</VAR>
</A></H2>

    March&nbsp;9, 2009:
    <P>
    <BLOCKQUOTE>

    Dr. M. Talat Odman, of the School of Civil &amp; Environmental Engineering
    at Georgia Institute of Technology points out a bug in the
    consistency-checking code for <A HREF = "M3COMBO.html"><VAR>m3tools</VAR>
    program <VAR>M3COMBO</VAR></A>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb2409"><VAR>pgf90/gcc</VAR> issues
</A></H2>

    February&nbsp;24, 2009:
    <P>
    <BLOCKQUOTE>

    Current versions of the <VAR>gcc</VAR> compiler system have changed
    the Fortran name-mangling style, and I've changed the
    <VAR>Makeinclude.Linux*pg_gcc*</VAR> files to match.  The
    old-version flags are present but commented out in these files
    if you need the older behavior.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec2908"><VAR>Makefile</VAR> issues
</A></H2>

    December&nbsp;29, 2008:
    <P>
    <BLOCKQUOTE>

    Neil Davis (UNC) reported some further problems with the
    <VAR>Makefile</VAR>s, and then helped with diagnosing, fixing,
    and validation.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec2308">
New <VAR>MODULE MTXATTS</VAR>; <CODE>Makefile</CODE>s now default to
compiling with a <VAR>f90</VAR> compiler.
</A></H2>

    December&nbsp;23, 2008:
    <P>
    <BLOCKQUOTE>

    As pointed out by David Wong, the  <A NAME = "nov2808">Nov.&nbsp;28
    fix</A> to <CODE>m3tools</CODE> program <CODE>MTXCALC</CODE> brought in
    a new version from the experimental branch that uses new <VAR>MODULE
    MTXATTS</VAR>.  This caused <CODE>Makefile</CODE> problems.
    <P>

    <VAR>MODULE MTXATTS</VAR> is intended to allow much more complete
    integrity checking for programs that use grid/map
    transformation-matrix files.  It provides new routines for storing
    and retrieving the grid description parameters for both the  input
    and the output grid for the matrix stored in the file:
    <BLOCKQUOTE>
    <DL COMPACT>
        <DT> <VAR>SETMTXATT</VAR>
        <DD>  set or check input or output grid description attributes from
              arguments for matrix-files:  if file is NEW, set the attributes;
              else check them.
              <P>
        <DT> <VAR>GETMTXATT</VAR>
        <DD>  get input or output grid description attributes for existing
              matrix-files and return as arguments
              <P>
        <DT> <VAR>CHKMTXATT</VAR>
        <DD>  check input or output grid description attributes for
              existing matrix-files against attributes from the argument
              list
              <P>
    </DL>
    </BLOCKQUOTE>
    and new <CODE>PARAMETER</CODE>s <VAR>INGRD3</VAR> and
    <VAR>OUTGRD3</VAR> to discriminate between a matrix's input-grid
    and its output-grid in the above routines.
    <P>

    Correspondingly, the default <CODE>Makefile</CODE>s have been
    modified so that they always build the <VAR>MODULE</VAR>s
    <VAR>MTXATTS</VAR> and <VAR>M3UTILIO</VAR>  and include them in the
    library.  That means the default builds require a Fortran-90
    compliant compiler (which is needed for the most common
    I/O&nbsp;API clients, CMAQ, SMOKE, and MCIP, anyway).  For those
    requiring a FORTRAN-77-only build, the old <CODE>Makefile</CODE>s
    have been renamed with a <CODE>.f77only</CODE> suffix; just copy
    the required variant to <CODE>Makefile</CODE> and proceed as before.
    <P>

    <CODE>Makeinclude.${BIN}</CODE> files have <EM>not</EM> been
    changed for reasons of maintaining compatibility with existing
    directory-setups, etc.  This means, for example, you can expect
    problems with the default <CODE>Makefile</CODE>s and such
    machine/compiler types that assume a FORTRAN-77-only such
    as the <VAR>g77</VAR> assumed by <CODE>${BIN}=Linux2_x86</CODE>.
    <P>

    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov2808">Fix for WMO-screwup Longitude conventions
in programs <VAR>M3CPLE</VAR> and <VAR>MTXCALC</VAR>
</A></H2>

    November&nbsp;28, 2008:
    <P>
    <BLOCKQUOTE>

    It turns out that the WMO has invented a &quot;standard&quot; that
    conflicts with ISO Standard 6709 (and centuries of common usage), by
    which&mdash;according to WMO&mdash;longitudes should be always
    positive, and North America has longitude range something like +200
    to +300. We have encountered (obscure, hard-to-expect,
    hard-to-diagnose) problems dealing with data following these
    conventions, and have therefore implemented heuristics to deal with
    this in <CODE>m3tools</CODE> programs <CODE>M3CPLE</CODE>
    <CODE>MTXCALC</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul2908">Add support for new map projections in
<VAR>ckdesc3()</VAR>
</A></H2>

    July&nbsp;29, 2008:
    <P>
    <BLOCKQUOTE>

    Neil Davis (UNC) reports lack of support for map projection type
    <CODE>EQMGRD3</CODE> in <VAR>ckdesc3()</VAR>.  Iurns out that
    <CODE>TRMGRD3, ALBGRD3, LEQGRD3</CODE> weren't supported either,
    by oversight (many codes don't use this file-header-checker
    when creating new files...).
    <P>
    Now implemented, together with comments in <VAR>FDESC3.EXT</VAR>
    indicating the conventions for defining map projections of types
    <CODE>ALBGRD3, LEQGRD3</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul2108">Bug-Fix in <VAR>m3tools/Makefile.nocpl</VAR>
</A></H2>

    July&nbsp;29, 2008:
    <P>
    <BLOCKQUOTE>

    Neil Davis (UNC) reports a bug in <VAR>m3tools/Makefile.nocpl</VAR>,
    together with the required fix.  Now implemented.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul1008">Bug-Fixes for Albers
</A></H2>

    July&nbsp;10, 2008:
    <P>
    <BLOCKQUOTE>

    In <VAR>ALBERS()</VAR> and <VAR>LL2ALB()</VAR> in the experimental
    Albers Equal-Area Conic map projection support:  internal
    map-projection parameters were not being maintained correctly.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun1608">
   Experimental Albers Equal-Area Conic map projection support<BR>
   MM5 and WRF spheres added to <CODE>GCTP()</CODE> and
   <CODE>SETSPHERE()</CODE> by Steve Howard, NOAA/ASMD<BR>
   Bug-fix to <CODE>dayagg</CODE>, for a problem reported by
   Alexandros&nbsp;Syrakos.
</A></H2>

    June&nbsp;16, 2008:
    <P>

    <BLOCKQUOTE>
    <CODE>INCLUDE</CODE> files <CODE>PARMS3.EXT</CODE> and
    <CODE>parms3.h</CODE> have new token-values
    <BLOCKQUOTE>
    <DL COMPACT>
        <DT>  <VAR>ALBGRD3</VAR>
        <DD>  Albers Equal Area Conic map projection
        <DT>  <VAR>LEQGRD3</VAR>
        <DD>  Lambert Azimuthal Equal Areq map projection
    </DL>
    </BLOCKQUOTE>
    and beta-test partial Albers-projection support has been added
    to I/O&nbsp;API subroutine <VAR>LAMBERT</VAR>, in new entries
    <VAR>ALBERS(), SETALB(), ALB2LL()</VAR> and <VAR>LL2ALB()</VAR>,
    and to <VAR>m3tools</VAR> programs <VAR>LATLON</VAR>, <VAR>PROJTOOL</VAR>,
    <VAR>M3CPLE</VAR>, <VAR>MTXCALC</VAR>, and <VAR>M3FAKE</VAR>.
    <P>
    Steve&nbsp;Howard, NOAA Atmospheric Sciences Modeling Division,
    added two additional sphere-types to I/O&nbsp;API subroutines
    <CODE>GCTP()</CODE> and <CODE>SETSPHERE()</CODE>:
    <BLOCKQUOTE>
    <DL COMPACT>
        <DT>  <VAR>Type 20</VAR>
        <DD>  normal sphere with <CODE>R_Earth=6370000</CODE> meters,
              matching default MM5 and WRF-ARW.
        <DT>  <VAR>Type 21</VAR>
        <DD>  normal sphere with <CODE>R_Earth=6371200</CODE> meters,
              matching default WRF-NMM.
    </DL>
    </BLOCKQUOTE>
    There are consequent changes to <VAR>m3tools</VAR> program <VAR>M3CPLE</VAR>.
    <P>
    Alexandros Syrakos reported a bug in <VAR>m3tools</VAR> program
    <CODE>DAYAGG</CODE>:  output starting date should be
    <CODE>1000*(YEAR==0)+(DAY==1)&nbsp;=&nbsp;1 </CODE> (instead
    of 0), in order for repeated applications to work.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>




<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may0908">
   Bug-fix to <CODE>m3combo</CODE>, from Bonyoung Koo,
   ENVIRON International Corporation.
</A></H2>

    May&nbsp;9, 2008:
    <P>

    <BLOCKQUOTE>
    Bonyoung Koo reported a further bug in <CODE>m3combo</CODE>, that
    happens with relatively long variable-names (not found in my test
    case), and suggested exactly what the fix needed to be.  Thanks!
    <P>
    Also, minor fixes in <CODE>m3cple</CODE>:  default INSPHERE value,
    eliminate (invalid) resolution warning for Cartesian-to-Lat/lon
    coordinate transformations.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>




<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb1508">
   Multi-decade support; some Mac OS10 support; netCDF 3.6.2 warning.
</A></H2>

    February&nbsp;15, 2008:
    <P>

    <BLOCKQUOTE>
    Debra Baker of the University of Maryland has put in some extensive
    work figuring out how Mac OS-X (and generally Carnegie-Mellon
    <VAR>Mach</VAR>-descended) linker symbols work, resulting in a
    <VAR>gfortran</VAR> build for Macs; the new Makeinclude file is
    <CODE>Makeinclude.OSX_x86</CODE>.  Scott N. Spak of the Center
    for Sustainability and the Global Environment at the University
    of Wisconsin-Madison provides an Intel/Gnu <VAR>ifort/gcc</VAR>
    configuration which may now be found in
    <CODE>Makeinclude.OSX_x86_64ifort</CODE>.
    <P>

    Evidently, all of the compilers on Mach-based operating systems
    generate linker-symbols with prefixed underscores, unlike UNIX
    systems which take the C-language names verbatim (so that C
    <VAR>&quot;void foo&quot;</VAR> becomes linker symbol
    <VAR>&quot;_foo&quot;</VAR> instead of <VAR>&quot;foo&quot;</VAR>,
    for example.)  This is highly confusing to traditional Unix users
    of the <VAR>nm</VAR> linker-symbol utility;-(  Other Mac compilers
    should behave similarly to these two.  <EM>[Send me more working
    variations, and I will include them in the distribution and credit
    you for them...]</EM>
    <P>

    Debra also reports that when you build netCDF version 3.6.2 and
    higher, you should be careful <STRONG>not to use</STRONG> the
    <CODE>--enable-shared</CODE> flag, because it excludes Fortran
    symbols from the resulting <VAR>libnetcdf.a</VAR>.
    <P>

    Christian Hogrefe of the New York DEQ pointed out (and diagnosed!)
    problems with integer-overflow in the internal record-calculation
    routines which he found for multi-decade runs, and then
    participated in fixing and testing the improved versions, which
    should be OK (but maybe slow) for even multi-millenium runs.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec1907">
 Bug-fix in <VAR>ISDSTIME()</VAR>
</A></H2>

    December&nbsp;19, 2007:
    <P>

    <BLOCKQUOTE>
    Prakash Doraiswamy reports a bug in 2007-and-later start of
    daylight savings time.  Now fixed.
    <P>
    Also:  format-bug fix in <VAR>SYNC3()</VAR>; <CODE>Makeinclude</CODE>
    for binary type  <CODE>Linux2_x86path</CODE> (32-bit PathScale
    Fortran).
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov2907">
 Bug-fix in worker routine <VAR>chkfil3()</VAR>
</A></H2>

    November&nbsp;29, 2007:
    <P>

    <BLOCKQUOTE>
    A bug was introduced into  <VAR>CHKFIL()</VAR> to support
    same-set/different-order variables-lists (at someone's request;
    I don't recall who).  This is bogus.  Revert to reqiring variable
    lists have the same order.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov1507">
 <CODE>Makeinclude</CODE> improvements
</A></H2>

    November&nbsp;15, 2007:
    <P>

    <BLOCKQUOTE>
    Improvements to <CODE>Makeinclude</CODE> files for
    <VAR>Linux2_x86ifcdbg</VAR>, <VAR>Linux2_x86_64ifortdbg</VAR>,
    <VAR>Linux2_x86_64ifort</VAR>, <VAR>Linux2_ia64ifortdbg</VAR>,
    <VAR>Linux2_x86_64sun</VAR>, <VAR>Linux2_x86_64path</VAR>, to
    better support current compilers -- particularly Intel version 10.x.
    <P>
    Improved error-checking in <VAR>WRITE3()</VAR>,  <VAR>CHKFIL()</VAR>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>



<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may3007">
    Linux x86_64 <VAR>Makeinclude</VAR> support for PGI compilers
</A></H2>

    May&nbsp;30, 2007:
    <P>

    <BLOCKQUOTE>
    Prakash Doraiswamy, Atmospheric Sciences Research Center, SUNY
    Albany and New York State Department of Environmental Conservation,
    and Winston Hao, New York State Department of Environmental
    Conservation, provided flag-sets that they use with their 64-bit
    Opteron cluster.  These may be found in the new release's
    <VAR>Makeinclude.Linux2_x86_64pg_pgcc_nomp</VAR> and imply that the
    user has compiled <VAR>libnetcdf.a</VAR> with PGI <VAR>pgcc</VAR>;
    for GNU <VAR>gcc</VAR>-compiled  <VAR>libnetcdf.a</VAR>, a companion
    but untested flag-set is in
    <VAR>Makeinclude.Linux2_x86_64pg_gcc_nomp</VAR>.
    <P>
    They report that they successfully built <VAR>libnetcdf.a</VAR> with
    the following flags:
    <BLOCKQUOTE><CODE>
    setenv CC pgcc
    setenv CXX pgcCC
    setenv FC pgf90
    setenv F90 pgf90
    setenv CFLAGS   "-O2 -Msignextend -V"
    setenv CPPFLAGS "-DNDEBUG -DpgiFortran"
    setenv FFLAGS   "-O2 -w -V"
    </CODE></BLOCKQUOTE>
    following <A HREF="http://www.pgroup.com/resources/netcdf/netcdf360_pgi60.htm">
    this advice from the PGI website</A>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar1607">
    Bug-fix/enhancement from Bonyoung Koo, Environ, to
    <VAR>m3tools</VAR> program <VAR>M3COMBO</VAR>;
    fix to <VAR>CKDESC3()</VAR> for boundary files
</A></H2>

    May&nbsp;17, 2007:
    <P>

    <BLOCKQUOTE>
    Bonyoung Koo, ENVIRON International Corporation, found a problem
    situation in <A HREF="M3COMBO.html"><VAR>M3COMBO</VAR></A>, where
    one wanted to use variables from distinct files but having the same
    names to build the combinations, and provided a new version of the
    code with an ingenious way of handling this problem, as well as with
    bug-fixes dealing with defaults for time step sequence issues.
    <P>
    Michael Bane, U&nbsp;Manchester, UK), found a problem with
    internal routine <VAR>CKDESC3()</VAR> for &quot;box-model&quot;
    test cases (BugZilla Bug&nbsp;2355), where boundary files could
    not exist for 1x1 box-models.  This is now fixed (although the
    fix now permits <EM>very</EM> thick boundaries in some cases).
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb2107">
    Fixes to <VAR>m3tools</VAR> programs <VAR>M3COMBO</VAR>
    and <VAR>M3TPROC</VAR>
</A></H2>

    Febuary&nbsp;21, 2007:
    <P>
    <BLOCKQUOTE>
    George Pouliot, US EPA, found a bug in the &quot;all
    variables&quot; initialization for program
    <A HREF="M3TPROC.html"><VAR>MTXCALC</VAR></A> and provided
    a fix.
    <P>

    Jerry Condrey, Baron Advanced Met Systems, found an inconsistent
    initialization in program <A HREF="M3COMBO.html"><VAR>M3COMBO</VAR></A>
    and provided a fix.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb1207">
    <CODE>#include &lt;stdlib.h&gt;</CODE> in <VAR>getdttime()</VAR>
</A></H2>

    Febuary&nbsp;12, 2007:
    <P>
    <BLOCKQUOTE>
    As pointed out by Dr.&nbsp;Frank&nbsp;Binkowski, <VAR>gcc</VAR>
    versions 4.x generated a warning about the call to <VAR>exit()</VAR>
    in <A HREF="GETDTTIME.html"><VAR>getdttime()</VAR></A>.  This is
    alleviated by adding a reference to <CODE>stdlib.h</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb0507">
    Sun compilers:</A>s Bug-fix in <A HREF="M3COMBO.html">program <VAR>M3COMBO</VAR>
</A></H2>

    Febuary&nbsp;5, 2007:
    <P>

    <BLOCKQUOTE>
    Sun Studio Express compilers for Solaris and Linux are now
    available at no charge for both commercial and noncommercial use
    from  <A HREF="http://developers.sun.com/sunstudio/index.jsp">
    http://developers.sun.com/sunstudio/index.jsp</A>.  I/O&nbsp;API
    support has been added for using these compilers under Linux in
    both 32-bit and 64-bit modes, with corresponding binary types
    <STRONG><CODE>Linux2_x86_64sun</CODE></STRONG> and
    <STRONG><CODE>Linux2_x86sun</CODE></STRONG>.<BR>
    <EM>This is new stuff, and should be considered &quot;beta&quot;
    at this time.</EM>
    <P>

    Fix in <A HREF="M3COMBO.html"  >program <VAR>M3COMBO</VAR></A> for a bug
    that was evidently introduced in the April&nbsp;26, 2006 release.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan2907">
    Daylight savings time; program <VAR>M3STAT</VAR>; negative
    <CODE>JDATE</CODE>s
</A></H2>

    January&nbsp;29, 2007:
    <P>

    <BLOCKQUOTE>
    Fix in <A HREF="JSTEP3.html"  ><VAR>JSTEP3()</VAR></A> for a bug
    that was introduced in the &quot;standard-year&quot; set of mods.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan2507">
    Daylight savings time; program <VAR>M3STAT</VAR>; negative
    <CODE>JDATE</CODE>s
</A></H2>

    January&nbsp;25, 2007:
    <P>

    <BLOCKQUOTE>
    Subroutine <A HREF="ISDSTIME.html"><VAR>ISDSTIME</VAR></A> has been
    enhanced so that it supports daylight savings time determination for
    years both 2006 and earlier, and 2007 and later (where note that the
    US Congress changed the starting and ending times effective year
    2007).
    <P>

    <A HREF="M3STAT.html"><VAR>M3STAT</VAR></A> had a bug in processing
    files of type <CODE>BNDARY3</CODE>.  This has now been corrected.
    <P>

    There were bugs in time-handling for dates with negative year
    component.  Such dates are required for <CODE>INTERP3()</CODE>
    usage with
    <A HREF="DATETIME.html#stdday"><STRONG>Standard-Year</STRONG> and
    <STRONG>Standard-Week</STRONG> files</A>.  Affected routines are
    <UL>
        <LI> <A HREF="CURRSTEP.html"><VAR>CURRSTEP()</VAR> and <VAR>CURREC()</VAR></A>
        <LI> <A HREF="DAYMON.html"  ><VAR>DAYMON()</VAR></A>
        <LI> <A HREF="JSTEP3.html"  ><VAR>JSTEP3()</VAR></A>
        <LI> <A HREF="MMDDYY.html"  ><VAR>MMDDYY()</VAR></A>
        <LI> <A HREF="NEXTIME.html" ><VAR>NEXTIME()</VAR></A>
        <LI> <A HREF="SECSDIFF.html"><VAR>SECSDIFF()</VAR></A>
        <LI> Private routine <VAR>RDTFLAG()</VAR>
    </UL>
    <P>

    <EM>Note that PAVE has a bug in constructing legends for files
    with <CODE>SDATE3D&nbsp;&lt;&nbsp;0</CODE></EM>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec1206">
    Corrected  bug bug in program <VAR>MTXCALC</VAR>
</A></H2>

    December&nbsp;12, 2006:
    <P>

    <BLOCKQUOTE>
    <A HREF="MTXCALC.html"><VAR>MTXCALC</VAR></A> had a
    map projection-types array that incorrectly swapped Equatorial
    Mercator and Transverse Mercator, as reported by A. Fraser
    of <VAR>ic.ac.uk</VAR>.  This has now been corrected.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct0506">
    Corrected  Splash-Screen bug in <VAR>INIT3</VAR>
</A></H2>

    October&nbsp;5, 2006:
    <P>

    <BLOCKQUOTE>
    <VAR>INIT3</VAR>  incorrectly generated double-copies of the
    opening splash screen under some circumstances. Thanks to John
    McHenry for noting this issue.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep1306">
    Corrected  <CODE>Makeinclude.Linux2_x86pg_gcc_mp</CODE> and
               <CODE>Makeinclude.Linux2_x86pg_gcc_nomp</CODE>
</A></H2>

    September&nbsp;13, 2006:
    <P>

    <BLOCKQUOTE>
    <VAR>gcc</VAR>  and its flags were not being set correctly.
    Thanks to NOAA/ASMD for noting this change.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep0706">
     <VAR>m3tools</VAR> program <VAR>M3CPLE</VAR> Enhancement
</A></H2>

    September&nbsp;7, 2006:
    <P>

    <BLOCKQUOTE>
    <VAR>m3tools</VAR> program <A HREF="M3CPLE.html"><VAR>M3CPLE</VAR></A>
    now accepts environment variable <A HREF="SETSPHERE.html">
    <VAR>IOAPI_ISPH</VAR></A> to control what geodetic spheroid is
    used for grid-to-grid interpolation operations.  The default is
    still the GRS-80 spheroid that previously was hard-coded in the
    program.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep0106">
     C/Fortran interface utilities; <VAR>MMDDYY()</VAR> bug-fix
</A></H2>

    September&nbsp;1, 2006:
    <P>
    <BLOCKQUOTE>
    <A HREF="CSTRINGS.html">Fortran::C string conversion routines</A>
    <VAR>fstr2cstr(), name2cstr(), cstr2fstr()</VAR> for C programmers
    were promoted from private (internal-only) to public (callable as
    part of the I/O&nbsp;API library.
    <P>

    Subroutine <VAR>MMDDYY()</VAR> was modified so that it handles
    year-argument zero correctly (needed for SMOKE-RT for WRF).
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun1106">
     Warning-message format fix
     in <VAR>CKDESC3()</VAR>
</A></H2>

    June&nbsp;11, 2006:
    <P>

    <BLOCKQUOTE>
    Tanya Otte, US EPA, notes that internal I/O&nbsp;API worker routine
    <VAR>CKDESC3()</VAR> had a bad warning-message format.
    This bug is now corrected.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun0706">
     Added WRF vertical coordinate
               support to worker routine <VAR>CKFILE3()</VAR>
</A></H2>

    June&nbsp;7, 2006:
    <P>

    <BLOCKQUOTE>
    Tanya Otte, US EPA, notes that internal I/O&nbsp;API worker routine
    <VAR>CKFILE3()</VAR> did not support the WRF vertical coordinate
    types.  Support was added for both WRF vertical coordinats types.
    Upon further examination, <VAR>CKDESC3()</VAR> did not support WRF-NMM;
    this support was also added, and the routine was restructured
    for greater simplicity.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may1606">
     Added <CODE>INTERFACE</CODE> block for <VAR>GTPZ0()</VAR> in
     <CODE>m3utilio.f</CODE>; corrected legend in <VAR>utmtool</VAR>
</A></H2>

    May&nbsp;16, 2006:
    <P>

    <BLOCKQUOTE>
    <VAR>MDOULE M3UTILIO</VAR> now supports interface checking for
    USGS-derived routine <VAR>GTPZ0()</VAR>.
    <P>

    &quot;Lower-Right&quot; and &quot;Upper-Left&quot; legends were
    swapped for the grid-corner modes (40,41,42,43) of <A
    HREF="UTMTOOL.html"><VAR>utmtool</VAR></A> (although you could have
    figured out what you wanted from the accompanying
    <CODE>&lt;X,Y&gt;::&lt;LAT,LON&gt;</CODE> values).
    <P>

    Also comment-correction related to vertical grid types by Jerry
    Condrey in routine <VAR>GRDCHK3()</VAR> (no code-changes).
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may0806">
     Support for WRF EM vertical coordinate type <CODE>VGWRFEM</CODE>
     in <VAR>CKDESC3()</VAR>
</A></H2>

    May&nbsp;8, 2006:
    <P>

    <BLOCKQUOTE>
    Tanya Otte, US EPA, notes that internal I/O&nbsp;API worker routine
    <VAR>CKDESC3()</VAR> did not support the WRF EM vertical coordinate
    type <CODE>VGWRFEM</CODE> defined in post-May-2005 versions of
    INCLUDE-file <A HREF="PARMS3.txt"><VAR>PARMS3.EXT</VAR></A>.
    This bug is now corrected.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr2606">
     New multiple-input file version of program <VAR>M3COMBO</VAR>;
     bug-fix in <VAR>M3COMBO</VAR>, <VAR>M3DIFF</VAR>
</A></H2>

    April&nbsp;26, 2006:
    <P>

    <BLOCKQUOTE>
    There is a new version of &quot;m3tools&quot; program <A HREF =
    "M3COMBO.html"><VAR>M3COMBO</VAR></A> that can use variables from
    <STRONG>multiple input files</STRONG> (rather than from a single
    input file) in constructing its linear-combination output
    variables.  The program even supports mixing time independent and
    time stepped input files.
    <P>

    Additionally, a minor bug in the specification of starting time for
    runs of programs <VAR>M3COMBO</VAR> and <VAR>M3DIFF</VAR> has been
    fixed (previously, if the input file started at date&time
    2006116:120000, for example, the program would not allow you
    to start a run at 2006117:000000, since it thought 000000 was
    &quot;before&quot; 120000 in all cases.
    <P>

    <EM>
    Because of the complexities in specifying linear combinations of
    variables from multiple input files, the new multi-file-input
    version of <VAR>M3COMBO</VAR> is <STRONG>not script
    compatible</STRONG> with the preceeding version.
    </EM>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar3106">
     <VAR>state3.h</VAR> storage-order error  for
     <CODE>IOAPI_CSTATE3</CODE>
</A></H2>

    March&nbsp;31, 2006:
    <P>

    <BLOCKQUOTE>
    David Wong points out that <VAR>versn</VAR> had been inserted into
    the wrong storage location in the <CODE>IOAPI_CSTATE3</CODE> typedef
    in C include-file <VAR>state3.h</VAR>.  This is now fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar0806">
     PGI &quot;save&quot; flag fix
</A></H2>

    March&nbsp;8, 2006:
    <P>

    <BLOCKQUOTE>
    The <CODE>FSFLAG</CODE> in the <VAR>Makeinclude.*pg*</VAR> has
    been fixed.  This is used to enforce default <CODE>SAVE</CODE> for
    variables in USGS routine <A HREF="GCTP.html"><VAR>GCTP</VAR></A>.
    If not present, this can potentially cause geospatial transform
    results to be flaky.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb1706">
     Another M3DIFF bug-fix
</A></H2>

    February&nbsp;17, 2006:
    <P>

    <BLOCKQUOTE>
    As pointed out by Matthew Johnson of the Iowa DNR - Air Quality
    Bureau, in the January&nbsp;27 bug-fix, an additional typo crept
    into program <A HREF = "M3DIFF.html"><CODE>M3DIFF</CODE></A> at
    line&nbsp;560 -- an extra inadvertent
    <BLOCKQUOTE><CODE>
    IF ( VARMODE ) THEN
    </CODE></BLOCKQUOTE>
    crept into the code.  This has now been fixed.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan2706">
     M3DIFF bug-fix
</A></H2>

    January&nbsp;27, 2006:
    <P>

    <BLOCKQUOTE>
    Program <A HREF = "M3DIFF.html"><CODE>M3DIFF</CODE></A> had an
    output time step sequence at about lines 653-735, as pointed out by
    Dr.&nbsp;Christian Hogrefe of the State of New York, who also
    suggested the correct fix.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan1106">
     MTXCALC bug-fix
</A></H2>

    January&nbsp;11, 2006:
    <P>

    <BLOCKQUOTE>
    Program <A HREF = "MTXCALC.html"><CODE>MTXCALC</CODE></A>
    had an off-by-one-half error at about line 732, as pointed
    out by Dr.&nbsp;Michael Bane of the University of Manchester
    (UK), that is now fixed.  Also one interface-block fix in
    <A HREF = "M3UTILIO.html"><CODE>MODULE M3UTILIO</CODE></A>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan0306">
     LAMBERT() fixes; M3UTILIO additions
</A></H2>

    January&nbsp;3, 2006:
    <P>

    <BLOCKQUOTE>
    Subroutine <A HREF = "LAMBERT.html"><CODE>LAMBERT()</CODE></A>
    and its entries did not initialize ostensibly unused arguments
    to USGS routine <A HREF = "GCTP.html"><CODE>GCTP()</CODE></A>.
    Consequently, for compiler environments that initialize variables
    to <CODE>NaN</CODE>, internal <CODE>GCTP()</CODE> arithmetic
    (that is in principle unnecessary) on these array elements could
    lead to floating point exceptions.  <CODE>LAMBERT()</CODE> now
    initializes the affected aray arguments with zeros.
    <P>

    <A HREF = "M3UTILIO.html"><CODE>MODULE M3UTILIO</CODE></A>
    now has interface blocks for all 36 of the entries to
    <CODE>LAMBERT()</CODE>.
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov2905">
     Support for Absoft Pro Fortran
</A></H2>

    November&nbsp;29, 2005:
    <P>

    <BLOCKQUOTE>
    Support has been added for Absoft Pro Fortran for <VAR>x86</VAR> and
    <VAR>x86_64</VAR> Linux.  Binary types are:
    <DL>
         <DT> <STRONG><CODE>Linux2_x86af95</CODE></STRONG>
         <DD> 32-bit Linux with Absoft native linker-sumbol
              name-mangling (subroutine and function names
              are upcased; <CODE>COMMON</CODE> block names
              are prefixed with <CODE>_C</CODE> and then upcased)
              <P>
         <DT> <STRONG><CODE>Linux2_x86af95_</CODE></STRONG>
         <DD> 32-bit Linux with Intel/PGI/Lahey compatible linker
              symbols (subroutine, function, and <CODE>COMMON</CODE>
              block names  are downcased and suffixed with a single
              underscore)
              <P>
         <DT> <STRONG><CODE>Linux2_x86af95dbg</CODE></STRONG>
         <DD> 32-bit Linux with Absoft native linker sumbols
              compiled for debug
              <P>
         <DT> <STRONG><CODE>Linux2_x86af95_dbg</CODE></STRONG>
         <DD> 32-bit Linux with Intel/PGI/Lahey compatible linker
              symbols, compiled for debug
              <P>
         <DT> <STRONG><CODE>Linux2_x86_64af95</CODE></STRONG>
         <DD> 64-bit (Opteron) Linux with Intel/PGI/Lahey compatible
              linker symbols
              <P>
         <DT> <STRONG><CODE>Linux2_x86_64af95_</CODE></STRONG>
         <DD> 64-bit Linux with Intel/PGI/Lahey compatible linker
              symbols
              <P>
         <DT> <STRONG><CODE>Linux2_x86_64af95dbg</CODE></STRONG>
         <DD> 64-bit Linux with Absoft native linker sumbols,
              compiled for debug
              <P>
         <DT> <STRONG><CODE>Linux2_x86_64af95_dbg</CODE></STRONG>
         <DD> 64-bit Linux with Intel/PGI/Lahey compatible linker
              symbols, compiled for debug
              <P>
    </DL>
    <P>
    </BLOCKQUOTE>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov1105">
     Mac <VAR>ioapi</VAR> package from Alex&nbsp;Zubrow at the
     University of Chicago;  assorted unused variables removed
</A></H2>

    November&nbsp;11, 2005:
    <P>
    Alex writes:
    <BLOCKQUOTE>
    Hi all.<P>

    If you want to use libioapi on a Mac, I've added the package to
    fink.  For those who don't know fink, it is a package management
    system that automatically downloads and builds packages for you to
    work on a Mac. Through fink, you can easily install a whole series
    of useful scientific and graphics packages.
    <P>

    To get fink, go to:
    <BLOCKQUOTE>
    <A HREF="http://fink.sourceforge.net/">http://fink.sourceforge.net/</A>
    </BLOCKQUOTE>

    You'll need to set it up to use the unstable branches of the
    distribution, see:
    <A HREF="http://fink.sourceforge.net/faq/usage-fink.php?phpLang=en#unstable">
    http://fink.sourceforge.net/faq/usage-fink.php?phpLang=en#unstable</A>

    Once you have fink working, you can get the ioapi package from the
    command line:
    <BLOCKQUOTE>
    $ fink install ioapi
    </BLOCKQUOTE><P>

    Or you can use the GUI <VAR>FinkCommander</VAR>.
    <P>

    I hope this is useful to folks out there.
    <P>

    Best,<BR>
    Alexis
    </BLOCKQUOTE>
    <P>

    <VAR>Makeinclude</VAR> files are now available for the Absoft
    Fortran 90/95 compiler under Linux for <VAR>x86</VAR> and
    <VAR>x86_64</VAR> (64-bit mode on Opteron etc.):
    <BLOCKQUOTE><CODE>
    Makeinclude.Linux2_x86_64af95
    Makeinclude.Linux2_x86_64af95dbg
    Makeinclude.Linux2_x86af95
    Makeinclude.Linux2_x86af95dbg
    </CODE></BLOCKQUOTE>
    <EM><STRONG>NOTE:</STRONG> Particular compile flags are needed for
    compatibility with the current <CODE>netCDF</CODE>
    configure-and-build system.  <STRONG>These flags are also needed for
    compiling any model that links with the corresponing version of the
    I/O&nbsp;API.</STRONG></EM>
    <P>

    Additionally, in a number of routines (<CODE>READ4D, NAME2FID,
    LBLANK, GETNUM, OPEN3, MMDDYY, INITLOG3, INIT3, UNGRIDI, SETSPHERE,
    CHECK3, CBARNESN, CBARNES1, OPNLIST3, M3UTILIO, GETMENU, DDTVAR3
    </CODE>) and <VAR>m3tools</VAR> programs (<CODE>DIFFSTEP, VERTOT,
    BCSTEP, STATSPARS, LATLON, FAKESTEP, DAYAGG, AIRS2M3, AGMAX,
    M3CPLE, AGMASK, M3INTERP, M3COMBO, MTXCALC, MTXBUILD, MTXBLEND,
    M3TPROC, M3MERGE, AGGVARS, SELMRG2D, PRESTERP, MTXCPLE </CODE>),
    unused variables (as diagnosed by the Absoft <VAR>f95</VAR>) were
    eliminated.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>
Dr.&nbsp;Michael Bane of the University of Manchester (UK)

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct3105">
    Python <VAR>ioapiTools</VAR> package from Alex&nbsp;Zubrow at the
    University of Chicago; <VAR>UNGRIDI</VAR>;
</A></H2>

    October&nbsp;31, 2005:
    <P>
    Alex&nbsp;Zubrow of the University of Chicago just announced
    release of a beta version of his <VAR>ioapiTools</VAR>.  For those
    of you who didn't get a chance to hear his talk at the last CMAS
    conference, <VAR>ioapiTools</VAR> is a python interface to
    I/O&nbsp;API data.  It allows you to easily import the data into
    python, have full access to the I/O&nbsp;API metadata, use the full
    breadth of python's scientific libraries, create plots, and write
    out your data to new I/O&nbsp;API or netCDF
    files. See:
    <BLOCKQUOTE>
    <A HREF="http://www-pcmdi.llnl.gov/software-portal/Members/azubrow/ioapiTools/index_html">
    http://www-pcmdi.llnl.gov/software-portal/Members/azubrow/ioapiTools/index_html</A>
    </BLOCKQUOTE>
    <P>
    New subroutine <CODE>UNGRIDI</CODE> computes &quot;<EM>incidence
    matrix</EM> ungridding&quot; indices for grid-to-grid
    transformation from a grid to the set of target (e.g., point
    source) locations as specified above, i.e., so that for a variable
    <VAR>V(NCOLS*NROWS)</VAR> single-indexed on the source grid,
    <BLOCKQUOTE>
    <VAR>VNEW(S)&nbsp;=&nbsp;V(NX(S))</VAR> is the value at <VAR>{
    &lt;XLOC(S),YLOC(S)&gt;</VAR>
    </BLOCKQUOTE>
    <P>

    There was a trivial inconsistency in the trailing entry
    <VAR>VERSN3</VAR> of <CODE>/CSTATE3/</CODE> between
    <CODE>ioapi/STATE3.EXT</CODE> and
    <CODE>ioapi/fixed_src/STATE3.EXT</CODE> (which could easily be
    fixed by running <VAR>make&nbsp;fixed_src</VAR>.  Thise
    COMMON-block entry is never referenced by any CMAQ code, and so
    this discrepancy should never have caused any difficulty.  However,
    these are now fixed up to be consistent.   <STRONG>That such a
    problem arises shows what a serious mistake it was for CMAQ to
    insist upon a nowhere-standard Fortran source format.  Such failure
    to follow standards almost guarantees referential integrity problems
    such as this one.</STRONG>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct2105">
    Bad <VAR>M3TOOL</VAR> starting time constraints
</A></H2>

    October&nbsp;21, 2005:
    <P>
    The following programs had incorrect starting time constraints
    (in all cases, the starting time for program-run was incorrectly
    constrained to be at least as late as the starting time for the
    input file(s)).
    <DL>
        <DT><CODE>M3COMBO</CODE>
        <DT><CODE>M3CPLE</CODE>
        <DT><CODE>M3INTERP</CODE>
        <DT><CODE>MTXBLEND</CODE>
        <DT><CODE>MTXCPLE</CODE>
    </DL>
    <CODE>MTXCALC</CODE> had an inappropriate assumption that the
    <VAR>XCELL</VAR> and <VAR>YCELL</VAR> for the input and output
    grids were always positive.
    <P>

    These programs are now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep3005">
    <CODE>XTRACT3()</CODE>; web-pages
</A></H2>

    September&nbsp;30, 2005, notes of appreciation:
    <P>
    Dr.&nbsp;Michael Bane of the University of Manchester (UK) pointed
    out an extraneous  <CODE>VNAME&nbsp;=&nbsp;VNAME</CODE> in the code
    for <CODE>XTRACT3()</CODE>.  This was left over from code
    unifications for I/O&nbsp;API Version&nbsp;3, and would have
    appeared to be harmless, but seems to cause seg-faults on some
    architectures.
    <P>
    Dr.&nbsp;Joseph Vaughn of the Washington State University (Pullman,
    WA) pointed out errors in the documentation for
    <CODE>NEXTIME()</CODE>.
    This has now been fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug0405">
    <VAR>F77</VAR> issue in <CODE>GRDCHK3</CODE>
</A></H2>

    August&nbsp;4, 2005:
    <P>
    Alex Zubrow of the University of Chicago points out an issue
    in <CODE>grdchk3.f</CODE>:  the string concatenation at line 162
    is not permitted in strict Fortran-77, although it is legal in
    Fortran-90 (and is supported as an extension by most <VAR>f77</VAR>
    compilers).   This is now replaced by a modified format and
    arg-list that does pass strict Fortran-77 checking.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "july272005">
    Mods to <CODE>PARMS3.EXT</CODE> for WRF-Chem
</A></H2>

    July&nbsp;27, 2005:
    <P>
    Two additional parameter tokens are added to <CODE>INCLUDE</CODE>-file
    <STRONG><CODE>PARMS3.EXT</CODE></STRONG>,
    for WRF vertical coordinate types, to support
    <A HREF="http://www/baronams.com/projects/wrfchem/">the on-going
    work to put the Models-3I/O&nbsp;API into WRF, and to create a
    WRF-Chem/SMOKE cooperating-model coupled system</A>:
    <DL>
        <DT> <STRONG><CODE>VGWRFEM</CODE>=7</STRONG>
        <DD>  WRF mass-core sigma vertical coordinate type
        <P>
        <DT> <STRONG><CODE>VGWRFNM</CODE>=8</STRONG>
        <DD>  WRF NMM vertical coordinate type
        <P>
    </DL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "july052005">
     <VAR><VAR>m3tools</VAR></VAR> program enhancements
</A></H2>

    July&nbsp;6, 2005:
    <P>
    Many thanks to Dr.&nbsp;Michael Bane of the University of
    Manchester (UK) who has pointed out a number of  problems with
    various cases in the the large-scale <VAR>make</VAR> system.
    <UL>
        <LI> There was a bug in the interaction between the top-level
             <VAR>make&nbsp;configure</VAR> and
             <VAR>make&nbsp;[no]cpl</VAR> commands... the latter would
             not use the <CODE>Makefile</CODE>s created by the former!
             This bug should now be corrected...
             <VAR>make&nbsp;configure</VAR> now copies the
             <CODE>Makefile</CODE>s it produces to
             <CODE>Makefile.${CPLMODE}</CODE>.
        <LI> There was also a problem with <VAR>make&nbsp;configure</VAR>
             for the <CODE>m3tools</CODE>programs.
        <LI> There were some compile-flag problems causing warnings, with
             respect to the Intel compilers for Linux (both
             <VAR>x86</VAR>and <VAR>ia64</VAR>).
        <LI> There were problems with <CODE>INSTALL</CODE> vs
             <CODE>INSTDIR</CODE> for <VAR>make&nbsp;install</VAR>
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun222005">
     <VAR><VAR>m3tools</VAR></VAR> program enhancements
</A></H2>

    June&nbsp;22, 2005:
    <P>
    Smarter default values for user-entered
    <STRONG><CODE>NRECS</CODE></STRONG> are provided in the following
    programs.  Primarily affected is the case when the input and output
    time steps are unequal.
    <UL>
        <LI> <STRONG><CODE><A HREF= "M3COMBO.html">M3COMBO</A></CODE></STRONG>
        <LI> <STRONG><CODE><A HREF=  "M3CPLE.html">M3CPLE</A></CODE></STRONG>
        <LI> <STRONG><CODE><A HREF= "M3TPROC.html">M3TPROC</A></CODE></STRONG>
        <LI> <STRONG><CODE><A HREF=  "M3CPLE.html">M3INTERP</A></CODE></STRONG>
        <LI> <STRONG><CODE><A HREF="MTXBLEND.html">MTXBLEND</A></CODE></STRONG>
        <LI> <STRONG><CODE><A HREF= "MTXCPLE.html">MTXCPLE</A></CODE></STRONG>
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun172005">
     AIX Build Changes
</A></H2>

    June&nbsp;17, 2005:
    <P>
    As pointed out by David&nbsp;Wong, US&nbsp;EPA, there were3
    problems for AIX with preprocessor flags for the new build system
    and with program <CODE>M3EDHDR</CODE>.  The flags are now special
    cased for AIX, and <CODE>M3EDHDR</CODE> now uses subroutine
    <CODE>M3PROMPT</CODE> to get around the <VAR>flush()</VAR> problems
    for AIX.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun102005">
     Build Enhancements
</A></H2>

    June&nbsp;10, 2005:
    <P>
    There are problems with the Fortran pre-processing for some
    versions of the Intel Fortran compilers; additionally, many
    Microsoft <VAR>Windows</VAR> build environments do not provide
    properly for Fortran pre-processing.  These problems can to some
    extent alleviated by separating the preprocessing from the compile
    step for the <CODE>*.F</CODE> files. <VAR>Makefile.cpphack</VAR>
    are sample <VAR>Makefile</VAR>s in directories <VAR>ioapi</VAR>and
    <VAR>m3tools</VAR> for this purpose (as provided, they assume
    OpenMP and coupling mode).
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun022005">
     Bugfix in programs <CODE>M3CPLE</CODE>, <CODE>M3INTERP</CODE>,
     <CODE>MTXBLEND</CODE>, and <CODE>MTXCPLE</CODE>
</A></H2>

    June&nbsp;2, 2005:
    <P>
    These programs had a bug in the prompt for starting time:  they did
    not permit an <CODE>STIME</CODE> less than the starting time for
    the input file(s) even if the starting date was later than the
    input file starting date.  This bug manifested itself, for example,
    if one had inputs starting at  2005153:120000 but wanted a program
    run starting at 2005154:000000.  [One <EM>could</EM> have used the
    workaround of requesting a run starting at 2005153:360000... the
    I/O&nbsp;API time manipulation routines are quite robust in that
    regard.]
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may252005">
     Bugfix in <CODE>NEXTIME()</CODE>
     and <CODE>CURREC()</CODE>
</A></H2>

    May&nbsp;25, 2005:
    <P>
    <A HREF="NEXTIME.html"><CODE>NEXTIME()</CODE></A> had a bug with
    respect to normalizing  <CODE>JDATE&nbsp;=&nbsp;0</CODE>  arguments
    in all cases, not just the <CODE>0:0:0</CODE> case; moreover there
    were similar problems with <A
    HREF="CURREC.html"><CODE>CURREC()</CODE></A>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may192005">
     Bugfix in <CODE>NEXTIME()</CODE>
</A></H2>

    May&nbsp;19, 2005:
    <P>
    <A HREF="NEXTIME.html"><CODE>NEXTIME()</CODE></A> had a bug with
    respect to normalizing  <CODE>0:0&nbsp;=&nbsp;JDATE:JTIME</CODE>
    arguments (recall that <CODE>NEXTIME(JDATE,JTIME,0)</CODE> may be
    used to normalize <CODE>JDATE:JTIME</CODE> so that
    <CODE>JTIME</CODE> is between 0 and 235959); this is now handled
    correctly.
    <P>
    This manifested itself in the creation of time-independent files
    (with <CODE>SDATE3D&nbsp;=&nbsp;STIME3D&nbsp;=&nbsp;TSTEP3D&nbsp;=&nbsp;0</CODE>;
    the file header would record <CODE>SDATE3D&nbsp;=&nbsp;-635</CODE>.
    The I/O&nbsp;API would handle such files correctly, but it certainly
    &quot;looks&quot; bad...
    <P>
    Also minor enhancements to experimental
    <CODE>MODULE&nbsp;M3UTILIO</CODE>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr1105">
     Bugfix in <CODE>ENVYN()</CODE>
</A></H2>

    April&nbsp;11, 2005:
    <P>
    DAVID Wong (US EPA) points out a bug in <A
    HREF="ENVYN.html"><CODE>ENVYN()</CODE></A> that occurs when the
    value is set to <CODE>.TRUE.</CODE> or <CODE>.FALSE.</CODE>.  Now
    fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr0605">
     <CODE>Makefile.nocpl</CODE> issue:  <CODE>ddtvar3v.F</CODE> and
     <CODE>interp3v.F</CODE>
</A></H2>

    April&nbsp;6, 2005:
    <P>
    Files <VAR>ddtvar3v.F</VAR> and <VAR>interp3v.F</VAR> are
    active only when coupling mode is enabled (otherwise, the
    preprocessor strips their  contents out, leaving empty results
    (which some compilers, e.g., Intel <VAR>ifort</VAR>
    Version&nbsp;8.1, don't like...).  These routines should not be
    in the <CODE>FSRC</CODE> list in <VAR>Makefile.nocpl</VAR>;
    that file has been revised accordingly.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr0405">
     Bugfix for file header checking routine
</A></H2>

    April&nbsp;4, 2005:
    <P>
    Dr.&nbsp;Michael Bane of the University of Manchester (UK) pointed
    out a bug in duplicate variable-name  checking which had been put
    into file header checking in November (active when
    <CODE>IOAPI_CHECK_HEADERS</CODE> is turned on).  This bug is now
    corrected.
    <P>
    Weakened architecture/optimization flags for binary type
    <CODE>Linux2_x86_64</CODE> to get around a compiler bug, i.e.,
    internal compiler errors in the <VAR>gcc/g77</VAR> shipped with
    Fedora Core&nbsp;3 for <CODE>x86_64</CODE>:  the compiler has an
    internal &quot;unable to find a register to spill...&quot; error
    when attempting to compile certain routines.  Note that this
    same compiler bug will bite you when trying to build <U>lots</U>
    of stuff on <VAR>FC3/gcc/g77</VAR> systems, and the same fix
    seems to work universally.
    <P>
    Minor changes to <CODE>Makefile</CODE>s for better handling of
    the new experimental Fortran-90 <A HREF = "#nov3004"><CODE>MODULE
    M3UTILIO</CODE></A>.
    <P>
    Following another suggestion from Dr.&nbsp;Bane, the command
    <VAR>make&nbsp;gtar</VAR> (used to create the distribution download
    tar-files) now creates a file <CODE>VERSION.txt</CODE> in the
    distribution root directory prior to creating the
    <CODE>tar.gz</CODE> file.  <CODE>VERSION.txt</CODE> contains the
    result of running the system <VAR>date</VAR> command at the time
    <VAR>make</VAR> runs the <VAR>gtar</VAR> command.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar2305">
     Build System Enhancements, Bugfix for
     CBARNES gridding routines
</A></H2>

    March&nbsp;23, 2005:
    <P>
    There were troubles with floating point exceptions due to the
    interaction between round-off error and the exact-distance formula
    in the <A HREF= "CBARNES.html">CBARNES</A> Barnes analysis
    routines.   The previous approximate-distance formula (which did not
    have this problem) has been put back in.
    <P>
    PathScake compiler support for AMD Opteron processors under Linux
    has been added.
    <P>
    Coupling mode support for GNU compiled libraries has been added
    (with a new treatment of GNU-style Fortran name mangling...)
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb2205">
     <CODE>READ4D()</CODE> change; new <CODE>MODULE M3UTILIO</CODE>
</A></H2>

    February&nbsp;22, 2005:
    <P>
    Alex Zubrow of  the University of Chicago points out that <A
    HREF="READ4D.html"><CODE>READ4D</CODE></A> did not return a value
    for success.He also pointed out the duplicate potential definition
    of <CODE>PERROR()</CODE> in  <CODE>GETEFILE()</CODE> and
    <CODE>GETFFILE()</CODE>.    These are now corrected.
    <P>
    New file <VAR>m3utilio.f</VAR>contains an experimental Fortran-90
    alternative, <A HREF="M3UTILIO.html"><CODE>MODULE
    M3UTILIO</CODE></A>, to the <CODE>INCLUDE</CODE> files
    <CODE>'PARMS3.EXT</CODE>, <CODE>FDESC3.EXT</CODE>, and
    <CODE>IODECL3.EXT</CODE>, as well as providing explicit
    <CODE>INTERFACE</CODE> blocks for most of the public I/O&nbsp;API
    routines (those for which argument-signature is not subject to
    variation).
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb0805">
     New &quot;Edit FDESC3D&quot; capability for program
     <CODE>M3EDHDR</CODE>
</A></H2>

    February&nbsp;8, 2005:
    <P>
    The capability of editing the file description field
    <CODE>FDESC3D</CODE> was added to <VAR>m3tools</VAR> program
    <A HREF="M3EDHDR.html"><VAR>M3EDHDR</VAR></A>
    in order to compensate for systematic SMOKE Version 1.x and 2.x
    mis-design.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb0105">
     Bug fix for worker routine <CODE>m3abort()</CODE>
</A></H2>

    February&nbsp;1, 2005:
    <P>
    There was an error in worker routine <CODE>m3abort()</CODE>
    (called from <CODE>OPEN3()</CODE>) that would cause garbled
    error messages under some circumstances, when files could not
    be opened.  Fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jan1805">
     Bug fix for <CODE>GCTP</CODE>;<BR>
     Format fix for <CODE>envrealc()</CODE> and <CODE>envdblec()</CODE>
</A></H2>

    January&nbsp;18, 2005:
    <P>
    Catherine Seppannen of UNC-Carolina Environmental Program diagnosed
    an obscure bug that occurs in the GCTP map-projection package from
    USGS:
    <BLOCKQUOTE>
    I've traced the problem to the subroutine SPHDZ0 in gctp.f. When
    <CODE>GTPZ0</CODE> is first called, it calls <CODE>SPHDZ0</CODE>
    with dummy values that cause the spheroid to be set to Clarke 1866.
    A later call to <CODE>SPHDZ0</CODE> is made  that looks like it
    should reset the spheroid. However, at line 5475, the subroutine
    checks if the  spheroid needs to be set and then returns. This
    means that the spheriod is never changed from Clarke  1866. When
    processing UTM coordinates, the spheroid is changed outside of
    <CODE>SPHDZ0</CODE> (at lines 1273  and 1274) so the correct
    spheroid is used in later calculations. For now, simply removing
    line 5475 and  moving the label to the next line seems to solve the
    problem.
    </BLOCKQUOTE>
    <P>
    Dr. Michael Bane of the University of Manchester (UK) notes that
    there are problemswith underflow with the existing <CODE>%f</CODE>
    format used in <CODE>envrealc()</CODE> and <CODE>envdblec()</CODE>.
    This has now been changed to a more-robust <CODE>%G</CODE>,that
    should not be subject to underflow.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec0904">
     Range checks for <CODE>NVARS</CODE> in <CODE>OPEN3</CODE>
</A></H2>

    December&nbsp;9, 2004:
    <P>
    To facilitate user changes to parameter <CODE>MXVARS3</CODE> in
    INCLUDE-file <CODE>PARMS3,EXT</CODE>, additional checks were
    inserted into <CODE>OPEN3</CODE> and its worker routines to ensure
    that one may not inadvertently open files with <CODE>NVARS</CODE>
    too large for the current <CODE>libioapi.a</CODE> build.
    <P>
    Note that environments in which nonstandard values of parameters
    from <CODE>PARMS3,EXT</CODE> are used must be managed with great
    care:  inconsistent values of these parameters for different
    objects or files within a build- or usage-scenario can lead to very
    hard to diagnose, obscure failures, and requesting help for such
    difficulties will still invoke the triple-time support penalties
    in the I/O&nbsp;API license.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec0104">
     Fixes to <CODE>M3TPROC</CODE>
</A></H2>

    December&nbsp;1, 2004:
    <P>
    Dr.&nbsp;Michael Bane of the University of Manchester,  Manchester,
    UK, submits changes to program <CODE>M3TPROC</CODE> to allow clean
    compilation on the new Intel Version&nbsp;8.1 compilers:  removal of
    a duplicate declaration for <CODE>ASTEPS</CODE>, and reversion to
    <EM>F77</EM> style declarations (instead of <EM>F90</EM> style)
    for <CODE>MENUITMS</CODE> and <CODE>OPNAMES</CODE>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov3004">
     Duplicate declaration removed from
     <CODE>STATE3.EXT</CODE>; new experimental Fortran-90 <CODE>MODULE
     M3UTILIO</CODE>
</A></H2>

    November&nbsp;30, 2004:
    <P>
    Dr.&nbsp;Michael Bane of the University of Manchester,  Manchester,
    UK, noticed a duplicate declaration of variable <CODE>VERSN3</CODE>
    in INCLUDE-file <CODE>STATE3.EXT</CODE>. This was clearly an error,
    and may have been responsible for cryptic error messages on various
    platforms.  He also points out that Intel "ifort" Version 8
    generates a "Command line warning: overriding '-auto' with '-save'"
    message during the compilation of GCTP; this latter message is
    not a symptom of an underlying problem (the build should still be
    correct.
    <P>

    <H3>
    <CODE>MODULE M3UTILIO</CODE>:  Fortran-90 <CODE>INTERFACE</CODE>
    Blocks
    </H3>
    <STRONG>There is  a new <EM>experimental Fortran-90 module</EM>
    <CODE>MODULE M3UTILIO</CODE>, available</STRONG>, in file
    <CODE>m3utilio.f</CODE>, coming as a consequence of development
    work to enable the I/O&nbsp;API and SMOKE to couple with WRF-Chem.
    This module is not built by a default build (partly because of the
    lack of standards for naming module-files in the various Fortran
    90/95 compilers), but may be built and used by the interested
    modeler. In addition to some cleaned-up utility routines used by
    SMOKE,  it contains Fortran-90 <CODE>INTERFACE</CODE>s for most of
    the public I/O&nbsp;API utility routines (excepting those for
    which normal usage depends upon using an argument as a <VAR>void
    pointer</VAR>, i.e., in a non-typesafe manner (as in the sparse
    matrix multiplication routine <CODE>SMATVEC</CODE>,when used with
    an <CODE>ALLOCATE</CODE>d matrix-buffer filled from
    <CODE>READ3</CODE>).  It also <CODE>INCLUDE</CODE>s the
    <CODE>PARMS3.EXT, FDESC3.EXT,</CODE> and <CODE>IODECL3.EXT</CODE>
    files, so that a single
    <BLOCKQUOTE><CODE>
    USE M3UTILIO
    </CODE></BLOCKQUOTE>
    replaces declarations of all the functions which have the
    <CODE>INTERFACE</CODE> blocks, as well as the inclusions:
    <BLOCKQUOTE><CODE>
    INCLUDE 'PARMS3.EXT'<BR>
    INCLUDE 'FDESC3.EXT'<BR>
    INCLUDE 'IODECL3.EXT'
    </CODE></BLOCKQUOTE>
    This greatly simplifies many I/O&nbsp;API applications.
    <P>
    I am thinking of splitting this module into two pieces, however:
    an <CODE>INTERFACE</CODE> block/declaration module
    (<CODE>M3IO</CODE>?), and a module for the SMOKE-related utility
    routines (<CODE>MUTIL</CODE>?); I welcome feedback on that matter
    (and in fact on the whole idea). --&nbsp;CJC
    <P>


    <H3>
    SunOS SPARC 64-Bit? Opteron 32- and 64-bit? Others?
    </H3>
    I would be interested in adding 64-bit compile-support for
    Sun SPARC and both 32-bit and 64-bit support for Sun Opteron
    systems.  I no longer have access to the Sun compiler suite
    even for 32-bit SPARC, and would be glad to give credit for
    someone who would contribute the compile-flags to support
    these systems -- as well as whatever others you know how to
    build.--&nbsp;CJC
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov2204">
     Enhancement for <CODE>CHECK3()</CODE>
</A></H2>

    November&nbsp;22, 2004:
    <P>
    During the transition to I/O&nbsp;API Version&nbsp;3, the
    responsibility for &quot;timestep not available&quot; status and
    for messages about that status was transferred from routines
    <CODE>CHECK3 DDTVAR3 INTERP3 READ3 READ4D XTRACT3</CODE> to worker
    routine <CODE>RDTFLAG</CODE>.  However, such messages should be
    generated for all of these routines except <CODE>CHECK3</CODE>,
    as was discovered during the implementation of the new
    WRF-enabled&nbsp;/&nbsp;sub-gridscale terrain
    version of the SMOKE <STRONG><CODE>TMPMOBIL</CODE></STRONG>
    program.  Therefore, a new &quot;verbose-output&quot; flag was
    added to the argument list for <CODE>RDTFLAG</CODE>, and the
    other routines were modified accordingly.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov1904">
     Bug fix, version in sample program <CODE>VERTOT</CODE>
</A></H2>

    November&nbsp;19, 2004:
    <P>
    Bill Hutzell of EOA's Atmospheric Modeling Division, National
    Exposure Research Laboratory, pointed out a bug in sample program
    <CODE>VERTOT</CODE>, and provided the fix:  when used to process
    all variables, the previous version of the program did not handle
    the list of output variable names (etc.) correctly.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nov0104">
     Bug fix, <CODE>GCD()</CODE> and <CODE>RDTFLAG()</CODE>;
     enhanced program <VAR>M3TPROC</VAR>
</A></H2>

    November&nbsp;1, 2004:
    <P>
    There was a coding bug in routine <CODE>GCD()</CODE> and bugs in the
    error messages for worker-routine <CODE>RDTFLAG()</CODE>.  These are
    now corrected.
    <P>

    Program <A HREF = "M3TPROC.html"><VAR>M3TPROC</VAR></A> was enhanced so that it
    will now do time aggregation of minima, in addition to the
    previously supported arithmetic means and maxima (so  that one can
    now compute daily-minimum layer&nbsp;1 temperature, for example).
    The time-stepping logic was enhanced to support partial-input
    aggregation, and the program control logic was completely overhauled
    to get rid of the absurdly complex hierarchy of environment variables
    and command-line prompts used in the prior version.
    <STRONG>Consequently, scripts used with the previous version will no
    longer work: <EM>the new version requires re-scripting.</EM></STRONG>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct1504">
     Bug fix, version in <CODE>CRTFIL3()</CODE>
</A></H2>

    October&nbsp;15, 2004:
    <P>
    As pointed out by Dr.&nbsp;Michael Bane of the University of Manchester,
    Manchester, UK, worker
    routines <CODE>CRTFIL3()</CODE> and <CODE>CRTKF3()</CODE> were not
    correctly picking up the I/O&nbsp;API version to insert into file
    headers.  This is now corrected.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep072004">
     Bug fix, virtual mode <CODE>INTEPR3()</CODE>
</A></H2>

    September&nbsp;7, 2004:
    <P>
    The virtual-mode part of the
    <A HREF = "INTERP3.html"><CODE>interp3()</CODE></A> system
    <EM>still</EM> had a bug that occurred for PVM-based
    &quot;virtual&quot; files (netCDF file behavior is unaffected).
    This has now (<EM>finally!</EM>) been fixed and the fix validated.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "sep032004">
     Bug fixes; program <CODE>m3interp</CODE>
</A></H2>

    September&nbsp;3, 2004:
    <P>
    <A HREF = "UNGRIDB.html"><CODE>ungridb()</CODE></A> had a fencepost
    error in dealing with the last row of the input grid, leading to
    errors when the output grid extended beyond that edge.  Bug was
    reported by Catharine Sepannen, UNC CEP.
    <P>
    <A HREF = "OPEN3.html"><CODE>open3()</CODE></A> now checks for
    repeated occurrences of variable names when opening files as
    &quot;new&quot; or &quot;unknown&quot;, leading to more meaningful
    error messages than those which would otherwise come from netCDF.
    <P>
    The virtual-mode part of the
    <A HREF = "INTERP3.html"><CODE>interp3()</CODE></A> system has been
    re-written to eliminate a bug which occurs forPVM-based
    &quot;virtual&quot; files (netCDF file behavior is unaffected).
    <P>
    New program <CODE>m3interp</CODE> is similar in capabilities to
    <A HREF = "M3CPLE.html"><CODE>m3cple</CODE></A> but in addition does
    time-interpolation to a potentially higher-resolution time step
    sequence.  (This program has been moved from <CODE>iotests</CODE>
    directory to  <CODE>m3tools</CODE>.)
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug042004">
     Bug fix in <CODE>currstepc()</CODE>
</A></H2>

    August&nbsp;4, 2004:
    <P>
    <A HREF = "CURRSTEP.html"><CODE>currstepc()</CODE></A> was
    <STRONG>wrong</STRONG> -- I found the bug
    during attempt to rationalize/re-engineer the structure of PAVE.
    The previous version would almost certainly have caused a seg-fault.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul302004">
     Bug fix in <CODE>M3COMBO</CODE>
</A></H2>

    July&nbsp;30, 2004:
    <P>
    M. Talat Odman of Georgia Tech points out a bug in
    <A HREF="M3COMBO.html"><CODE>M3COMBO</CODE></A>:
    the first term in the linear combinations was wrong for
    multi-variable <CODE>M3COMBO</CODE> runs.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul262004">
     Bug fixes in <CODE>M3MSG2</CODE> and <CODE>UNGRIDB</CODE>
</A></H2>

    July&nbsp;26, 2004:
    <P>
    Catherine Seppanen of UNC-CEP points out a bug in <A HREF="UNGRID.html">
    <CODE>UNGRIDB</CODE></A>:  several clauses of the form
    <PRE>
    ELSE IF ( C .GE. NCOLS - 1 ) THEN !  c right of grid
    </PRE>
    should instead be
    <PRE>
    ELSE IF ( C .GT. NCOLS - 1 ) THEN !  c right of grid
    </PRE>
    The result of the bug was an inappropriate extend-by-constant
    computation for the last (N-S) column of the horizontal grid.
    <P>

    <A HREF="M3MESG.html"><CODE>M3MESG</CODE> and <CODE>M3MSG2</CODE></A>
    had an argument-mismatch problem if they had to call worker routine
    <CODE>INITLOG3</CODE> (which would occur if they were called prior
    to calling<A HREF="INIT3.html"><CODE>INIT3</CODE></A>; this has been
    fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may252004">
     Message fix in <CODE>MTXCALC</CODE>
</A></H2>

    May&nbsp;25, 2004:
    <P>
    Luca Delle Monache of the Atmospheric Science Programme at the
    University of British Columbia points out that the warning message
    for unsupported coordinate system types was incorrect in program
    <A HREF="MTXCALC.html"><CODE>MTXCALC</CODE></A>.  This is now fixed
    in the <A HREF = "ioapi-3.0.tar.gz">I/O&nbsp;API Version&nbsp;3
    download</A>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may172004">
    I/O&nbsp;API Version&nbsp;3.0 Pre-Release&nbsp;2
</A></H2>

    May&nbsp;17, 2004:
    <P>
    David Wong of SAIC characterized a bug in the <CODE>BINFIL3</CODE>
    version of <VAR>XTRACT3()</VAR>, which is now fixed.  There was
    also an over-dimensioning of the <VAR>malloc()</VAR>ed input
    buffer in that routine, now corrected.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "ver30">
    I/O&nbsp;API Version&nbsp;3.0 Pre-Release&nbsp;1
</A></H2>

    May&nbsp;11, 2004:
    <P>
    I/O&nbsp;API Version&nbsp;3.0 is <A HREF="ioapi-3.0.tar.gz">now
    available</A> for final user testing. Among its features are the
    following:
    <UL>
        <LI>  New/improved build-system with a new ew top-level
              <VAR>Makefile</VAR> which allows one to build various
              configurations of the entire (I/O&nbsp;API +
              <VAR>m3tools</VAR>) system with one <VAR>make</VAR> command.
              <P>
        <LI>  More complete WRF support
              <UL>
                  <LI>  File and variable name argumentss are now
                        declared <CODE>CHARACTER*(*)</CODE> with a
                        maximum length of 16, instead of being
                        fixed-length <CODE>CHARACTER*16)</CODE>.
                        (This is still not fully compatible with WRF,
                        which uses a maximum length of 32...)
                  <LI>  Fortran <CODE>INCLUDE</CODE>-files are now in the
                        ISO-suggested &quot;hybrid format&quot; (see
                        below).
              </UL>
              <P>
        <LI>  <CODE>INCLUDE</CODE> files are now safe for both
              fixed-form (F77-style) and free-form (F90-style)
              source code format:    line continuations have
              <EM>two</EM> ampersands, one in column&nbsp;73 (where it
              is not visible to F77-style compilation, and one in
              column&nbsp;6, where it is the first non-blank character
              in the line.
              <P>
        <LI>  New script <CODE>fixed_src.csh</CODE> and build
              target <CODE>make&nbsp;fixed_src</CODE> to deal with
              <CODE>INCLUDE</CODE> files for nonstandard CMAQ fixed-132
              source code form.
              <P>
        <LI>  A new &quot;native-binary I/O&quot; (<CODE>BINFIL3</CODE>)
              lower layer, in addition to the current netCDF,
              <CODE>BUFFERED</CODE>,  <CODE>VIRTUAL</CODE>, and
              <CODE>FILE-LIST</CODE> lower layers.  This is the
              least-tested part of the code, and is primarily intended for
              use with ETA/CMAQ at NOAA/NCEP, where the departmental
              politics prevents the existence of <VAR>libnetcdf.a</VAR>
              on any NCEP computer system.
              <P>
        <LI>  A more thorough-going treatment of Fortran/C interface
              type-matching, to deal with portability to platforms
              where one or more of the following do not occur:
              <UL>
                  <LI>  Fortran <CODE>REAL</CODE> is not
                        C&nbsp;<CODE>float</CODE>
                  <LI>  Fortran <CODE>INTEGER</CODE> is not
                        C&nbsp;<CODE>int</CODE>
                  <LI>  Fortran <CODE>CHARACTER</CODE> string length
                        type is not C&nbsp;<CODE>int</CODE>
              </UL>
              <P>
        <LI>  Support for additional compiler/OS combinations, including
              Intel Fortran and C for both <CODE>Linux2_x86</CODE> and
              <CODE>Linux2_ia64</CODE>, as well as the new <VAR>g95</VAR>
              GNU Fortran-95 compiler for <CODE>Linux2_x86</CODE> (see
              URL <A HREF="http://www.g95.org/">http://www.g95.org/</A>)
              <P>
        <LI>  Various new routines, including
              <A HREF="M3MESG.html"><CODE>M3PARAG</CODE></A>,
              <A HREF="M3MESG.html"><CODE>M3FLUSH</CODE></A>,
              <A HREF="IOPARMS3.html"><CODE>IOPARMS3</CODE></A>
              <A HREF="GET_ENDIAN.html"><CODE>GET_ENDIAN</CODE></A>
              with corresponding parameters <CODE>LITTLE_ENDIAN</CODE>,
              <CODE>BIG_ENDIAN</CODE>, and  <CODE>PDP_ENDIAN</CODE> in
              <A HREF = "INCLUDE.html#parms"><CODE>PARMS3.EXT</CODE>
              and <CODE>parms3.h</CODE></A>
              <P>
        <LI>  Messaging routines
              <A HREF="M3MESG.html"><CODE>M3MESG and M3MSG2</CODE></A>,
              <A HREF="M3WARN.html"><CODE>M3WARN</CODE></A>, and
              <A HREF="M3EXIT.html"><CODE>M3EXIT</CODE></A>, have been
              modified to get around problems with SGI compilers that
              were causing duplicate copies of log output on SGIs.
              <P>
        <LI>  Improved OpenMP thread-safety.
              <P>
        <LI>  The tar-file naming scheme now matches GNU standards.
              <P>
    </UL>

    <P>
    Documentation for I/O&nbsp;API Version&nbsp;3 continues to be in
    preparation.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may042004">
    New <CODE>Makefile</CODE>s  for I/O&nbsp;API version&nbsp;2.2;
    beta availability for I/O&nbsp;API version&nbsp;3.
</A></H2>

    May&nbsp;4, 2004:
    <P>
    In the retrofitting of <CODE>M3PARAG, M3FLUSH</CODE>, etc., into
    I/O&nbsp;API Version&nbsp;2.2, I failed to update the
    <CODE>Makefile</CODE>s  to match.  This error has now been corrected
    for <A HREF = "ioapi_22.tar.gz">the new download tar-file.</A>
    <P>

    The beta release of I/O&nbsp;API Version&nbsp;3,
    <A HREF = "#oct17">as described below</A> is now
    <A HREF = "ioapi-3.0.tar.gz">available for download.</A>
    <P>
    Further documentation for I/O&nbsp;API Version&nbsp;3 is in
    preparation.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may01">
    New subroutines <CODE>M3PARAG, M3FLUSH</CODE>
</A></H2>

    May&nbsp;1, 2004:
    <P>
    New subroutine <A HREF="M3MESG.html"><CODE>M3PARAG</CODE></A>
    (&quot;M3-paragraph&quot;) allows the caller to write multi-line
    messages (in a thread-safe manner) to the log.
    <P>

    New subroutine <A HREF="M3MESG.html"><CODE>M3FLUSH</CODE></A>
    allows the caller to flush a specified Fortran file to disk.
    This routine is useful for dealing with portability problems due to
    the fact that various operating system/Fortran compiler
    combinations define <CODE>FLUSH</CODE> inconsistently.
    <P>

    Subroutines <CODE>M3MESG, M3WARN, M3EXIT,</CODE> and
    <CODE>M3ERR</CODE> have been re-worked to enhance OpenMP
    thread-safety.    (Actually, all of these except <CODE>M3WARN,
    M3EXIT,</CODE>and <CODE>M3ERR</CODE> are <CODE>ENTRY</CODE>s to
    the nified message-treatment now implemented in
    <CODE>m3msg2.F</CODE>.)
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr162004">
    New subroutine <CODE>IOPARMS3</CODE>
</A></H2>

    April&nbsp;16, 2004:
    <P>
    New subroutine <A HREF="IOPARMS3.html"><CODE>IOPARMS3</CODE></A>
    allows for run-time checks in model-level code, to check the
    I/O&nbsp;API dimensioning parameters from INCLUDE-file
    <A HREF = "INCLUDE.html#parms"><CODE>PARMS3.EXT</CODE></A> being
    used to build the model match those used to build the
    <VAR>libioapi.a</VAR>  being linked against.   This is made the
    more necessary by the tendency of some among the SMOKE emissions
    modeling community to change dimensioning parameters in
    <CODE>PARMS3.EXT</CODE> and not simultaneously update the
    <CODE>INCLUDE</CODE>-files used for building SMOKE itself.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mar302004">
    Bug-fix to subroutines <CODE>LAMBERT</CODE>; enhancements to
    <CODE>CKFILE3</CODE>, and <CODE>CKDESC3</CODE>
</A></H2>

    March&nbsp;30, 2004:
    <P>
    Eric&nbsp;Giroux of the National Research Council of Canada
    contributes a bug-fix and code enhancements made by his colleague
    Dazhong&nbsp;Yin:
    <UL>
        <LI>  bug-fix to routine <CODE>LAMBERT</CODE>, dealing with
              conversions from polar sterographic to Lat-Lon coordinates.
        <LI>  enhancements to <CODE>CKFILE3</CODE>, and <CODE>CKDESC3</CODE>
              to provide appropriate &quot;sanity checking&quot; to file
              descriptions, when the underlying coordinate system is
              polar sterographic.
    </UL>

    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dec022004">
    Bug-fix to <CODE>M3STAT</CODE>
</A></H2>

    December&nbsp;2, 2003:
    <P>
    There were two problems with <CODE>M3STAT</CODE>: one serious,
    the other less so:
    <UL>
        <LI>  For single-variable boundary files
              (<CODE>FTYPE3D=BNDARY3</CODE>), the program did not set
              local variable <CODE>SIZE</CODE> correctly, leading to
              segmentation faults when the worker routine tried to use
              <CODE>SIZE</CODE> as a dimension for the input buffer.
              <BR><EM>Fixed.</EM>
              <P>
        <LI>  When run without command-line arguments, the program
              did not accept <EM><CODE>NONE</CODE></EM> as the logical
              name for the <EM><CODE>REPORT</CODE></EM> file, so that
              the program would generate output to the log file or
              screen.
              <BR><EM>Fixed.</EM>
              <P>
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "oct172003">
    <CODE>GDTYP=STEGRD3</CODE> checking; Type-portability, I/O&nbsp;API
    Version&nbsp;3
</A></H2>

    October&nbsp;17, 2003:
    <P>
    Eric Giroux points out that the treatment in <CODE>CKDESC()</CODE>
    for map projection parameter <CODE>PROJ_GAMMA</CODE> for polar
    sterographic grids (<CODE>GDTYP=STEGRD3</CODE>) is incorrect:
    this parameter should have been ignored, instead of being checked
    against the range [-180,180]. <EM>Fixed in the new 2.2 release for
    Oct.&nbsp;17.</EM>
    <P>

    David Wong points out that <CODE>ENVREAL</CODE> does not work
    correctly on the Cray T3E.  A correct fix for this problem involves
    the use throughout of <CODE>typedef FREAL</CODE> and of
    type-casts back and forth between <CODE>FREAL</CODE> and
    <CODE>float</CODE>.  <EM>Stopgap-fix in the new 2.2 release for
    Oct.&nbsp;17; this will be treated more carefully in the upcoming
    I/O&nbsp;API Version&nbsp;3 (below)</EM>
    <P>

    I/O&nbsp;API Version&nbsp;3 is now under development.  Among its
    features will be the following:
    <UL>
        <LI>  More complete WRF support.
        <LI>  <CODE>INCLUDE</CODE> files are now safe for both
              fixed-form (F77-style) and free-form (F90-style)
              source code format.
        <LI>  New script <CODE>fixed_src.csh</CODE> and build
              target <CODE>make&nbsp;fixed_src</CODE> to deal with
              <CODE>INCLUDE</CODE> files for nonstandard CMAQ fixed-132
              source code form.
        <LI>  A new &quot;native-binary I/O&quot; (<CODE>BINFIL3</CODE>)
              lower layer, in addition to the current netCDF,
              <CODE>BUFFERED</CODE>,  <CODE>VIRTUAL</CODE>, and
              <CODE>FILE-LIST</CODE> lower layers.
        <LI>  A more thorough-going treatment of Fortran/C interface
              type-matching, to deal with platforms where one or more
              of the following do not occur:
              <UL>
                  <LI>  Fortran <CODE>REAL</CODE> is not
                        C&nbsp;<CODE>float</CODE>
                  <LI>  Fortran <CODE>INTEGER</CODE> is not
                        C&nbsp;<CODE>int</CODE>
                  <LI>  Fortran <CODE>CHARACTER</CODE> string length
                        type is not C&nbsp;<CODE>int</CODE>
              </UL>
    </UL>
    For more information, contact the author,<BR>
    <A HREF = "mailto:carlie.coats@baronams.com"> <ADDRESS>
          Carlie J. Coats, Jr. <BR>
          carlie.coats@baronams.com  </ADDRESS> </A>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "aug202003">
    <CODE>Makeinclude.OSF1</CODE> enhancements
</A></H2>

    August&nbsp;20, 2003:
    <P>
    Jinyou Liang, of the California Air Resources Board, suggests the
    following additions to <CODE>Makeinclude.OSF1</CODE>, for making the
    parallel version of the I/O&nbsp;API on Alpha OSF1 systems:
    <DL>
        <DT> Add to <CODE>FOPTFLAGS</CODE>:
        <DD> <CODE>-arch host -tune host</CODE>
        <DT> Add to <CODE>OMPFLAGS</CODE>:
        <DD> <CODE>-omp</CODE>
        <DT> Add to <CODE>OMPLIBS</CODE>:
        <DD> <CODE>-omp</CODE>
    </DL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jul092003">
    Compiler-Bug Report: IRIX F90 Version 7.4
</A></H2>

    July&nbsp;9, 2003:
    <P>
    Conditional-compilation for the I/O&nbsp;API now takes care of
    the fact that netCDF open-flag <CODE>NF_SHARE</CODE> is not
    implemented in netCDF for CRAYs.  This affects only users who
    have more than one program simultaneously accessing the files.
    These users can still share files safely if both reader and writer
    processes <A HREF="BUFFERED.html#vol">declare the shared file
    to be &quot;volatile&quot;</A>.
    <P>

    In the process of doing the May&nbsp;19 and June&nbsp;5 bugfixes
    and enhancements, an OpenMP critical-section deadlock related to
    <CODE>INIT3()</CODE> was created in various routines.  The critical
    sections related to <CODE>INIT3()</CODE> have now been re-organized
    in a cleaner, more consistent fashion, avoiding this deadlock.
    Affected routines are:
    <BLOCKQUOTE><CODE>
        xtract3.f<BR>
        write4d.F<BR>
        write3.F<BR>
        wrdict3.f<BR>
        wratt3.f<BR>
        sync3.f<BR>
        snoop3.F<BR>
        read3.F<BR>
        read4d.F<BR>
        read3.1.F<BR>
        rdatt3.f<BR>
        promptmfile.f<BR>
        open3.F<BR>
        m3warn.f<BR>
        kfwrite.F<BR>
        kfread.F<BR>
        kfindx.f<BR>
        interp3.F<BR>
        inqatt3.f<BR>
        getffile.F<BR>
        getefile.F<BR>
        getdfile.F<BR>
        flush3.f<BR>
        desc3.F<BR>
        ddtvar3.F<BR>
        ckgeom.f<BR>
        check3.F<BR>
        ll2utm.f<BR>
        init3.F<BR>
        m3abort.F<BR>
    </CODE></BLOCKQUOTE>
    <P>

    SGI IRIX F90 Version 7.4 does not follow industry-standard practice
    for ensuring that <CODE>BLOCK&nbsp;DATA&nbsp;INITBLK3</CODE> is
    correctly linked in, to initialize I/O&nbsp;API internal data
    structures.  Among other things, this causes problems with a
    user-set<A HREF="ENVIRONMENT.html">LOGFILE</A>;  for more details,
    <A HREF="ERRORS.html#other">look here.</A>  I have submitted this
    problem to SGI in an error report.<BR>
    --CJC
    <EM>
    <STRONG>Note, Spring 2004:</STRONG>  SGI contacted me about this,
    and have fixed it for the 7.4.1 and later compilers.
    </EM>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "jun052003">
    Enhancements for IRIX F90
</A></H2>

    June&nbsp;5, 2003:
    <P>
    When standard output is re-directed to a log file, SGI
    IRIX6&nbsp;F90 Version&nbsp;7.4 has anomalies in the way standard
    output is flushed to a file.  Routines <CODE>GETDBLE, GETMENU,
    GETNUM, GETREAL, GETSTR, M3MESG, M3MSG2, PROMPTDFILE, PROMPTFFILE,
    PROMTMFILE, PROMPTGRID </CODE> have been enhanced to attempt to
    deal with these anomalies; additionally, new entry point
    <CODE>M3FLUSH(&nbsp;INTEGER&nbsp;IUNIT&nbsp;)</CODE> for
    <CODE>M3MSG2()</CODE>has been added, for user-code to use for
    flushing its standard output, in order to similarly avoid these
    anomalies.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may192003">
    Minor BugFixes/Enhancements for BUFFERED Files.
</A></H2>

    May&nbsp;19, 2003:
    <P>
    There were errors in <CODE>OPEN3()</CODE>, <CODE>XTRACT3()</CODE>,
    and <CODE>RDBUF3()</CODE> dealing with the return data-types of
    worker routines when these routines were called on virtual files of
    type <P><CODE>BUFFERED</CODE>.  There was also a format-mismatch
    error in a warning message in <CODE>OPNKF3()</CODE>  These were
    discovered, and fixes provided by David Wong, US&nbsp;EPA.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may152003">
    Minor BugFixes/Enhancements
</A></H2>

    May&nbsp;15, 2003:
    <P>
    The May&nbsp;8,&nbsp;2003 source-distribution tar-file was
    accidentally constructed using full path-names to specify the
    directories, rather than relative path names.  This was corrected;
    moreover, <VAR>make</VAR>-target <CODE>gtar</CODE> was added to
    the <VAR>Makefile</VAR> so that the tar-file building process
    would be both correct and automated.
    <P>

    Function <CODE>CRLF()</CODE>, that had originated in SMOKE and
    that is used (afaik) only in that model, was modified so that
    it generates correct C-style line terminators for both UNIX and
    Windows (instead of only for Windows, as its predecessor did...)
    [UNIX traditionally uses the ASCII line-feed character as a line
    terminator; Windows uses a line-feed/carriage-return pair;
    Mac&nbsp;OS (not yet supported&nbsp;;-(&nbsp;) uses a
    carriage-return/line-feed pair.]  Note that the insertion of C-style
    line terminators into the middle of Fortran strings for carriage
    control with Fortran I/O is <STRONG>not</STRONG> standard-conforming
    and in fact <EM>will not work on some systems</EM> (e.g., VMS, Crays).
    <P>

    Function <CODE>XTRACT3()</CODE> was modified to use time-step-check
    routine <CODE>RDTFLAG()</CODE> to bring it into conformity with the
    rest of the Version&nbsp;2.2 I/O&nbsp;API input routines (which no
    longer have in-lined code for time step availability-checking,
    but use that routine instead).
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "may082003">
    Enhancement to allow for OpenMP-parallel <CODE>INTERP3()</CODE>
    and/or <CODE>KFOPEN()</CODE> on files not yet opened<BR>
    New <VAR>make</VAR>-target <CODE>nametest</CODE> checks
    linker-compatibility for <CODE>libioapi.a</CODE> and
    <CODE>libnetcdf.a</CODE><BR>
    New script <CODE>nm_test.csh</CODE> for testing linker-name
    compatibility.
</A></H2>


    May&nbsp;8, 2003:
    <P>
    Enhancement allows for more relaxed/less careful model
    implementation, and removes the possibilities of deadlocks
    on opening multiple virtual files in parallel.
    <P>

    <VAR>make nametest</VAR> assumes that <CODE>libioapi.a</CODE> is
    built, and that <CODE>libnetcdf.a</CODE> has been correctly placed
    in <CODE>${OBJDIR}</CODE>, and then checks that the compilers used
    to generate these two libraries use compatible name-mangling
    systems (e.g., the same number of trailing underscores, if any).
    <P>


    <VAR>make all</VAR> will run <VAR>make nametest</VAR> and report
    the results to the screen.
    <P>

    <VAR>nm_test.csh &lt;file1&gt; &lt;file2&gt; &lt;name&gt;</VAR>
    may be used to test that the compiler systems used to build
    <VAR>file1</VAR> and <VAR>file2 </VAR> generate the same linker
    symbol <VAR>name</VAR>.  Note that <VAR>file1</VAR> and
    <VAR>file2</VAR> should be object, executable, or archive
    (<CODE>&quot;.a&quot;</CODE>) files.  For testing against
    <CODE>libnetcdf.a</CODE>, a good symbol is <CODE>nf_open</CODE>;
    for testing against <CODE>libioapi.a</CODE>, a good symbol is
    <CODE>open3</CODE> (or possibly the all-caps versions of these
    names).
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "apr142003">
    Bugfix for  <CODE>SETTRM()</CODE>; and new spheroid-selection
    routines <CODE>SETSPHERE()</CODE>, <CODE>INITSPHERES()</CODE>,
    and <CODE>SPHEREDAT()</CODE>. <EM>Apr.&nbsp;14,&nbsp;2003</EM>
</A></H2>

    April&nbsp;14, 2003:
    <P>


    <A HREF = "SETSPHERE.html">These routines</A> allow the user to
    select a non-default sphere or spheroid for use with the  I/O&nbsp;
    wrappers (<CODE>LAM2LL()</CODE>, <CODE>LL2UTM()</CODE>,
    <CODE>POL2TRM()</CODE>, etc.) for <CODE>GCTP()</CODE>, either by means
    of environment variables or explicit subroutine calls.
    <P>

    Code for <CODE>SETTERM()</CODE> had an incorrect initializations for
    <CODE>XCENT</CODE> and <CODE>YCENT</CODE>; this would silently
    generate corrupt results.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "feb03">
    Bugfix for I/O&nbsp;API Version&nbsp;2.2 <CODE>rdatt3c()</CODE>,
    <CODE>wratt3c()</CODE>, <CODE>BUFINTX</CODE>, and
    <CODE>BUFINTXD</CODE>:
    <EM>Feb.&nbsp;18,&nbsp;2003</EM>
</A></H2>


    These bugs were discovered by David Wong, US EPA.
    <P>

    Code for Cray versions of <CODE>rdatt3c()</CODE> and
    <CODE>wratt3c()</CODE> was incorrect (backwards test of whether the
    variable was of type <CODE>CHARACTER</CODE> or not, then incorrect
    Cray-specific treatment of file, variable, and attribute-names.
    <P>

    Code for <CODE>BUFINTX</CODE> and  <CODE>BUFINTXD</CODE> had
    incorrect pointer-initializations; this would silently generate
    corrupt results.
    <P>

    Code for the Cray version of public routine <CODE>SETENVVAR()</CODE>
    and private routine  <CODE>lentrim()</CODE> had syntax bugs, that
    are now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "tprocb">
    Bugfix for I/O&nbsp;API Version&nbsp;2.2 program <CODE>M3TPROC</CODE>:
    <EM>Feb.&nbsp;7,&nbsp;2003</EM>
</A></H2>

    This bug was found by Eric Giroux of the Institute for Chemical
    Process and Environmental Technology, National Research Council,
    Canada.  He also aided in testing the solution as implemented.
    <P>
    Run-time memory allocation of internal work arrays was handled
    incorrectly when there were mixed output-lists of
    <CODE>M3REAL</CODE> and <CODE>M3INT</CODE> variables with
    <CODE>M3DBLE</CODE> variables.  New code uses <VAR>F90
    &quot;auto&quot;</VAR> work arrays, and completely avoids the
    problem.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "tproc">
    Bugfix for I/O&nbsp;API Version&nbsp;2.2 program <CODE>M3TPROC</CODE>:
    <EM>Nov.&nbsp;14,&nbsp;2002</EM>
</A></H2>

    The previous edition would silently generate garbage for variables
    of type <CODE>INTEGER</CODE> or <CODE>DOUBLE</CODE>, or for files
    not of the types listed above. The new version handles all three
    types of variables correctly, and generates meaniangful error
    messages for the inappropriate file types.  The new version is much
    cleaner in its coding, but for Fortran-90 only.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "restart">
    Corrected handling of circular-buffer/RESTART files in
    <CODE>READ3(), WRITE3(), INTERP3()</CODE>, and
    <CODE>DDTVAR3()</CODE>:
    <EM>Aug.&nbsp;29,&nbsp;2002</EM>
</A></H2>

    There was an error in the handling of record numbers for
    I/O&nbsp;API <A HREF="VBLE.html#timestruct">circular-buffer</A> (or
    &quot;restart&quot;) files.  This bug was discovered by Dr. Prakash
    Karamchandani at AER, who suggested the correct bug-fix as well.
    <P>
    (Circular-buffer files keep two time steps, the &quot;even&quot; and
    the &quot;odd&quot; time step; this allows the maintenance of what
    would otherwise be huge model-restart files without consuming
    excessive disk space.  Negative values for time-step attribute
    <CODE>TSTEP3D</CODE> are used to indicate to <CODE>OPEN3()</CODE>
    that the requested file to be created is a circular-buffer file...)
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "dstbug">
    Bugfix in function <CODE>ISDSTIME()</CODE> and programs
    <CODE>GREGDATE</CODE> and <CODE>JULDATE</CODE>:
    <EM>July&nbsp;9,&nbsp;2002</EM>
</A></H2>

    There was an error in the Julian date for October&nbsp;31, that
    caused <CODE>ISDSTIME()</CODE>, .<CODE>GREGDATE</CODE> and
    <CODE>JULDATE</CODE> to think that Daylight Savings Time ended
    on the last Sunday in September instead of the last Sunday in
    October.  This error is now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "lambug">
    Bugfix in <CODE>SETLAM()</CODE>:  <EM>June&nbsp;7,&nbsp;2002</EM>
</A></H2>

    There was an initialization problem in <CODE>SETLAM()</CODE>
    that caused irregular errors, particularly when called from
    C.  This error is now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "setbug">
    Bugfix in <CODE>SETENVVAR()</CODE>:  <EM>May 10,&nbsp;2002</EM>
</A></H2>

    There was an off-by-one problem in <CODE>SETENVVAR()</CODE>
    that caused irregular errors in reading the resulting environment
    variables.  This error is now fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "ver22">
    Version&nbsp;2.2:  <EM>Due May 2002</EM>
</A></H2>

    The following set of enhancements does not break backward
    compatibility -- either at the source, link, or data levels.
    There is an additional round of enhancements planned for
    I/O&nbsp;API Version&nbsp;3 to support the
    <A HREF="http://wrf-model.org/">Weather Research and Forecasting
    Meteorology and  Atmospheric Chemistry (WRF; WRF-CHEM) Models</A>;
    this latter version (to appear 3rd quarter,&nbsp;2002) will break source
    and link compatibility to some degree.
    <DL>
        <DT> <STRONG>CMAQ Enhancements</STRONG>
        <DD> Integration into the main development path of work by
            Jeff Young and David Wong at EPA ORD:
             <DL>
                 <DT>  <STRONG><A HREF = "INTERP3.html">INTERPX</A></STRONG>
                 <DD>  time-interpolation for a window into the grid
                       defined by column, row, and layer subranges.
                       <P>
                 <DT>  <STRONG><A HREF = "SETENV.html">SETENV</A>
                       functionality</STRONG>
                 <DD>  Allows the setting of environment variables
                       from within model code.  This will also wind up
                       supporting <CODE>NAMELIST</CODE>s in the
                       follow-on WRFIO implementation using
                       I/O&nbsp;API Version&nbsp;3
                       <P>
                 <DT>  <STRONG>Support for T3E-style parallel I/O</STRONG>
                 <DD>  Support for message-passing distributed-memory
                       CMAQ on T3E/Fortran-90 (and similar platforms).
                       <P>
                 <DT>  <STRONG>Minor Restructuring</STRONG>
                 <DD>  There has been minor restructuring to improve
                       the decoupling between the interface layer and
                       the data storage/retrieval layer, in order more
                       easily to support additional lower layer
                       implementations (such as an MPI coupling mode).
                       <P>
                 <DT>  <STRONG><A HREF = "INTERP3.html">tbd</A></STRONG>
                 <DD>  ...
                       <P>
             </DL>
             <P>

        <DT> <STRONG>Enhancements for the SMOKE emissions model</STRONG>
        <DD> Support for input file-lists for <CODE>READ3()</CODE>
             and <CODE>INTERP3()</CODE>:
             <BLOCKQUOTE><CODE>
             setenv foo "LIST:name<SUB>1</SUB>,...,name<SUB>n</SUB><BR>
             setenv name<SUB>1</SUB> &lt;path&gt;<BR>
             ...<BR>
             setenv name<SUB>n</SUB> &lt;path&gt;<BR>
             </CODE></BLOCKQUOTE>
             indicates that <CODE>foo</CODE> will be treated as a
             concatenation of files <CODE>name<SUB>1</SUB>, ...
             name<SUB>n</SUB></CODE> for <CODE>READ3()</CODE> and
             <CODE>INTERP3()</CODE>.  The files must have the same
             header structure, except for the time step structure,
             which must be compatible (identical time step, and all
             starting dates and times must be valid time steps for
             the time step sequence of the chronologically-earliest
             file).  <CODE>READ3()</CODE> and <CODE>INTERP3()</CODE>
             take their data from the first listed file that has the
             relevant data (in case the files overlap).
             <P>

             This enhancement will also make it possible to get around
             the 2GB limits on input file sizes on various 32-bit
             platforms.
             <P>

        <DT> <STRONG><A HREF = "WRF_IOAPI.html">WRF Enhancements</A></STRONG>
        <DD> Routines <A HREF="INQATT3.html">INQATT3()</A>,
             <A HREF="RDATT3.html">RDATT3()</A>, and
             <A HREF="WRATT3.html">WRATT3()</A> support the
             specification of additional per-file and per-variable
             metadata attributes beyond the standard list, found in
             the <CODE>FDESC COMMON</CODE>s and accessed by the
             <CODE>DESC3()</CODE> routine.<BR>
             Affects <CODE>INCLUDE</CODE>-files <CODE>IODECL3.EXT</CODE>
             and <CODE>iodecl3.h</CODE>.
             <P>

             The I/O routines has been re-coded so that it is only
             required that <EM>trimmed lengths</EM> (i.e., length
             exclusive of trailing blanks) of
             <A HREF = "LOGICALS.html">logical names</A> and
             variable-names must not exceed <CODE>NAMELEN3</CODE>=16
             (e.g, <CODE>CHARACTER(LEN=24)
             FOO&nbsp;=&nbsp;'v23456789012345&nbsp;&nbsp;&nbsp;'</CODE>
             will be legal since its trimmed length is 15, it number of
             nonblank characters (which are then followed by 9 blanks
             to make out its total declared length of 24).
             <P>

             WRF eventually needs a number of additional enhancements
             that will break source, link, and backwards data
             compatibility with the current I/O&nbsp;API.  These are
             being considered for an eventual I/O&nbsp;API
             Version&nbsp;3, particularly:
             <UL>
                 <LI>  32-character names
                 <LI>  millisecond-accurate date&time functionality
                       (with accompanying interface changes to
                       <CODE>READ3()</CODE>, <CODE>WRITE3()</CODE>,
                       etc.
                 <LI>  New WRF-specific vertical coordinate types
                 <LI>  Built-in support for WRF &quot;staggered&quot;
                       variables.
                 <LI>  Support in <CODE>INTERP3()</CODE> (and
                       <CODE>DDTVAR3()</CODE> for double precision
                       variables.
             </UL>
             <P>

        <DT> <STRONG>F9x Enhancements</STRONG>
        <DD> <UL>
             <LI> <STRONG>INCLUDE-files</STRONG> have been modified
                  so that they are compatible with both the free and
                  the fixed F9x source forms.  Among other things, this
                  supports new development for CMAQ, SMOKE, and WRF.
                  Script <A HREF="fix_src.csh"><CODE>fix_src.csh</CODE></A>
                  is available for those users (e.g., CMAQ) who demand
                  nonstandard 132-column fixed F90 source format;
                  <CODE>Makefile</CODE> goal <CODE>fixed_src</CODE>
                  constructs nonstandard 132-column INCLUDE-files in
                  a user-configurable directory.
                  <P>
             <LI> I/O&nbsp;API <STRONG>Data type
                  <A HREF="DATATYPES.html#profil"><CODE>PROFIL3</CODE></A>
                  </STRONG> now uses  <CODE>REAL</CODE>
                  position-variables in each time step record,
                  instead of <CODE>REAL*8</CODE>.
             </UL>
             <P>


        <DT> <STRONG>Global Climate I/O&nbsp;API Integration</STRONG>
        <DD> The Global Climate I/O&nbsp;API is a variant of the
             I/O&nbsp;lAPI intended for use in global clmate modeling,
             where some modelers work in terms of a 360-day year having
             twelve months of exactly 30 days each.  The library
             produced &quot;lives&quot; in a directory of its own, that
             has  a <CODE>_360</CODE> suffix (so is called
             <CODE><STRONG>io_360</STRONG></CODE> e.g.,
             <CODE>Linux2_alpha_360</CODE>  For Version&nbsp;2.2 of the
             I/O&nbsp;API, we will unify the code of this version with
             the code for the main branch, so that one may obtain the
             <CODE>io_360</CODE> by <CODE>#define</CODE>ing the
             preprocessor symbol <CODE>IO_360</CODE> as in the
             <CODE>Makefile.io_360</CODE> and using the usual build
             system.
             <P>

        <DT> <STRONG>LIST-variable Enhancements</STRONG>
        <DD> Routines <A HREF="LISTS.html"><CODE>INTLIST()</CODE>,
             <CODE>REALIST()</CODE>, and <CODE>STRLIST()</CODE></A>
             have been modified so that they accept an optional
             <CODE>LIST:</CODE> prefix for the value-list, so that
             one may set the list-value as in the following
             script-example for an <CODE>INTLIST()</CODE> list:
             <BLOCKQUOTE><CODE>
             setenv MYLIST &quot;LIST:1,24,9876,5&quot;
             </CODE></BLOCKQUOTE>
             <P>

        <DT> <STRONG>Bug-fixes</STRONG>
        <DD> <CODE>LAMBERT()</CODE> entries <CODE>SET*()</CODE> had
             a bug introduced when the extra map projections were
             added in Version&nbsp;2.1.
             <P>
             Data type <CODE>PROFIL3</CODE> had implementation errors
             which were corrected. (We finally had our first user of
             this data type, which was designed to store and retrieve
             rawinsonde profile data efficiently.)
             <P>
    </DL>
    <P>

    I/O&nbsp;API Version&nbsp;3 will support <CODE>NAMELEN3</CODE>=32
    character variable and logical names, &quot;staggered&quot;
    variables, and various other things yet to be determined, in
    support of WRF.  <STRONG>It will not be data- nor link-compatible (and
    may not be fully source-code compatible) with previous versions
    of the I/O&nbsp;API.</STRONG>  We will maintain forwards data
    compatibility (so that Version&nbsp;3 will read Version&nbsp;1 and
    Version&nbsp;2 generated files, but possibly not vice versa.
    <P>

    <STRONG>STATUS:</STRONG>  under development.  Version&nbsp;2.2 is
    due out by the end of 2Q&nbsp;2002; Version&nbsp;3 should
    appear during 2Q&nbsp;2003.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "nextime">
    bugfix in <CODE>NEXTIME()</CODE>:  Jan. 15,&nbsp;2002
</A></H2>

    It turns out that there was an algorithm error in subroutine
    <CODE>NEXTIME()</CODE> for the case of a negative time step that
    backed up the <CODE>JDATE:JTIME</CODE> argunments across a year
    boundary (e.g., stepping backwards by an hour from
    <CODE>2002001:003000</CODE> by <CODE>-10000</CODE> should yield
    <CODE>2001366:233000</CODE> but did not get the year correct.
    <P>

    <STRONG>STATUS:</STRONG>  fixed.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "ver21">
    I/O&nbsp;API Version 2.1:  <EM>December 5, 2001</EM>
</A></H2>

    There were bugs in certain warning-output formats in routines
    <A HREF = "CHKFIL3.html">CHKFIL3()</A>,
    <A HREF = "KFOPEN.html">KFOPEN()</A>,
    <A HREF = "KFINDX.html">KFINDX()</A>,
    <A HREF = "OPNLOG3.html">OPNLOG3()</A>,
    <A HREF = "SHUT3.html">SHUT3()</A>.  These bugs arose during the
    effort to make all of the I/O&nbsp;API OpenMP thread-safe.
    <A HREF = "CHECK3.html">LBLANK()</A> also had an algorithm
    fix to make it safe for (F90) zero-length strings.
    <P>

    Intel Fortran and C, and Lahey-Fujitsu Fortran  compilers for Linux
    are now supported by the <VAR>Makeinclude</VAR> system.
    <P>

    New routines <A HREF = "LISTS.html"><CODE>INTLIST()</CODE>,
    <CODE>REALLIST()</CODE>, and <CODE>STRLIST()</CODE></A> that read in
    comma-delimited-list-valued environment variables.
    <P>

    New programs for analysis, model-coupling, grid-to-grid
    transformation, etc.:
    <UL>
       <LI>  <A HREF = "M3TPROC.html" ><STRONG>M3TPROC</STRONG></A>:
             compute time period aggregates (e.g., 08:00-16:00
             gridded daily maxima) and write them to an output file
             <P>
       <LI>  <A HREF = "M3CPLE.html" ><STRONG>M3CPLE</STRONG></A>:
             copy to the same grid, or interpolate to another grid
             a time sequence of all variables from a source file
             <P>
       <LI>  <A HREF = "MTXBLEND.html" ><STRONG>MTXBLEND</STRONG></A>:
             Use a sparse-matrix file to interpolate/transform data
             from an input file to the grid of a &quot;base&quot; file
             and to merge it with data from the &quot;base&quot; file.
             <P>
       <LI>  <A HREF = "MTXBUILD.html" ><STRONG>MTXBUILD</STRONG></A>:
             Build a sparse-matrix transform file from user-supplied
             ASCII coefficient inputs.
             <P>
       <LI>  <A HREF = "MTXCALC.html" ><STRONG>MTXCALC</STRONG></A>:
             Build a grid-to-grid sparse-matrix transform file using
             a sub-sampling algorithm.
             <P>
       <LI>  <A HREF = "MTXCPLE.html" ><STRONG>MTXCPLE</STRONG></A>:
             Use a sparse-matrix file to interpolate a time sequence of
             all variables from a source file to  a target file.
             <P>
       <LI>  <A HREF = "PRESTERP.html" ><STRONG>PRESTERP</STRONG></A>:
             Interpolate from a 3-D sigma-coordinate file to a
             new 3-D pressure-coordinate file, using coefficients
             from <A HREF = "mcpl.files.html#pc3">
             PRES_CRO_3D</A> from the
             <A HREF = "mcpl.html">MCPL</A> I/O&nbsp;API
             output module for MM5.
             <P>
       <LI>  <A HREF = "SELMRG2D.html" ><STRONG>SELMRG2D</STRONG></A>:
             select multiple 2D layer/variable combinations from multiple
             gridded input files, and write result to merged 2D gridded
             output file
             <P>
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "check3">
    Bug-fix in <CODE>&nbsp;CHECK3()</CODE>, <VAR>Makefile</VAR>
</A></H2>

    There was a bug in certain warning-output formats in routine
    <A HREF = "CHECK3.html">CHECK3()</A>.  This bug arose during the
    effort to make all of the I/O&nbsp;API OpenMP thread-safe.
    <P>

    There was also a bug in the way the <VAR>Makefile</VAR> was building
    <A HREF = "GCTP.html">GCTP()</A>.  The problem is that this is
    a very old Fortran routine from the US Geological Survey, which
    requires that compile-flags be set so as to <CODE>SAVE</CODE>
    all its local variables (and there turned out to be significant
    differences how various platforms handled the matter).
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "mercs">
    More I/O&nbsp;API map projection support
</A></H2>

    Parameters have been added to INCLUDE file FDESC3.EXT for the
    following <A HREF = "GRIDS.html#horiz">horizontal map
    projection</A> types:
    <DL>
        <DT>  <STRONG>POLGRD3</STRONG><CODE> = 6</CODE>
        <DD>  Polar (secant) stereographic

        <DT>  <STRONG>EQMGRD3</STRONG>:<CODE> = 7</CODE>
        <DD>  Equatorial Mercator

        <DT>  <STRONG>TRMGRD3</STRONG><CODE> = 8</CODE>
        <DD>  Transverse Mercator

    </DL>
    The implementation of map-transformations for these is provided
    directly by USGS routine  <A HREF = "GCTP.html">GCTP</A>.
    Support for these map projection types has been put into
    the user-friendly wrapper-module <A HREF = "LAMBERT.html">LAMBERT</A>
    and into interactive map-transformation utility program
    <A HREF = "UTMTOOL.html">UTMTOOL</A>.
    <P>
    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>


<H2> <A NAME = "filchk">
    New I/O&nbsp;API routine FILCHK3
</A></H2>

    New routines
    <A HREF = "FILCHK3.html"><STRONG><CODE>FILCHK3</CODE></STRONG>
    (for Fortran) and  <STRONG><CODE>filchk3c</CODE></STRONG></A> (for
    C) provide an easy check of whether an input-file's file-type and
    dimensions match the caller's expectations, with a report to the
    program log of any mis-matches that it finds.  Typical Fortran use
    might be:
    <PRE>
    ...
    IF ( .NOT.OPEN3( 'MYFILE', FSREAD3, 'Myprogram' ) ) THEN
C              MYFILE could not be opened for read-only
        ...
    ELSE IF ( .NOT. FILCHK3( 'MYFILE',
 &amp;                       GRDDED3, NCOLS, NROWS, NLAYS, NTHIK ) THEN
C            Either the file type for 'MYFILE' was not GRIDDED, or
C            it had unexpected dimensions (see log for more details).
        ...
    END IF
    ...
    </PRE>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->



<H2> <A NAME = "tools">
    &quot;Tools&quot; Programs
</A></H2>

    In conjunction with various real-time numerical air quality
    prediction projects such as <A HREF = "http://www.baronams.com:/projects/NAQP/">NAQP</A>,
    a variety of new I/O&nbsp;API-related &quot;Tools&quot; programs
    have been developed:
    <UL>
        <LI> <A HREF = "MTXBLEND.html"><STRONG><CODE>mtxblend</CODE></STRONG></A>:
             Use a sparse-matrix linear-operator transform-file (as from
             <CODE>mtxbuild</CODE>, below) to perform a linear
             grid-to-grid transform data from an input file to a new output
             grid (general purpose linear-operator-transform tool), and
             then perform a masked merge of the result with data from
             another &quot;base&quot; file on the same grid as the
             output from the sparse-matrix transform.
             Supported output file type: GRIDDED.
             <P>
        <LI> <A HREF = "MTXBUILD.html"><STRONG><CODE>mtxbuild</CODE></STRONG></A>:
             Construct a sparse-matrix linear-operator transform-file
             (as for <CODE>mtxcple</CODE>, below) from a user-supplied
             ASCII file of coefficients.
             <P>
        <LI> <A HREF = "MTXCPLE.html"><STRONG><CODE>mtxcple</CODE></STRONG></A>:
             Use a sparse-matrix linear-operator transform-file (as from
             <CODE>mtxbuild</CODE>, above) to perform a linear
             grid-to-grid transform from an input file to a new output
             file (general purpose linear-operator-transform tool).
             Supported output file types are GRIDDED, BOUNDARY, or CUSTOM.
             <P>
        <LI> <A HREF = "M3CPLE.html"><STRONG><CODE>m3cple</CODE></STRONG></A>:
             copy to the same grid, or interpolate to another grid
             a time sequence of all variables from a source file to
             a target file, under the optional control of an
             <A HREF="BUFFERED.html#pvm">I/O&nbsp;API coupling-mode
             &quot;synch file&quot;</A>.
             <P>
        <LI> <A HREF = "SELMRG2D.html"><STRONG><CODE>selmrg2d</CODE></STRONG></A>:
             select multiple 2D layer/variable combinations from
             multiple gridded input files, and write result to merged
             2D gridded output file, e.g., for use preparing inputs to
             various &quot;canned&quot; 2-D graphics programs in
             automated web-generation, e.g., for NCSC's
             <A HREF = "http://www.baronams.com:/projects/NAQP/">Numerical Air Quality
             Prediction</A> project.
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "newvv">
    New Release Version
</A></H2>

    In cooperation with EPA, we will be releasing the new and updated
    public version&nbsp;2.0 of the I/O&nbsp;API in late Fall,&nbsp;1999.
    This version incorporates both the
    <STRONG><A HREF = "#taskp">task-parallel</A></STRONG> and the
    <STRONG><A HREF = "#coupl">coupling-mode extensions</A></STRONG>,
    as well as the <STRONG><A HREF = "#times">time series
    operations</A></STRONG>.<BR>
    <VAR>The new version is now 2.0.0c, <A HREF="AVAIL.html">available
    here.</A></VAR>
    <P>

    With this version, the source-code-level build-process uses
    <CODE>Makefile</CODE>s rather than the previous <CODE>Makeit</CODE>
    shell-scripts.  This allows much faster re-building of the library
    for small bug-fixes.
    <P>

    With this version, we will be supporting <STRONG>only
    netCDF&nbsp;3.x</STRONG>, because of the support it provides for
    synchronization during model coupling.  Please note that the
    NCAR folks accidentally incorporated a link-incompatibility
    between versions&nbsp;2.x and 3.x of netCDF in some of the &quot;magic
    numbers&quot; used to describe modes of opening files.  Note also
    that versions&nbsp;3.4 and later use different error numbers than
    version 3.3.1 and earlier.  The <A HREF="ERRORS.html">I/O&nbsp;API
    Troubleshooting Page</A> will be updated to reflect both sets
    of error numbers.  (As of 8/20/1999, the current released version
    of netCDF is 3.4, although we have been testing the new
    version&nbsp;3.5b2 in-house recently.)
    <P>

    Also with this version, the default build of the library
    <STRONG>will require linking with libpvm3.a</STRONG> for
    coupling mode support.
    <A HREF = "http://www.epm.ornl.gov:80/pvm/">PVM&nbsp;3.4</A>
    or later is required, because of the requirement for PVM
    mailboxes.
    <P>

    For some vendors, linking of serial programs will also require the
    explicit specification of an <STRONG>OpenMP run-time library</STRONG>
    as well -- on SGI's, for example, this requires an additional
    <CODE> -lmp</CODE> in the linking-step command line for serial
    programs.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "datap">
    OpenMP Task-Parallel Extensions
</A></H2>

    <A HREF="http://www.openmp.org/">OpenMP</A> is a recent standard
    for directive-based shared-memory parallel Fortran and C.  The
    Fortran and C standards were released in October, 1997 and October,
    1998, respectively; a revision of the Fortran standard is expected
    in October, 1999.  Compilers supporting the OpenMP standard are
    available for a variety of platforms, including Compaq (DEC),
    HP, IBM, Linux (both x86 and Alpha), SGI, Sun, and Win32 (95, 98,
    and NT (both x86 and Alpha)).  OpenMP supports not only the kind of
    loop-level parallelism that has long been available from a variety
    of vendors, but also task-parallelism as well.  In addition to much
    better portability, it offers much better support (critical sections,
    barriers, nested parallelism) for large projects than did the
    proprietary vendor specific directives.  We are using OpenMP Fortran
    in-house with various air quality modeling projects; with its
    <A HREF="http://www.mmm.ucar.edu/mm5/mm5-home.html">MM5 meteorology
    model</A>, NCAR is moving to OpenMP directives as of its MM5
    Version&nbsp;3.
    <P>

    We are making the I/O&nbsp;API thread-safe for OpenMP, and have been
    testing the result in various
    <A HREF="http://www.baronams.com:/projects/NAQP/">real-time air quality
    forecasting</A> and <A
    HREF="http://www.baronams.com:/projects/dashmm/">
    other meteorological</A> projects.  The basic principle is that
    <STRONG>I/O&nbsp;API calls that read or write distinct variables
    and/or distinct files may be done concurrently</STRONG> from
    OpenMP programs.  The biggest gains for model-users are with
    <CODE><A HREF="INTERP3.html">INTERP3</A></CODE> and
    <CODE><A HREF="DDTVAR3.html">DDTVAR3</A></CODE>, where the
    call involves linear algebra computations (linear interpolation or
    differencing) in addition to  I/O (which is performed sometimes--but
    not always, because of the internal double-buffering mechanisms.
    Note that I/O to/from disk is itself sequential in any case.)
    <P>

    <STRONG>Building a parallel program</STRONG> that uses an
    OpenMP-enabled <CODE>libioapi.a</CODE> generally requires
    compiler-specific parallelization directives in both the
    compile-lines and the link-lines that <VAR>make</VAR> your
    executable.  For examples, ook at your machine/compiler's
    <VAR>Makeinclude.${BIN}</VAR> for variables <CODE>OMPFLAGS</CODE>
    and<CODE>OMPLIBS</CODE> used with this build of the library
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->


<H2> <A NAME = "datap">
    Data-Parallel Extensions
</A></H2>

    For message-passing data parallel programming, our colleagues at
    EPA's Atmospheric Research and Exposure Assessment Laboratory
    (AREAL) have been constructing an extension to the I/O&nbsp;API
    which distributes gridded data for domain-decomposition data
    parallel message passing models.  Inquiries should be addressed
    to Dr.&nbsp;Jeffrey Young,
    <A HREF = "mailto:yoj@hpcc.epa.gov">yoj@hpcc.epa.gov</A>.
    <P>

    As part of the
    <A HREF = "http://www.baronams.com:/projects/ppar/index.html">Practical
    Parallel Project</A>, MCNC has developed an HPF2 implementation
    of an HPF I/O&nbsp;API module which calls the I/O&nbsp;API  and
    then re-destributes gridded or boundary data according to the
    data distribution of its caller.  Unfortunately, however, the
    IBM XL&nbsp;HPF and Portland Group HPF compilers we use support
    only their own extensions to HPF&nbsp;1.1 at this time, so we
    have had to develop revised HPF I/O&nbsp;API modules for each
    which are not fully general but which do fulfill the requirements
    of our HPF air quality and hydrology models.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "coupl">
     Parallel Extensions for Coupled Models
</A></H2>

    As part of the
    <A HREF = "http://www.baronams.com:/projects/ppar/index.html">Practical
    Parallel Project</A>, MCNC has developed an extended
    <STRONG>Model-Coupling Mode</STRONG> for the I/O&nbsp;API.  This mode,
    based upon <A HREF = "http://www.epm.ornl.gov:80/pvm/">PVM&nbsp;3.4</A>
    mailboxes, allows the user to specify in
    the run-script whether &quot;file&quot; means a physical file on
    disk or a PVM mailbox-based communications channel.  In the latter
    case, the I/O&nbsp;API schedules the various processes in a coupled
    model on the basis of data availability:  requests for data which
    has not yet been written put the reading process to sleep until the
    data arrives, at which point the reader is awakened and given the
    data it requested.  The one requirement is that the programmers
    structure reads and writes so as to avoid deadlocks (two or more
    models, each asleep while waiting for input from the other).
    <P>

    This has several advantages from the model-engineering point of
    view:
    <UL>
        <LI>  The same programs work unchanged both in standalone mode
              (reading input from files and writing output to files)
              and in coupled-model mode (reading and writing selected
              inputs or outputs to/from PVM mailboxes).

        <LI>  Readers and writers do not need to know about each other
              in detail.  In particular, any reader only needs to know
              that <EM>some</EM> writer will put the variables it needs
              into the mailbox.  Writers don't care whether readers
              even exist or not.

        <LI>  One writer can supply multiple readers without special
              programming (and without needing to know who they are).
              For example, in a coupled system with the MM5/MCIP
              meteorology model, the SMOKE emissions model, and the
              MAQSIP air quality model, MM5 produces 5 time-stepped
              output &quot;virtual files&quot;, some variables of two
              of which are read by SMOKE and all of which are read by
              MAQSIP; and SMOKE produces one output &quot;virtual
              files&quot; read by MAQSIP.  MAQSIP produces a
              &quot;synchronization file&quot; read by MM5/MCIP and
              used to keep MM5/MCIP from running ahead and exhausting
              available mailbox-buffer space.

        <LI>  Since data is tagged by variable-name, simulation date,
              and time, the system is not subject to data scrambling
              because of implicit programming assumptions about the
              data ordering in the way that stream-like communications
              channels are.

    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "times">
    Time Series READ/WRITE
</A></H2>

    In order to support the needs of surface-water, lake and estuary,
    and bay modeling, at the request of EPA-AREAL we have added two
    routines to the I/O&nbsp;API which will access an entire time
    step sequence of data in a single operation (&quot;read or write
    <VAR>N</VAR> time steps of data starting at date and time
    <VAR>D:T</VAR> with step <VAR>DT</VAR> for variable <VAR>V</VAR>
    to/from file <VAR>F</VAR>&quot;).  The new routines are
    <CODE><A HREF = "READ4D.html">READ4D()</A></CODE> and
    <CODE><A HREF = "WRITE4D.html">WRITE4D()</A></CODE>, and
    very much resemble <CODE>READ3()</CODE> and
    <CODE>WRITE3()</CODE>, except for the specification of an
    entire time step sequence as arguments, the restriction to
    single-variable operations (<CODE>ALLVAR3</CODE> is
    <STRONG>not</STRONG> supported for these) and file types
    <CODE><A HREF = "DATATYPES.html#custom">CUSTOM3</A></CODE>,
    <CODE><A HREF = "DATATYPES.html#grdded">GRDDED3</A></CODE>,
    <CODE><A HREF = "DATATYPES.html#bndary">BNDARY3</A></CODE>, and
    <CODE><A HREF = "DATATYPES.html#tsries">TSRIES3</A></CODE>.
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

<H2> <A NAME = "addl">
    Additional Supported Platforms
</A></H2>

    Conditional compilation directives in the I/O&nbsp;API were recently
    modified to make it easier to port the I/O&nbsp;API to other platforms.
    Three issues are prominent:
    <UL>
        <LI>  Feldman-style name mangling (trailing underscores) and
              CHARACTER string-passing conventions or not; and
        <LI>  Native length for REAL, INTEGER, and DOUBLE
        <LI>  Dynamic memory allocation mechanism, whether via
              Cray-pointers and <VAR>MALLOC</VAR> or by automatic
              arrays
    </UL>
    Preprocessor definitions and conditional compilation directives
    recognizing them have been provided in the code: defining FLDMN=0,1
    specifies the first; REAL8=0,1 specifies the second, and
    AUTO_ARRAYS=0,1 the last of these.
    Work is in progress to provide the I/O API on at least the
    following additional platforms:
    <UL>
        <LI>  Compaq <VAR>fort</VAR> and <VAR>gcc</VAR> on Linux Alpha.
        <LI>  <VAR>gcc/g77</VAR> (FLDMN=1, REAL8=0, and AUTO_ARRAYS=1)
        <LI>  Win32 (Windows&nbsp;3.1/win32s, Windows&nbsp;95, and
              Windows&nbsp;NT/x86) using either the Digital or the
              Absoft Fortran-90 compilers and the Microsoft C compiler
              (this requires that the Fortran pre-processing be done
              in advance on a UNIX system;  FLDMN=1, REAL8=0, and
              AUTO_ARRAYS=1);
        <LI>  Windows&nbsp;NT/Alpha using the Digital compilers (also
              requires Fortran pre-processing n advance; FLDMN=1,
              REAL8=0, and AUTO_ARRAYS=1);
        <LI>  &lt;suggestions? <A HREF = "mailto:carlie.coats@baronams.com">
              Do you want to donate us a machine (or machine-time)
              for it?&gt;</A>
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->


<H2> <A NAME = "mcpl">
    MCPL:  an I/O&nbsp;API output module for MM5
</A></H2>

    <A HREF="mcpl.html">MCPL</A>
    is an I/O&nbsp;API output module for MM5 developed under the
    <A HREF="http://www.baronams.com:/projects/ppar/index.html">MCNC PPAR project</A>.  It is
    MCPL is designed to fit into MM5 with a minimum of effort, to offer
    great flexibility of run-time configuration, and to be written in
    &quot;boring&quot; code that is easy to understand, extend, and
    maintain.  It generates output files with a variety of kinds of
    variables:
    <UL>
        <LI>  MM5 internal variables (including all those written by
              OUTTAP);
        <LI>  all the variables needed for input to the
              <A HREF="http://terra.baronams.com/products/maqsip/index.html">MAQSIP</A>
              air quality model or the
              <A HREF="http://terra.baronams.com/products/smoke/index.html">SMOKE</A>
              emissions model;
        <LI>  variables needed by the TOPLATS land surface/hydrology
              model;
        <LI>  variables interpolated to pressure-surfaces; and
        <LI>  a variety of other diagnostic or analysis variables
    </UL>
    <P>

    Back to <STRONG><EM><A HREF = "#contents">Contents</A></EM></STRONG>
    <P>

<HR> <!----------------------------------------------------------------->

    Go to the <STRONG><A HREF = "index.html"> I/O&nbsp;API
    Home Page</A></STRONG>
    <P>
    Go to the <STRONG><EM><A HREF = "AVAIL.html">I/O&nbsp;API
    Availability/Download page</A></EM></STRONG>
    <P>
    Go to the <A HREF = "index.html">
    <STRONG> I/O&nbsp;API Home Page</STRONG></A>
    <P>
    Go to the <STRONG><EM><A HREF = "AA.html">I/O&nbsp;API
    User Manual</A></EM></STRONG>
    <P>


Send comments to
<A HREF = "mailto:carlie.coats@baronams.com"> <ADDRESS>
          Carlie J. Coats, Jr. <BR>
          carlie.coats@baronams.com  </ADDRESS> </A><P>


    <PRE>
    $Id: NEWSTUFF.html 72 2017-12-12 17:54:20Z coats $
    </PRE>
</BODY>      <!--end body  -->
</HTML>      <!--end html  -->

